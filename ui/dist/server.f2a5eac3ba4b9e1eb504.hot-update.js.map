{"version":3,"sources":["webpack:///./src/components/Dashboard/Dashboard.jsx","webpack:///./src/components/Dashboard/NotificationBoard.jsx"],"names":["Dashboard","props","categories","setCategories","useState","showNotifications","setShowNotifications","match","useRouteMatch","getCategories","console","log","_categories","store","initialData","fetchData","useConstructor","redirect","slug","history","push","value","user","username","search","showError","query","vars","locationCategories","result","graphQLFetch","filter","cat","locations","length","NotificationBoard","notifications","setNotifications","useEffect","receivedNotifications","deleteNotification","id","oldNotifications","_notifications","notification","data","map","Notification","onDeleteNotification","giver","photo","useHistory","generateText","action","firstame","firstname","title","goToPage","e","stopPropagation"],"mappings":"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","file":"server.f2a5eac3ba4b9e1eb504.hot-update.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Heading from \"./Heading.jsx\";\nimport LocationsNearby from \"./LocationsNearby.jsx\";\nimport CategorieList from \"./CategorieList.jsx\";\nimport graphQLFetch from \"../../graphQLFetch.js\";\nimport store from \"../../store.js\";\nimport { userContext } from \"../../services/userContext.js\";\nimport { Redirect, Link, useRouteMatch } from \"react-router-dom\";\nimport useConstructor from \"../ConstructorHook.jsx\";\nimport MostRecent from \"./MostRecent.jsx\";\nimport UserProfilePicture from \"../UserProfilePicture.jsx\";\nimport { FaHome, FaBookmark, FaPlus } from \"react-icons/fa\";\nimport { IoNotifications } from \"react-icons/io5\";\nimport { FiLogOut } from \"react-icons/fi\";\nimport NotificationBoard from \"./NotificationBoard.jsx\";\n\nconst Dashboard = (props) => {\n  const [categories, setCategories] = useState();\n  const [showNotifications, setShowNotifications] = useState();\n  const match = useRouteMatch();\n\n  const getCategories = async () => {\n    console.log({ match });\n    let _categories = store.initialData ? store.initialData : null;\n    delete store.initialData;\n    if (!_categories) {\n      _categories = await Dashboard.fetchData();\n    }\n    setCategories(_categories);\n  };\n\n  useConstructor(() => {\n    getCategories();\n  });\n\n  const redirect = (slug) => {\n    props.history.push(slug);\n  };\n\n  return (\n    <userContext.Consumer>\n      {(value) => {\n        return !value.user ? (\n          <Redirect to=\"/\" />\n        ) : (\n          <React.Fragment>\n            <div className=\"block md:flex mt-8\">\n              <div className=\"w-full md:w-1/4 px-8\">\n                <div className=\"flex items-center\">\n                  <div className=\"mr-4\">\n                    <UserProfilePicture profile={value.user} size={10} />\n                  </div>\n                  <h1 className=\"font-bold text-xl leading-tight text-center sm:text-left\">\n                    {value.user.username}\n                  </h1>\n                </div>\n                <ul className=\"mt-6\">\n                  <li\n                    className={`block py-3 flex items-center ${\n                      !showNotifications\n                        ? `text-blue-500 font-bold`\n                        : `text-gray-900 hover:text-blue-500 hover:font-bold`\n                    }`}\n                    onClick={() => setShowNotifications(false)}\n                  >\n                    <FaHome className=\"mr-2\" />\n                    <span>Dashboard</span>\n                  </li>\n                  <li>\n                    <Link\n                      className=\"block py-3 text-gray-900 hover:text-blue-500 hover:font-bold flex items-center\"\n                      to={`/fotograaf/${value.user.slug}#fav`}\n                    >\n                      <FaBookmark className=\"mr-2\" />\n                      <span>Opgeslagen locaties</span>\n                    </Link>\n                  </li>\n                  <li>\n                    <Link\n                      className=\"block py-3 text-gray-900 hover:text-blue-500 hover:font-bold flex items-center\"\n                      to=\"/foto/toevoegen\"\n                    >\n                      <FaPlus className=\"mr-2\" />\n                      <span>Foto uploaden</span>\n                    </Link>\n                  </li>\n                  <li>\n                    <span\n                      className={`block py-3 flex items-center ${\n                        showNotifications\n                          ? `text-blue-500 font-bold`\n                          : `text-gray-900 hover:text-blue-500 hover:font-bold`\n                      }`}\n                      onClick={() => setShowNotifications(true)}\n                    >\n                      <IoNotifications className=\"mr-2\" />\n                      <span>Berichten</span>\n                    </span>\n                  </li>\n                  <li>\n                    <Link\n                      className=\"block py-3 text-gray-900 hover:text-blue-500 hover:font-bold border-t border-gray-200 pt-6 mt-6 flex items-center\"\n                      to=\"\"\n                    >\n                      <FiLogOut className=\"mr-2\" />\n                      <span>Uitloggen</span>\n                    </Link>\n                  </li>\n                </ul>\n              </div>\n\n              <div className=\"w-full md:w-1/2\">\n                {showNotifications ? (\n                  <NotificationBoard user={value.user} />\n                ) : (\n                  <>\n                    <Heading redirect={redirect} />\n                    <MostRecent />\n                  </>\n                )}\n              </div>\n\n              <div className=\"w-full md:w-1/4  px-8\">\n                <LocationsNearby />\n                <CategorieList categories={categories} />\n              </div>\n            </div>\n          </React.Fragment>\n        );\n      }}\n    </userContext.Consumer>\n  );\n};\n\nexport default Dashboard;\n\nDashboard.fetchData = async (match, search, showError) => {\n  // build the graphql query\n  const query = `query {\n\t\tlocationCategories{\n\t\t  label\n      value\n      locations {\n        id\n      }\n\t\t}\n\t  }`;\n\n  const vars = {};\n  const { locationCategories: result } = await graphQLFetch(query, vars, true);\n\n  // only return categories with available locations\n  return result.filter((cat) => cat.locations.length > 0);\n};\n","import React, { useState, useEffect } from \"react\";\nimport UserProfilePicture from \"../UserProfilePicture.jsx\";\nimport { IoIosCloseCircle } from \"react-icons/io\";\nimport graphQLFetch from \"../../graphQLFetch.js\";\nimport { useHistory } from \"react-router-dom\";\n\nconst NotificationBoard = ({ user }) => {\n  const [notifications, setNotifications] = useState();\n\n  useEffect(() => {\n    setNotifications(user.receivedNotifications);\n  }, [user.receivedNotifications]);\n\n  const deleteNotification = async (id) => {\n    const oldNotifications = notifications;\n\n    const _notifications = notifications.filter((notification) => {\n      return notification.id != id;\n    });\n\n    setNotifications(_notifications);\n\n    const query = `mutation deleteNotification($id:ID!){\n        deleteNotification(input: { where: { id: $id } }) {\n          notification {\n            id\n          }\n        }\n      }`;\n\n    let vars = {};\n    vars.id = id;\n\n    const data = await graphQLFetch(query, vars, true);\n    if (!data.deleteNotification.notification) {\n      setNotifications(oldNotifications);\n    }\n  };\n\n  return (\n    <>\n      {notifications && notifications.length > 0 && (\n        <div className=\"rounded-full bg-red-500 text-white absolute top-0 -mt-1 right-0 -mr-1 text-xs w-5 h-5 flex items-center justify-center\">\n          {notifications.length}\n        </div>\n      )}\n      <div\n        className=\"absolute bg-white rounded py-6 border z-20 right-0 shadow-lg\"\n        id=\"notifications\"\n      >\n        <h1 className=\"text-black pl-6\">Meldingen</h1>\n        {notifications && !notifications.length > 0 ? (\n          <div className=\"my-2 px-6 py-4\">\n            Er zijn geen notificaties voor je!\n          </div>\n        ) : (\n          notifications &&\n          notifications.map((notification) => {\n            return (\n              <Notification\n                key={notification.id}\n                notification={notification}\n                onDeleteNotification={deleteNotification}\n              />\n            );\n          })\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default NotificationBoard;\n\nconst Notification = ({ notification, onDeleteNotification }) => {\n  const { giver, photo } = notification;\n  const history = useHistory();\n\n  const generateText = () => {\n    if (notification.action === \"like\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } vind je foto ${photo.title} leuk`;\n    }\n    if (notification.action === \"comment\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } heeft gereageerd op je foto ${photo.title}`;\n    }\n    if (notification.action === \"follow\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } volgt je nu!`;\n    }\n  };\n\n  const goToPage = () => {\n    if (notification.action === \"like\" || notification.action === \"comment\") {\n      history.push(`/foto/${photo.slug}`);\n    }\n    if (notification.action === \"follow\") {\n      history.push(`/fotograaf/${giver.slug}`);\n    }\n  };\n\n  const deleteNotification = (e) => {\n    e.stopPropagation();\n    onDeleteNotification(notification.id);\n  };\n\n  return (\n    <>\n      <div\n        onClick={goToPage}\n        className=\"flex items-center relative my-2 px-6 py-4 hover:bg-gray-100 cursor-pointer z-10\"\n      >\n        <div className=\"mr-4\">\n          <UserProfilePicture profile={notification.giver} size={8} />\n        </div>\n        <div>{generateText()}</div>\n        <div className=\"ml-auto\" onClick={deleteNotification}>\n          <IoIosCloseCircle className=\"text-gray-500 hover:text-gray-600 text-2xl\" />{\" \"}\n        </div>\n      </div>\n    </>\n  );\n};\n"],"sourceRoot":""}