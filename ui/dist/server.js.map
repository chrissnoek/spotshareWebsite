{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/hot/log-apply-result.js","webpack:///(webpack)/hot/log.js","webpack:///(webpack)/hot/poll.js","webpack:///./server/render.jsx","webpack:///./server/template.js","webpack:///./server/uiserver.js","webpack:///./src/AddPhoto.jsx","webpack:///./src/BlogPost.jsx","webpack:///./src/Contents.jsx","webpack:///./src/FBConnect.jsx","webpack:///./src/ForgotPassword.jsx","webpack:///./src/Form.jsx","webpack:///./src/Home.jsx","webpack:///./src/Input.jsx","webpack:///./src/LocationCard.jsx","webpack:///./src/LocationDetailStrapi.jsx","webpack:///./src/LoginHooks.jsx","webpack:///./src/Logout.jsx","webpack:///./src/NotFound.jsx","webpack:///./src/Page.jsx","webpack:///./src/PasswordReset.jsx","webpack:///./src/PhotoAddStrapi.jsx","webpack:///./src/PhotoAddToLocation.jsx","webpack:///./src/PhotoCarousel.jsx","webpack:///./src/PhotoDetailStrapi.jsx","webpack:///./src/Profile.jsx","webpack:///./src/ProfileEdit.jsx","webpack:///./src/RegisterHooks.jsx","webpack:///./src/components/CategorySearch/LocationsPerCategorie.jsx","webpack:///./src/components/Comments/Comments.jsx","webpack:///./src/components/Comments/RecursiveComment.jsx","webpack:///./src/components/Comments/ReplyBox.jsx","webpack:///./src/components/ConstructorHook.jsx","webpack:///./src/components/CreateNotification.jsx","webpack:///./src/components/Dashboard/CategorieList.jsx","webpack:///./src/components/Dashboard/Dashboard.jsx","webpack:///./src/components/Dashboard/Heading.jsx","webpack:///./src/components/Dashboard/LocationsNearby.jsx","webpack:///./src/components/Dashboard/MostRecent.jsx","webpack:///./src/components/Dashboard/NotificationBoard.jsx","webpack:///./src/components/Dashboard/SearchBox.jsx","webpack:///./src/components/Dashboard/SocialCard.jsx","webpack:///./src/components/FindNearbyLocations.jsx","webpack:///./src/components/Footer.jsx","webpack:///./src/components/LocationCards.jsx","webpack:///./src/components/Results/CategorieFilter.jsx","webpack:///./src/components/Results/LocationList.jsx","webpack:///./src/components/Results/ResultMap.jsx","webpack:///./src/components/Results/Results.jsx","webpack:///./src/components/UserProfilePicture.jsx","webpack:///./src/components/favButton.jsx","webpack:///./src/components/followButton.jsx","webpack:///./src/components/notificationCenter/notifications.jsx","webpack:///./src/graphQLFetch.js","webpack:///./src/images/locationMarker.svg","webpack:///./src/images/markerShadow.png","webpack:///./src/images/userMarker.svg","webpack:///./src/images/visitedMarker.svg","webpack:///./src/routes.js","webpack:///./src/services/authService.js","webpack:///./src/services/httpService.js","webpack:///./src/services/userContext.js","webpack:///./src/store.js","webpack:///./webpack.config.js","webpack:///external \"@hapi/joi\"","webpack:///external \"autoprefixer\"","webpack:///external \"axios\"","webpack:///external \"dotenv\"","webpack:///external \"exif-js\"","webpack:///external \"exifr\"","webpack:///external \"express\"","webpack:///external \"http-proxy-middleware\"","webpack:///external \"isomorphic-fetch\"","webpack:///external \"jwt-decode\"","webpack:///external \"leaflet\"","webpack:///external \"leaflet/dist/images/marker-shadow.png\"","webpack:///external \"path\"","webpack:///external \"react\"","webpack:///external \"react-cool-img\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-icons/ai\"","webpack:///external \"react-icons/cg\"","webpack:///external \"react-icons/fa\"","webpack:///external \"react-icons/fi\"","webpack:///external \"react-icons/go\"","webpack:///external \"react-icons/io\"","webpack:///external \"react-icons/io5\"","webpack:///external \"react-icons/md\"","webpack:///external \"react-icons/ti\"","webpack:///external \"react-leaflet-universal\"","webpack:///external \"react-router-dom\"","webpack:///external \"react-sanitized-html\"","webpack:///external \"react-select\"","webpack:///external \"react-select/animated\"","webpack:///external \"react-select/creatable\"","webpack:///external \"react-toastify\"","webpack:///external \"serialize-javascript\"","webpack:///external \"slugify\"","webpack:///external \"source-map-support\"","webpack:///external \"swiper/react\"","webpack:///external \"tailwindcss\"","webpack:///external \"url-search-params\"","webpack:///external \"webpack\"","webpack:///external \"webpack-dev-middleware\"","webpack:///external \"webpack-hot-middleware\"","webpack:///external \"webpack-node-externals\""],"names":["module","exports","updatedModules","renewedModules","unacceptedModules","filter","moduleId","indexOf","log","require","length","forEach","parts","split","groupCollapsed","pop","groupEnd","numberIds","every","logLevel","dummy","shouldLog","level","logGroup","logFn","msg","console","warn","error","group","setLogLevel","formatError","err","message","stack","hotPollInterval","__resourceQuery","substr","checkForUpdate","fromUpdate","hot","status","check","then","catch","setInterval","render","req","res","activeRoute","routes","find","route","matchPath","path","initialData","component","fetchData","match","index","url","search","store","context","element","body","ReactDOMServer","renderToString","redirect","send","template","data","serialize","app","express","SourceMapSupport","install","dotenv","config","enableHMR","process","env","ENABLE_HMR","webpack","devMiddleware","hotMiddleware","entry","push","plugins","HotModuleReplacementPlugin","compiler","use","static","apiProxyTarget","API_PROXY_TARGET","proxy","target","UI_API_ENDPOINT","UI_SERVER_API_ENDPOINT","UI_API_IMAGE_ENDPOINT","UI_SERVER_API_IMAGE_ENDPOINT","get","JSON","stringify","next","port","UI_SERVER_PORT","listen","accept","AddPhoto","props","currentStep","date","shutterspeed","iso","aperture","camera","focalLength","title","state","photo","photoLoading","tempFile","showInputClass","onDragOver","invalidFields","blob","fileInput","onFileChange","handleOnDrop","handleOnDragOver","handleOnDragLeave","removeImage","onChange","BlogPost","article","setArticleBySlug","useState","getInitialArticle","_article","useConstructor","useEffect","articleBySlug","a","img","showError","query","params","slug","replace","result","graphQLFetch","Contents","map","attrs","FBConnect","Component","componentDidMount","location","axios","response","user","jwt","authService","setToken","window","ForgotPassword","setData","errors","setErrors","loginError","setLoginError","handleChange","currentTarget","input","_errors","errorMessage","validateProperty","name","_data","value","schema","email","Joi","string","tlds","allow","required","messages","object","_schema","validate","details","options","abortEarly","allowUnknown","item","doSubmit","vars","handleSubmit","e","preventDefault","renderButton","label","disable","Object","keys","renderInput","placeholder","type","classes","onBlur","backgroundImage","backgroundSize","backgroundPosition","Form","setState","Home","HomeScreen","Input","rest","className","LocationCard","constructor","onClick","active","componentDidUpdate","prevProps","prevState","activeLocation","onClickHandler","photos","LocationDetailStrapi","LocationDetailComponent","React","id","likedId","action","favArray","favouriteLocations","fav","includes","splice","variables","where","userLikedLocation","locationBySlug","isServer","zoom","userLocationKnown","userMarker","userLocation","longitude","latitude","prevId","loadData","curUser","prevCurUser","usersFavourites","favourites","L","Icon","iconUrl","userIcon","iconRetinaUrl","iconAnchor","popupAnchor","shadowUrl","default","shadowAnchor","iconSize","Point","Default","prototype","_getIconUrl","mergeOptions","locationIcon","enableHighAccuracy","timeout","maximumAge","success","pos","crd","coords","accuracy","code","fetch","json","navigator","geolocation","getCurrentPosition","position","calculatedUserLocation","sort","b","likes","height","location_categories","favourite","updateFav","desc","directions","whattoshoot","months","month","photoItem","LocationPhotoItem","itemPhoto","selectedLocation","LocationDetailComponentRouter","withRouter","Login","password","loginUser","defineProperty","getOwnPropertyDescriptor","loggedIn","auth","login","ErrorBox","Logout","logout","staticContext","NavBar","isOpen","setIsOpen","openNotifications","setOpenNotifications","history","useHistory","closeMenu","notIconClick","toggleOpen","onNotClick","link","username","Page","PasswordReset","setCode","setSuccess","useLocation","URLSearchParams","_code","passwordConfirmation","equal","ref","_schemaObject","endsWith","dependentInput","substring","resetPassword","toast","animatedComponents","makeAnimated","PhotoAddStrapi","pathname","fetchLocation","AddPhotoForm","setNewLocation","resetSelectedLocation","newLocation","option","slugify","replacement","remove","undefined","lower","strict","createLocationCategory","locationCategory","oldCategories","locationCategoryValues","newCategory","selectedValues","categoryIds","newValue","ids","createLocation","event","property","checked","stateFields","locationKnown","file","size","hasOwnProperty","files","photoValidation","reader","FileReader","onload","URL","createObjectURL","readAsDataURL","exifrGps","exifr","gps","output","parse","EXIF","getData","exifData","pretty","getTag","splittedDate","year","day","dateVal","shutterVal","numerator","denominator","shutterspeedVal","ISOVal","apertureVal","focalLengthVal","cameraVal","suffix","previousSuffix","checkForAvailableSlug","photoBySlug","n","str","lastIndexOf","previousSlug","createdSuffix","adjustedSlug","reactedSlug","createSlug","locationCategories","monthValues","lat","lng","onDrop","uploadPercentage","bind","createRef","prevUser","updateContext","previousButton","_prev","nextButton","disabled","btnClass","_next","changeMarkers","persist","createdLocation","createdSlug","Date","toString","createPhoto","formData","FormData","uploadedFile","append","request","XMLHttpRequest","open","addEventListener","handleInputChange","findNearbyLocations","onLocationSelect","updateNewLocationCoords","handleSelect","onCategoryCreate","fetchCategories","onNewLocationClick","width","Step2","nearbyLocations","loadingNearbyLocations","marker","refmarker","current","leafletElement","getLatLng","getZoom","displayLocations","draggable","updatePosition","PhotoAddToLocation","MapElement","PhotoView","deletePhoto","toDateString","confirm","PhotoCarousel","photoViews","PhotoDetailStrapi","receiver","likedPhotos","CreateNotification","_comments","comments","createPhotoComment","photoComment","parent","usersLike","addComment","UserProfile","profile","setProfile","getInitialProfile","_profile","getProfile","updateFollow","followId","profileFollowersArray","followers","following","prevProfile","newFollowArray","newList","users","UserProfileComponent","setIsServer","followCount","filterResult","followsUser","numberOfLikes","i","followings","dataEdit","firstname","lastname","regex","newSlug","saving","prevSlug","userId","doRedirect","setTimeout","profilePicture","updateUser","uploadFile","RegisterForm","createUser","onInputBlur","valueObj","available","checkAvailability","charAt","toUpperCase","slice","registered","register","LocationsPerCategorie","locations","setLocations","filteredLocations","setFilteredLocations","setSelectedLocation","showMap","setShowMap","getLocations","_activeFilter","getActiveFilter","_filteredLocations","include","categorie","_locations","setActiveFilter","selectLocation","locationId","PhotoComment","photoId","unflattenedComments","setUnflattenedComments","unflatten","arr","tree","mappedArr","arrElem","mappedElem","len","unshift","idx","Comment","showReplyBox","setShowReplyBox","replyClick","closeReplyBox","children","ReplyBox","replyTo","closeBoxHandler","commentValue","setCommentValue","post","callBack","hasBeenCalled","useRef","giver","CategorieList","categories","CategorieLabel","Dashboard","setCategories","showNotifications","setShowNotifications","useRouteMatch","getCategories","_categories","cat","Heading","greeting","setGreeting","myDate","hrs","getHours","personalHeading","LocationsNearby","category","MostRecent","recentPhotos","setRecentPhotos","getMostRecent","_recentPhotos","NotificationBoard","notifications","setNotifications","receivedNotifications","deleteNotification","oldNotifications","_notifications","notification","Notification","onDeleteNotification","generateText","firstame","goToPage","stopPropagation","SearchBox","showDropdown","setShowDropdown","formValue","setFormValue","handleDropdown","focussed","urlValue","trim","ok","sessionStorage","getItem","removeItem","lon","alert","searchCurLoc","SocialCard","createdAt","toLocaleString","backgroundColor","parseFloat","distance","radius","rad2deg","angle","deg2rad","maxlat","minlat","maxlng","Math","cos","minlng","distanceFromLocation","lat1","lon1","lat2","lon2","theta","dist","sin","acos","miles","locDistance","keyA","keyB","Footer","cardClass","imageClass","imageStyle","transform","left","top","LocationHashtag","toLowerCase","CategorieFilter","onFilterChange","filteredCategories","setFilteredCategories","setValue","_filteredCategories","reduce","newCats","categoryArr","duplicateArr","LocationList","goToLocation","setItem","ResultMap","bounds","setBounds","hoverIcon","setHoverIcon","locIcon","setLocIcon","visitedIcon","setVisIcon","visitedLocations","setVisitedLocations","prevSettings","setPrevSettings","dynamicBounds","setDynamicBounds","loadMap","_hoverIcon","_locIcon","_visIcon","visIcon","_bounds","latLngBounds","onViewportChanged","viewport","center","Results","activeFilter","reset","UserProfilePicture","favButton","addTitle","removeTitle","loading","setLoading","liked","setLiked","onBtnClick","heartClass","followButton","follow","followed","setFollowed","followIcon","followClass","Notifications","show","dateRegex","RegExp","jsonDateReviver","key","test","isBlog","returnError","apiEndpoint","__isBrowser__","method","headers","text","extensions","exception","join","exact","Profile","ProfileEdit","NotFound","tokenKey","localStorage","getCurrentUser","jwtDecode","ex","interceptors","expextedError","put","delete","userContext","createContext","nodeExternals","browserConfig","mode","filename","resolve","__dirname","publicPath","rules","loader","postcssOptions","exclude","presets","targets","ie","edge","safari","firefox","chrome","optimization","splitChunks","chunks","DefinePlugin","devtool","serverConfig","server","externals","node"],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA,IAAI;QACJ;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;;QAEL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA,6BAA6B;QAC7B,6BAA6B;QAC7B;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA,qBAAqB,gBAAgB;QACrC;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,qBAAqB,gBAAgB;QACrC;QACA;QACA,KAAK;QACL;QACA;QACA,KAAK;QACL;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;;QAEL;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,KAAK;;QAEL;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA,kBAAkB,8BAA8B;QAChD;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,IAAI;QACJ;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,IAAI;QACJ;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA,OAAO;QACP;QACA;QACA;QACA;QACA,IAAI;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,oBAAoB,2BAA2B;QAC/C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,OAAO;QACP;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA,mBAAmB,cAAc;QACjC;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,gBAAgB,KAAK;QACrB;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA,gBAAgB,YAAY;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA,cAAc,4BAA4B;QAC1C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA,IAAI;;QAEJ;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;QACA,eAAe,4BAA4B;QAC3C;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA,eAAe,4BAA4B;QAC3C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,uCAAuC;QACxD;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,uCAAuC;QACxD;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,sBAAsB;QACvC;QACA;QACA;QACA,QAAQ;QACR;QACA;QACA;QACA;QACA;QACA;QACA,UAAU;QACV;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA,cAAc,wCAAwC;QACtD;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,OAAO;QACP;QACA;QACA;QACA;QACA;QACA;QACA,SAAS;QACT;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QAC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,cAAM,EAAE,cADL;AAEH9kB,eAAO,EAAE;AACPilB,iBAAO,EAAE,CACP,CACE,mBADF,EAEE;AACEC,mBAAO,EAAE;AAAEc,kBAAI,EAAE;AAAR;AADX,WAFF,CADO,EAOP,qBAPO,CADF;AAUPzsB,iBAAO,EAAE,CAAC,yCAAD;AAVF;AAFN;AAFP,KADK,EAmBL;AACEqpB,UAAI,EAAE,yBADR;AAEElpB,SAAG,EAAE,CACH;AACEorB,cAAM,EAAE;AADV,OADG;AAFP,KAnBK;AADD,GAVW;AAwCnBvrB,SAAO,EAAE,CACP,IAAIL,OAAO,CAACysB,YAAZ,CAAyB;AACvB3C,iBAAa,EAAE;AADQ,GAAzB,CADO,CAxCU;AA6CnB4C,SAAO,EAAE;AA7CU,CAArB;AAgDA7xB,MAAM,CAACC,OAAP,GAAiB,CAACuwB,aAAD,EAAgBsB,YAAhB,CAAjB,C;;;;;;;;;;;;;;;;;;;;;;;;;AClIA,sC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,mD","file":"server.js","sourcesContent":[" \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar chunk = require(\"./\" + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\");\n \t\thotAddUpdateChunk(chunk.id, chunk.modules);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest() {\n \t\ttry {\n \t\t\tvar update = require(\"./\" + \"\" + hotCurrentHash + \".hot-update.json\");\n \t\t} catch (e) {\n \t\t\treturn Promise.resolve();\n \t\t}\n \t\treturn Promise.resolve(update);\n \t}\n\n \t//eslint-disable-next-line no-unused-vars\n \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"5b81892a97c832647c62\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_selfInvalidated: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n \t\t\tinvalidate: function() {\n \t\t\t\tthis._selfInvalidated = true;\n \t\t\t\tswitch (hotStatus) {\n \t\t\t\t\tcase \"idle\":\n \t\t\t\t\t\thotUpdate = {};\n \t\t\t\t\t\thotUpdate[moduleId] = modules[moduleId];\n \t\t\t\t\t\thotSetStatus(\"ready\");\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"ready\":\n \t\t\t\t\t\thotApplyInvalidatedModule(moduleId);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"prepare\":\n \t\t\t\t\tcase \"check\":\n \t\t\t\t\tcase \"dispose\":\n \t\t\t\t\tcase \"apply\":\n \t\t\t\t\t\t(hotQueuedInvalidatedModules =\n \t\t\t\t\t\t\thotQueuedInvalidatedModules || []).push(moduleId);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\t// ignore requests in error states\n \t\t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash, hotQueuedInvalidatedModules;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(hotApplyInvalidatedModules() ? \"ready\" : \"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tvar chunkId = \"server\";\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n \t\treturn hotApplyInternal(options);\n \t}\n\n \tfunction hotApplyInternal(options) {\n \t\thotApplyInvalidatedModules();\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (\n \t\t\t\t\t!module ||\n \t\t\t\t\t(module.hot._selfAccepted && !module.hot._selfInvalidated)\n \t\t\t\t)\n \t\t\t\t\tcontinue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted &&\n \t\t\t\t// removed self-accepted modules should not be required\n \t\t\t\tappliedUpdate[moduleId] !== warnUnexpectedRequire &&\n \t\t\t\t// when called invalidate self-accepting is not possible\n \t\t\t\t!installedModules[moduleId].hot._selfInvalidated\n \t\t\t) {\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\tparents: installedModules[moduleId].parents.slice(),\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\tif (hotUpdateNewHash !== undefined) {\n \t\t\thotCurrentHash = hotUpdateNewHash;\n \t\t\thotUpdateNewHash = undefined;\n \t\t}\n \t\thotUpdate = undefined;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = item.parents;\n \t\t\thotCurrentChildModule = moduleId;\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\tif (hotQueuedInvalidatedModules) {\n \t\t\treturn hotApplyInternal(options).then(function(list) {\n \t\t\t\toutdatedModules.forEach(function(moduleId) {\n \t\t\t\t\tif (list.indexOf(moduleId) < 0) list.push(moduleId);\n \t\t\t\t});\n \t\t\t\treturn list;\n \t\t\t});\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \tfunction hotApplyInvalidatedModules() {\n \t\tif (hotQueuedInvalidatedModules) {\n \t\t\tif (!hotUpdate) hotUpdate = {};\n \t\t\thotQueuedInvalidatedModules.forEach(hotApplyInvalidatedModule);\n \t\t\thotQueuedInvalidatedModules = undefined;\n \t\t\treturn true;\n \t\t}\n \t}\n\n \tfunction hotApplyInvalidatedModule(moduleId) {\n \t\tif (!Object.prototype.hasOwnProperty.call(hotUpdate, moduleId))\n \t\t\thotUpdate[moduleId] = modules[moduleId];\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(0)(__webpack_require__.s = 0);\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nmodule.exports = function(updatedModules, renewedModules) {\n\tvar unacceptedModules = updatedModules.filter(function(moduleId) {\n\t\treturn renewedModules && renewedModules.indexOf(moduleId) < 0;\n\t});\n\tvar log = require(\"./log\");\n\n\tif (unacceptedModules.length > 0) {\n\t\tlog(\n\t\t\t\"warning\",\n\t\t\t\"[HMR] The following modules couldn't be hot updated: (They would need a full reload!)\"\n\t\t);\n\t\tunacceptedModules.forEach(function(moduleId) {\n\t\t\tlog(\"warning\", \"[HMR]  - \" + moduleId);\n\t\t});\n\t}\n\n\tif (!renewedModules || renewedModules.length === 0) {\n\t\tlog(\"info\", \"[HMR] Nothing hot updated.\");\n\t} else {\n\t\tlog(\"info\", \"[HMR] Updated modules:\");\n\t\trenewedModules.forEach(function(moduleId) {\n\t\t\tif (typeof moduleId === \"string\" && moduleId.indexOf(\"!\") !== -1) {\n\t\t\t\tvar parts = moduleId.split(\"!\");\n\t\t\t\tlog.groupCollapsed(\"info\", \"[HMR]  - \" + parts.pop());\n\t\t\t\tlog(\"info\", \"[HMR]  - \" + moduleId);\n\t\t\t\tlog.groupEnd(\"info\");\n\t\t\t} else {\n\t\t\t\tlog(\"info\", \"[HMR]  - \" + moduleId);\n\t\t\t}\n\t\t});\n\t\tvar numberIds = renewedModules.every(function(moduleId) {\n\t\t\treturn typeof moduleId === \"number\";\n\t\t});\n\t\tif (numberIds)\n\t\t\tlog(\n\t\t\t\t\"info\",\n\t\t\t\t\"[HMR] Consider using the NamedModulesPlugin for module names.\"\n\t\t\t);\n\t}\n};\n","var logLevel = \"info\";\n\nfunction dummy() {}\n\nfunction shouldLog(level) {\n\tvar shouldLog =\n\t\t(logLevel === \"info\" && level === \"info\") ||\n\t\t([\"info\", \"warning\"].indexOf(logLevel) >= 0 && level === \"warning\") ||\n\t\t([\"info\", \"warning\", \"error\"].indexOf(logLevel) >= 0 && level === \"error\");\n\treturn shouldLog;\n}\n\nfunction logGroup(logFn) {\n\treturn function(level, msg) {\n\t\tif (shouldLog(level)) {\n\t\t\tlogFn(msg);\n\t\t}\n\t};\n}\n\nmodule.exports = function(level, msg) {\n\tif (shouldLog(level)) {\n\t\tif (level === \"info\") {\n\t\t\tconsole.log(msg);\n\t\t} else if (level === \"warning\") {\n\t\t\tconsole.warn(msg);\n\t\t} else if (level === \"error\") {\n\t\t\tconsole.error(msg);\n\t\t}\n\t}\n};\n\n/* eslint-disable node/no-unsupported-features/node-builtins */\nvar group = console.group || dummy;\nvar groupCollapsed = console.groupCollapsed || dummy;\nvar groupEnd = console.groupEnd || dummy;\n/* eslint-enable node/no-unsupported-features/node-builtins */\n\nmodule.exports.group = logGroup(group);\n\nmodule.exports.groupCollapsed = logGroup(groupCollapsed);\n\nmodule.exports.groupEnd = logGroup(groupEnd);\n\nmodule.exports.setLogLevel = function(level) {\n\tlogLevel = level;\n};\n\nmodule.exports.formatError = function(err) {\n\tvar message = err.message;\n\tvar stack = err.stack;\n\tif (!stack) {\n\t\treturn message;\n\t} else if (stack.indexOf(message) < 0) {\n\t\treturn message + \"\\n\" + stack;\n\t} else {\n\t\treturn stack;\n\t}\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n/*globals __resourceQuery */\nif (module.hot) {\n\tvar hotPollInterval = +__resourceQuery.substr(1) || 10 * 60 * 1000;\n\tvar log = require(\"./log\");\n\n\tvar checkForUpdate = function checkForUpdate(fromUpdate) {\n\t\tif (module.hot.status() === \"idle\") {\n\t\t\tmodule.hot\n\t\t\t\t.check(true)\n\t\t\t\t.then(function(updatedModules) {\n\t\t\t\t\tif (!updatedModules) {\n\t\t\t\t\t\tif (fromUpdate) log(\"info\", \"[HMR] Update applied.\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\trequire(\"./log-apply-result\")(updatedModules, updatedModules);\n\t\t\t\t\tcheckForUpdate(true);\n\t\t\t\t})\n\t\t\t\t.catch(function(err) {\n\t\t\t\t\tvar status = module.hot.status();\n\t\t\t\t\tif ([\"abort\", \"fail\"].indexOf(status) >= 0) {\n\t\t\t\t\t\tlog(\"warning\", \"[HMR] Cannot apply update.\");\n\t\t\t\t\t\tlog(\"warning\", \"[HMR] \" + log.formatError(err));\n\t\t\t\t\t\tlog(\"warning\", \"[HMR] You need to restart the application!\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlog(\"warning\", \"[HMR] Update failed: \" + log.formatError(err));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\tsetInterval(checkForUpdate, hotPollInterval);\n} else {\n\tthrow new Error(\"[HMR] Hot Module Replacement is disabled.\");\n}\n","import React from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport { StaticRouter, matchPath } from \"react-router-dom\";\n\nimport Page from \"../src/Page.jsx\";\nimport template from \"./template.js\";\nimport store from \"../src/store.js\";\nimport routes from \"../src/routes.js\";\n\nasync function render(req, res) {\n  // to find the component that is being rendered (activeRoute)\n  // we use matchPatch from RRD to return the correct route\n  // which matches our current url (req.path)\n  const activeRoute = routes.find((route) => matchPath(req.path, route));\n  //   console.log(routes);\n  //   console.log(req.path);\n  //   console.log(activeRoute);\n  //   console.log(activeRoute.component.fetchData);\n\n  let initialData;\n  if (activeRoute && activeRoute.component.fetchData) {\n    // get the this.props.match to find the /edit/2 id from url, and send with fetchData function\n    const match = matchPath(req.path, activeRoute);\n    console.log(match);\n\n    // get the index search query of the url\n    const index = req.url.indexOf(\"?\");\n\n    // index -1 is given when there is no ? sign\n    const search = index !== -1 ? req.url.substr(index) : null;\n\n    console.log(\"line numer 27: \", activeRoute, \"fetching data\", search);\n\n    initialData = await activeRoute.component.fetchData(match, search);\n\n    //console.log(initialData);\n  }\n  store.initialData = initialData;\n\n  const context = {};\n  const element = (\n    <StaticRouter location={req.url} context={context}>\n      <Page />\n    </StaticRouter>\n  );\n  const body = ReactDOMServer.renderToString(element);\n\n  if (context.status === 404) {\n    res.status(404);\n  }\n  if (context.url) {\n    return res.redirect(301, context.url);\n  } else {\n    res.send(template(body, initialData));\n  }\n}\n\nexport default render;\n","import serialize from 'serialize-javascript';\n\nexport default function template(body, data) {\n    return `<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" />\n    <title>template joe Pro MERN Stack</title>\n    <style>\n        table.table-hover tr {\n            cursor: pointer;\n        }\n\n        a.active {\n            background-color: #D8D8F5;\n        }\n\n        input.invalid {\n            border-color: red;\n        }\n\n        div.error {\n            color: red;\n        }\n    </style>\n</head>\n\n\n<body>\n  <!-- Page generated from template. -->\n  <div id=\"contents\">${body}</div>\n  <script>window.__INITIAL_DATA__ = ${serialize(data)}</script>\n  <script src=\"/env.js\"></script>\n  <script src=\"/vendor.bundle.js\"></script>\n  <script src=\"/app.bundle.js\"></script>\n</body>\n</html>\n`;\n}","import dotenv from 'dotenv';\nimport express from 'express';\nimport proxy from 'http-proxy-middleware';\nimport SourceMapSupport from 'source-map-support';\n\nimport render from './render.jsx';\n\nconst app = express();\n\nSourceMapSupport.install();\ndotenv.config();\nconst enableHMR = (process.env.ENABLE_HMR || 'true') === 'true';\nif (enableHMR && (process.env.NODE_ENV !== 'production')) {\n  console.log('Adding dev middleware, enabling HMR');\n  /* eslint \"global-require\":\"off\"*/\n  /* eslint \"import/no-extraneous-dependencies\":\"off\"*/\n  const webpack = require('webpack');\n  const devMiddleware = require('webpack-dev-middleware');\n  const hotMiddleware = require('webpack-hot-middleware');\n\n  const config = require('../webpack.config.js')[0];\n  config.entry.app.push('webpack-hot-middleware/client');\n  config.plugins = config.plugins || [];\n  config.plugins.push(new webpack.HotModuleReplacementPlugin());\n  const compiler = webpack(config);\n  app.use(devMiddleware(compiler));\n  app.use(hotMiddleware(compiler));\n}\n\napp.use(express.static('public'));\n\nconst apiProxyTarget = process.env.API_PROXY_TARGET;\n\nif (apiProxyTarget) {\n  app.use('/graphql', proxy({ target: apiProxyTarget }));\n}\n\nif (!process.env.UI_API_ENDPOINT) {\n  process.env.UI_API_ENDPOINT = 'http://localhost:3000/graphql';\n}\n\nif (!process.env.UI_SERVER_API_ENDPOINT) {\n  process.env.UI_SERVER_API_ENDPOINT = process.env.UI_API_ENDPOINT;\n}\n\nif (!process.env.UI_API_IMAGE_ENDPOINT) {\n  process.env.UI_API_IMAGE_ENDPOINT = 'http://localhost:3000/api/images/upload';\n}\n\nif (!process.env.UI_SERVER_API_IMAGE_ENDPOINT) {\n  process.env.UI_SERVER_API_IMAGE_ENDPOINT = process.env.UI_API_IMAGE_ENDPOINT;\n}\n\napp.get('/env.js', (req, res) => {\n  const env = { UI_API_ENDPOINT: process.env.UI_API_ENDPOINT, UI_API_IMAGE_ENDPOINT: process.env.UI_SERVER_API_IMAGE_ENDPOINT };\n  res.send(`window.ENV = ${JSON.stringify(env)}`);\n});\n\napp.get('*', (req, res, next) => {\n  render(req, res, next);\n});\n\nconst port = process.env.UI_SERVER_PORT || 8000;\n\napp.listen(port, () => {\n  console.log(`UI started on port ${port}`);\n});\n\nif (module.hot) {\n  module.hot.accept('./render.jsx');\n}","import React from \"react\";\nimport { AiOutlineLoading3Quarters } from \"react-icons/ai\";\nimport { FiTrash2 } from \"react-icons/fi\";\nimport { userContext } from \"./services/userContext.js\";\n\nfunction AddPhoto(props) {\n\tif (props.currentStep && props.currentStep !== 1) {\n\t\treturn null;\n\t}\n\n\tconst {\n\t\tdate,\n\t\tshutterspeed,\n\t\tiso,\n\t\taperture,\n\t\tcamera,\n\t\tfocalLength,\n\t\ttitle,\n\t} = props.state.photo;\n\tconst { photoLoading, tempFile } = props.state;\n\n\tlet showInputClass =\n\t\t\"relative border-2 border-dashed rounded mb-2 p-4 text-center cursor-pointer hover:border-green-500\";\n\tshowInputClass += !tempFile && !photoLoading ? \" block\" : \" hidden\";\n\tshowInputClass +=\n\t\tprops.state.onDragOver && !props.state.invalidFields.blob\n\t\t\t? \" border-green-400\"\n\t\t\t: \" border-gray-400\";\n\tif (props.state.invalidFields.blob) showInputClass += \" border-red-400\";\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div id=\"fileInput\" className={showInputClass}>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tname=\"blob\"\n\t\t\t\t\tref={props.fileInput}\n\t\t\t\t\tonChange={props.onFileChange}\n\t\t\t\t\tonDrop={props.handleOnDrop}\n\t\t\t\t\tonDragOver={props.handleOnDragOver}\n\t\t\t\t\tonDragLeave={props.handleOnDragLeave}\n\t\t\t\t\tclassName=\"absolute m-0 p-0 w-full h-full outline-none pointer opacity-0 top-0 left-0\"\n\t\t\t\t/>\n\t\t\t\t<p className=\"text-xl text-black font-semibold\">\n\t\t\t\t\tDrag en drop een afbeelding\n\t\t\t\t</p>\n\t\t\t\t<p className=\"text-base\">\n\t\t\t\t\t{\" \"}\n\t\t\t\t\tof <a href=\"#\">selecteer</a> een bestand{\" \"}\n\t\t\t\t\t<span className=\"text-sm block text-gray-300\">\n\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t(Hoge resolutie aangeraden, maximaal 27MB)\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"text-red-500\">{props.state.invalidFields.blob}</div>\n\t\t\t{photoLoading && (\n\t\t\t\t<AiOutlineLoading3Quarters className=\"fill-current text-green-500\" />\n\t\t\t)}\n\t\t\t{tempFile && (\n\t\t\t\t<div\n\t\t\t\t\tid=\"imagePreview\"\n\t\t\t\t\tclassName=\"relative relative bg-gray-300 p-4 mb-2\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={props.removeImage}\n\t\t\t\t\t\tclassName=\"border border-gray-600 rounded p-4 m-4 absolute top-0 right-0 cursor-pointer bg-black opacity-50 hover:opacity-100\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<FiTrash2 className=\"stroke-current text-gray-100\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={tempFile}\n\t\t\t\t\t\tid=\"output_image\"\n\t\t\t\t\t\tclassName=\"max-w-full rounded mb-2\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"title\"\n\t\t\t\tplaceholder=\"Titel\"\n\t\t\t\tvalue={title || \"\"}\n\t\t\t\tonChange={props.onChange}\n\t\t\t/>\n\n\t\t\t<div className=\"text-red-500\">{props.state.invalidFields.title}</div>\n\t\t\t<input\n\t\t\t\ttype=\"date\"\n\t\t\t\tname=\"date\"\n\t\t\t\tplaceholder=\"Datum\"\n\t\t\t\tvalue={date || \"\"}\n\t\t\t\tonChange={props.onChange}\n\t\t\t/>\n\n\t\t\t<div className=\"flex\">\n\t\t\t\t<div className=\"flex flex-wrap items-stretch w-full relative mb-2 mr-2\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"shutterspeed\"\n\t\t\t\t\t\tplaceholder=\"Sluitertijd\"\n\t\t\t\t\t\tvalue={shutterspeed || \"\"}\n\t\t\t\t\t\tonChange={props.onChange}\n\t\t\t\t\t\tclassName=\"special mb-0 flex-shrink flex-grow flex-auto  w-px flex-1 border h-10 border-gray-400 rounded rounded-r-none py-2 px-3 relative text-sm\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"flex -mr-px\">\n\t\t\t\t\t\t<span className=\"mb-2 flex items-center  bg-grey-lighter rounded rounded-l-none border border-l-0 border-gray-400 py-2 px-3 whitespace-no-wrap text-grey-dark text-sm\">\n\t\t\t\t\t\t\ts\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex flex-wrap items-stretch w-full relative mb-2 mr-2\">\n\t\t\t\t\t<div className=\"flex -mr-px\">\n\t\t\t\t\t\t<span className=\"mb-2 flex items-center  bg-grey-lighter rounded rounded-r-none border border-r-0 border-gray-400 py-2 px-3 whitespace-no-wrap text-grey-dark text-sm\">\n\t\t\t\t\t\t\tiso\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tname=\"iso\"\n\t\t\t\t\t\tplaceholder=\"iso\"\n\t\t\t\t\t\tvalue={iso || \"\"}\n\t\t\t\t\t\tonChange={props.onChange}\n\t\t\t\t\t\tclassName=\"special mb-0 flex-shrink flex-grow flex-auto  w-px flex-1 border h-10 border-gray-400 rounded rounded-l-none py-2 px-3 relative text-sm\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex flex-wrap items-stretch w-full relative mb-2\">\n\t\t\t\t\t<div className=\"flex -mr-px\">\n\t\t\t\t\t\t<span className=\"mb-2 flex items-center  bg-grey-lighter rounded rounded-r-none border border-r-0 border-gray-400 py-2 px-3 whitespace-no-wrap text-grey-dark text-sm\">\n\t\t\t\t\t\t\tf/\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tname=\"aperture\"\n\t\t\t\t\t\tplaceholder=\"Diafragma\"\n\t\t\t\t\t\tonChange={props.onChange}\n\t\t\t\t\t\tvalue={aperture || \"\"}\n\t\t\t\t\t\tclassName=\"special mb-0 flex-shrink flex-grow flex-auto  w-px flex-1 border h-10 border-gray-400 rounded rounded-l-none py-2 px-3 relative text-sm\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"camera\"\n\t\t\t\tplaceholder=\"camera\"\n\t\t\t\tonChange={props.onChange}\n\t\t\t\tvalue={camera || \"\"}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"focalLength\"\n\t\t\t\tvalue={focalLength || \"\"}\n\t\t\t\tonChange={props.onChange}\n\t\t\t\tplaceholder=\"focalLength\"\n\t\t\t/>\n\t\t\t<textarea\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"desc\"\n\t\t\t\tonChange={props.onChange}\n\t\t\t\tplaceholder=\"Beschrijving\"\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\nexport default AddPhoto;\n","import React, { useState, useEffect } from \"react\";\nimport graphQLFetch from \"./graphQLFetch.js\";\nimport store from \"./store.js\";\nimport { Redirect } from \"react-router-dom\";\nimport useConstructor from \"./components/ConstructorHook.jsx\";\nimport SanitizedHTML from \"react-sanitized-html\";\n\nconst BlogPost = (props) => {\n  const [article, setArticleBySlug] = useState(null);\n\n  const getInitialArticle = async (props) => {\n    let _article = store.initialData ? store.initialData : null;\n    delete store.initialData;\n    if (!_article) {\n      _article = await BlogPost.fetchData(props.match);\n    }\n    setArticleBySlug(_article);\n  };\n\n  useConstructor(() => {\n    getInitialArticle(props);\n  });\n\n  useEffect(() => {\n    getInitialArticle(props);\n  }, [props.match]);\n\n  if (article === null) {\n    console.log(\"slug is nullllll\");\n    return <Redirect to=\"/niet-gevonden\" />;\n  }\n\n  return (\n    <div id=\"page\" className=\"px-6 py-24\">\n      {article && (\n        <div className=\"w-full\">\n          <h1 className=\"font-bold text-4xl leading-tight text-center\">\n            {article.articleBySlug.title}\n          </h1>\n          <div className=\"mb-4 md:mb-0 w-full max-w-screen-md mx-auto relative\">\n            <img className=\"\" src=\"\" alt={article.articleBySlug.title} />\n          </div>\n          <div className=\"px-4 lg:px-0 mt-12 text-gray-700 max-w-screen-md mx-auto text-lg leading-relaxed\">\n            <SanitizedHTML\n              allowedAttributes={{ a: [\"href\"], img: [\"src\"] }}\n              allowedTags={[\"a\", \"figure\", \"img\"]}\n              html={article.articleBySlug.body}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nBlogPost.fetchData = async (match, search, showError) => {\n  // build the graphql query\n  const query = `query articleBySlug($slug: String!){\n        articleBySlug(slug: $slug) {\n            id\n            title\n            body\n            slug\n        }\n    }`;\n\n  let {\n    params: { [0]: slug },\n  } = match;\n  slug = slug.replace(/\\//g, \"\");\n  const result = await graphQLFetch(query, { slug }, true);\n  console.log(result);\n  return result;\n};\n\nexport default BlogPost;\n","import React from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport routes from \"./routes\";\n\nexport default function Contents() {\n\treturn (\n\t\t<Switch>\n\t\t\t{routes.map((attrs) => (\n\t\t\t\t<Route {...attrs} key={attrs.path} />\n\t\t\t))}\n\t\t</Switch>\n\t);\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\n/* to support IE */\nimport URLSearchParams from \"url-search-params\";\nimport authService from \"./services/authService\";\n\nclass FBConnect extends Component {\n\tcomponentDidMount() {\n\t\tconst { location } = this.props;\n\n\t\t// try {\n\t\t//   console.log(action, action.search);\n\t\t//   const requestURL = `http://localhost:1337/auth/${action.provider}/callback${action.search}`;\n\t\t//   const response = yield call(request, requestURL, { method: \"GET\" });\n\n\t\t//   if (response.jwt) {\n\t\t// \t// Set the user's credentials\n\t\t// \tyield all([\n\t\t// \t  call(auth.setToken, response.jwt, true),\n\t\t// \t  call(auth.setUserInfo, response.user, true),\n\t\t// \t]);\n\t\t// \tyield call(forwardTo, \"/\");\n\t\t//   }\n\t\t// } catch (error) {\n\t\t//   yield call(forwardTo, \"/auth/login\");\n\t\t// }\n\n\t\t// const search = this.props.location.search; // could be '?foo=bar'\n\t\t// const params = new URLSearchParams(search);\n\t\t// const accessToken = params.get(\"access_token\"); // bar\n\t\t// console.log(accessToken);\n\n\t\t// console.log(\n\t\t// \t`http://localhost:1337/auth/facebook/callback${location.search}`\n\t\t// );\n\n\t\taxios\n\t\t\t.get(`http://localhost:1337/auth/facebook/callback${location.search}`)\n\t\t\t.then((response) => {\n\t\t\t\t// Handle success.\n\t\t\t\tconsole.log(response);\n\t\t\t\tconsole.log(\"Well done!\");\n\t\t\t\tconsole.log(\"User profile\", response.data.user);\n\t\t\t\tconsole.log(\"User token\", response.data.jwt);\n\t\t\t\tauthService.setToken(response.data.jwt);\n\t\t\t\twindow.location = \"/\";\n\t\t\t});\n\t}\n\trender() {\n\t\treturn <div>Redirecting you... (nog stylen in FBConnect)</div>;\n\t}\n}\n\nexport default FBConnect;\n","import React, { useState } from \"react\";\nimport Joi from \"@hapi/joi\";\nimport Input from \"./Input.jsx\";\nimport { FaSpinner } from \"react-icons/fa\";\nimport { NavLink } from \"react-router-dom\";\nimport graphQLFetch from \"./graphQLFetch.js\";\n\nconst ForgotPassword = () => {\n  const [data, setData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [loginError, setLoginError] = useState(false);\n\n  const handleChange = ({ currentTarget: input }) => {\n    const _errors = { ...errors };\n    const errorMessage = validateProperty(input);\n    if (errorMessage) _errors[input.name] = errorMessage;\n    else delete _errors[input.name];\n\n    const _data = { ...data };\n    _data[input.name] = input.value;\n    setData(_data);\n    setErrors(_errors);\n\n    // setInputs((inputs) => ({ ...inputs, [e.target.name]: e.target.value }));\n  };\n\n  const schema = {\n    email: Joi.string()\n      .email({ tlds: { allow: false } })\n      .required()\n      .messages({\n        \"string.empty\": `Vul je je email nog even in? .`,\n        \"any.required\": `Vul je je email nog even in? .`,\n        \"string.email\": `Vul je een geldig adres in? .`,\n      }),\n  };\n\n  const validateProperty = ({ name, value }) => {\n    console.log(name, value);\n    const object = { [name]: value };\n    console.log(schema);\n    const _schema = Joi.object({ [name]: schema[name] });\n    const result = _schema.validate(object);\n    console.log(result);\n    const error = result.error;\n    console.log(\"returning\", error);\n    return error ? error.details[0].message : null;\n  };\n\n  const validate = () => {\n    const options = { abortEarly: false, allowUnknown: true };\n    const _schema = Joi.object({ ...schema });\n    const { error } = _schema.validate(data, options);\n    console.log(error);\n    if (!error) return null;\n\n    const errors = {};\n    for (let item of error.details) {\n      errors[item.path[0]] = item.message;\n    }\n    return errors;\n  };\n\n  const doSubmit = async () => {\n    // call server\n    // redirect user to homepage\n    console.log(\"submitted\");\n\n    const query = `mutation ForgotPassword($email:String!){\n\t\tforgotPassword(email:$email) {\n\t\t  ok\n\t\t}\n\t  }`;\n\n    const vars = { email: data.email };\n\n    console.log(vars);\n\n    const result = await graphQLFetch(query, vars, true);\n\n    console.log(result);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const errors = validate();\n    setErrors(errors || {});\n    if (errors) return;\n\n    doSubmit();\n  };\n\n  const renderButton = (label, disable = false) => {\n    return (\n      <button\n        className={\n          \"w-full mb-2 mt-2 text-white flex items-center justify-center font-bold py-2 px-4 rounded\" +\n          (validate() || Object.keys(errors).length !== 0 || disable\n            ? \" bg-gray-500 hover:bg-gray-600\"\n            : \" bg-blue-500 hover:bg-blue-600\")\n        }\n        type=\"submit\"\n        disabled={validate() || Object.keys(errors).length !== 0 || disable}\n      >\n        {disable ? <FaSpinner className=\"animate-spin\" /> : label}\n      </button>\n    );\n  };\n  const renderInput = (\n    name,\n    label,\n    placeholder,\n    type = \"text\",\n    classes = \"w-full\",\n    onBlur = () => {}\n  ) => {\n    return (\n      <Input\n        classes={classes}\n        name={name}\n        label={label}\n        value={data[name] || \"\"}\n        onChange={handleChange}\n        placeholder={placeholder}\n        error={errors[name]}\n        type={type}\n        onBlur={onBlur}\n      />\n    );\n  };\n\n  return (\n    <div>\n      <div className=\"block sm:flex\">\n        <form\n          onSubmit={handleSubmit}\n          className=\"bg-white w-full  px-8 md:px-16 pt-6 md:py-12 flex flex-col bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col border\"\n        >\n          <h1 className=\"font-bold text-xl text-green-500 text-center\">\n            Wachtwoord resetten\n          </h1>\n\n          {loginError && <ErrorBox />}\n          {renderInput(\"email\", \"Email\", \"Emailadres\")}\n          <div className=\"flex items-center justify-between\">\n            <div>{renderButton(\"Wachtwoord resetten\")}</div>\n          </div>\n          <div className=\"flex items-center justify-center\">\n            <NavLink\n              className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-600 mr-4\"\n              to=\"/inloggen\"\n            >\n              Inloggen\n            </NavLink>{\" \"}\n            |\n            <NavLink\n              className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-600 ml-4\"\n              to=\"/aanmelden\"\n            >\n              Aanmelden\n            </NavLink>\n          </div>\n        </form>\n\n        <div className=\"w-full\">\n          <div\n            className=\"w-full h-full\"\n            style={{\n              backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3)), url(https://picsum.photos/1500/1500)`,\n              backgroundSize: `cover`,\n              backgroundPosition: `center center`,\n            }}\n          ></div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ForgotPassword;\n","import React, { Component } from \"react\";\nimport Joi from \"@hapi/joi\";\nimport Input from \"./Input.jsx\";\nimport { FaSpinner } from \"react-icons/fa\";\n\nclass Form extends Component {\n  state = {\n    data: {},\n    errors: {},\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    const errors = { ...this.state.errors };\n    const errorMessage = this.validateProperty(input);\n    if (errorMessage) errors[input.name] = errorMessage;\n    else delete errors[input.name];\n\n    const data = { ...this.state.data };\n    data[input.name] = input.value;\n    this.setState({ data, errors });\n  };\n\n  validate = () => {\n    const options = { abortEarly: false, allowUnknown: true };\n    const schema = Joi.object({ ...this.schema });\n    const { error } = schema.validate(this.state.data, options);\n    console.log(error);\n    if (!error) return null;\n\n    const errors = {};\n    for (let item of error.details) {\n      errors[item.path[0]] = item.message;\n    }\n    return errors;\n  };\n\n  validateProperty = ({ name, value }) => {\n    const object = { [name]: value };\n    const schema = Joi.object({ [name]: this.schema[name] });\n    const result = schema.validate(object);\n    console.log(result);\n    const error = result.error;\n    console.log(\"returning\", error);\n    return error ? error.details[0].message : null;\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    const errors = this.validate();\n    this.setState({ errors: errors || {} });\n    if (errors) return;\n\n    this.doSubmit();\n  };\n\n  renderButton(label, disable = false) {\n    return (\n      <button\n        className={\n          \"w-full mb-2 mt-2 text-white flex items-center justify-center font-bold py-2 px-4 rounded\" +\n          (this.validate() ||\n          Object.keys(this.state.errors).length !== 0 ||\n          disable\n            ? \" bg-gray-500 hover:bg-gray-600\"\n            : \" bg-blue-500 hover:bg-blue-600\")\n        }\n        type=\"submit\"\n        disabled={\n          this.validate() ||\n          Object.keys(this.state.errors).length !== 0 ||\n          disable\n        }\n      >\n        {disable ? <FaSpinner className=\"animate-spin\" /> : label}\n      </button>\n    );\n  }\n\n  renderInput(\n    name,\n    label,\n    placeholder,\n    type = \"text\",\n    classes = \"w-full\",\n    onBlur = () => {}\n  ) {\n    const { data, errors } = this.state;\n    return (\n      <Input\n        classes={classes}\n        name={name}\n        label={label}\n        value={data[name] || \"\"}\n        onChange={this.handleChange}\n        placeholder={placeholder}\n        error={errors[name]}\n        type={type}\n        onBlur={onBlur}\n      />\n    );\n  }\n}\n\nexport default Form;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { FaRegHeart, FaRegComment } from \"react-icons/fa\";\nimport { userContext } from \"./services/userContext.js\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport Footer from \"./components/Footer.jsx\";\n\nconst Home = (props) => {\n  return (\n    <userContext.Consumer>\n      {(value) => {\n        console.log(value);\n        return value.user ? <Redirect to=\"/dashboard\" /> : <HomeScreen />;\n      }}\n    </userContext.Consumer>\n  );\n};\n\nexport default Home;\n\nconst HomeScreen = () => {\n  return (\n    <>\n      <section className=\"py-12 sm:py-24 bg-gray-900\">\n        <div className=\"container mx-auto block sm:flex px-6 items-center\">\n          <div className=\"mr-16 w-full mb-4 sm:mb-8\">\n            <h1 className=\"text-white text-3xl md:text-4xl lg:text-5xl mb-4 sm:mb-8 leading-tight\">\n              De beste fotografie locaties vind je bij SpotShare.\n            </h1>\n            <Link\n              to=\"/inloggen\"\n              className=\"text-white rounded-full border-2 inline-block border-blue-500 transition duration-100 hover:border-blue-700 mr-4 px-4 py-3 sm:px-6 sm:py-4\"\n            >\n              Inloggen\n            </Link>\n            <Link\n              to=\"/aanmelden\"\n              className=\"text-white rounded-full bg-blue-500 hover:bg-blue-700 transition duration-100 px-4 py-3 sm:px-6 sm:py-4 inline-block\"\n            >\n              Aanmelden\n            </Link>\n          </div>\n          <div className=\"w-full\">\n            <div\n              className=\"rounded w-full h-64\"\n              style={{\n                backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3)), url(https://picsum.photos/1500/1500)`,\n                backgroundSize: `cover`,\n                backgroundPosition: `center center`,\n              }}\n            ></div>\n            <div className=\"rounded-full shadow-lg px-1 py-1 sm:px-2 sm:py-2  -mt-6 ml-1 sm:ml-2 lg:ml-6 bg-white text-black inline-block justify-center\">\n              <div className=\"flex justify-center items-center\">\n                <img\n                  className=\"rounded-full w-8 h-8  mr-2  bottom-0 right-0 shadow-lg\"\n                  src=\"https://www.spotshare.nl/site/assets/files/6420/3-11-2019_19-28-29.140x140-pim2-thumbdbfotografie140.png\"\n                />\n                <span className=\"text-black mr-2 text-xs\">\n                   Pier scheveningen door Dennis Borman\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n      <section className=\"py-12\">\n        <div className=\"flex flex-col sm:flex-row items-center \">\n          <div className=\"flex w-full justify-center items-center order-last sm:order-last sm:mr-6\">\n            <div className=\"flex flex-col w-full pr-4\">\n              <div className=\"flex mb-4 relative\">\n                <img\n                  className=\" rounded\"\n                  src=\"https://picsum.photos/200/301\"\n                  alt=\"\"\n                />\n                <img\n                  className=\"rounded-full w-8 h-8 -mb-1 -mr-1 absolute bottom-0 right-0 shadow-lg\"\n                  src=\"https://picsum.photos/100/100\"\n                  alt=\"\"\n                />\n              </div>\n              <img\n                className=\" w-full h-full rounded\"\n                src=\"https://picsum.photos/200/302\"\n                alt=\"\"\n              />\n            </div>\n            <div className=\"flex flex-col w-full pt-8 pr-4\">\n              <img\n                className=\"mb-4 rounded\"\n                src=\"https://picsum.photos/200/200\"\n                alt=\"\"\n              />\n              <img\n                className=\" w-full h-full rounded\"\n                src=\"https://picsum.photos/200/304\"\n                alt=\"\"\n              />\n            </div>\n            <div className=\"flex flex-col w-full pt-8\">\n              <img\n                className=\"mb-4 rounded\"\n                src=\"https://picsum.photos/200/305\"\n                alt=\"\"\n              />\n            </div>\n          </div>\n          <div className=\"px-6 lg:px-32 ml-auto mb-6 sm:mb-0 order-first sm:order-last\">\n            <h2 className=\"text-4xl leading-tight tracking-tight mb-2\">\n              Vind locaties in de buurt, of juist aan de andere kant van de\n              wereld.\n            </h2>\n            <p className=\"mb-4\">\n              Vind gemakkelijk fotografie locaties dichtbij, of verken locaties\n              die je op de planinng hebt staan.\n            </p>\n            <Link\n              to=\"/aanmelden\"\n              className=\"text-white rounded-full bg-blue-500 hover:bg-blue-700 transition duration-100 px-4 py-3 sm:px-6 sm:py-4 inline-block\"\n            >\n              Locaties zoeken\n            </Link>\n          </div>\n        </div>\n      </section>\n\n      <section id=\"instagram\" className=\"py-8 container px-6\">\n        <div className=\"block sm:flex items-center\">\n          <div className=\"px-6 lg:px-32 mb-6 sm:mb-0 w-full\">\n            <h2 className=\"text-4xl leading-tight tracking-tight mb-2\">\n              Fotografie locatie inspiratie op Instagram\n            </h2>\n            <p className=\"mb-4\">\n              Volg ons op instagram, en maak kans op een feature!\n            </p>\n            <a\n              target=\"_blank\"\n              rel=\"noopener\"\n              href=\"https://www.instagram.com/spotsharenl/\"\n              className=\"text-white rounded-full bg-blue-500 hover:bg-blue-700 transition duration-100 px-4 py-3 sm:px-6 sm:py-4 inline-block\"\n            >\n              Naar instagram\n            </a>\n          </div>\n          <div className=\"w-full relative\">\n            <div className=\"rounded bg-white border shadow-lg\">\n              <div className=\"flex items-center p-3\">\n                <img\n                  className=\"rounded-full w-10 h-10 mr-4 border shadow-md\"\n                  src=\"https://scontent-ams4-1.cdninstagram.com/v/t51.2885-19/s320x320/22580636_1511695878889802_2909037587882573824_n.jpg?_nc_ht=scontent-ams4-1.cdninstagram.com&_nc_ohc=xkYTOC_bopsAX8PoHPa&oh=16714162d6978c1da26d94d8842446bb&oe=5F939D50\"\n                  alt=\"Volg spotshare op instagram\"\n                />\n                <span className=\"inline-block font-bold text-black text-sm\">\n                  Spotshare\n                </span>\n              </div>\n              <img src=\"https://scontent-amt2-1.cdninstagram.com/v/t51.2885-15/e35/s1080x1080/119949137_3727750567270969_4366629272378408564_n.jpg?_nc_ht=scontent-amt2-1.cdninstagram.com&_nc_cat=101&_nc_ohc=XrBVY27DdGYAX-NHp9v&_nc_tp=15&oh=fc3a660b6b14ab25db21a661edfd3709&oe=5F9312B0\" />\n              <div className=\"items-center p-3\">\n                <p className=\"inline-block text-black text-sm\">\n                  Goedemorgen! Zonsopkomst bij Roelshoek prachtig vastgelegd\n                  door @fotogra.qui  Ook een feature op SpotShare? Voeg\n                  jouw fotolocatie toe op onze website! #spotsharenl\n                </p>\n                <div className=\"flex items-center mt-3\">\n                  <div className=\"flex items-center justify-center mr-2\">\n                    <FaRegHeart className=\"mr-1\" />\n                    150\n                  </div>\n                  <div className=\"flex items-center justify-center\">\n                    <FaRegComment className=\"mr-1\" />\n                    20\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"top-0 right-0 -mt-6 sm:-mr-12 absolute rounded bg-white px-4 text-center shadow-2xl py-6\">\n              <img\n                className=\"rounded-full w-20 h-20 sm:w-32 sm:h-32 border m-1 mb-3\"\n                src=\"https://scontent-ams4-1.cdninstagram.com/v/t51.2885-19/s320x320/22580636_1511695878889802_2909037587882573824_n.jpg?_nc_ht=scontent-ams4-1.cdninstagram.com&_nc_ohc=xkYTOC_bopsAX8PoHPa&oh=16714162d6978c1da26d94d8842446bb&oe=5F939D50\"\n                alt=\"Volg spotshare op instagram\"\n              />\n              <h3 className=\"text-black text-sm\">Spotshare</h3>\n              <span className=\"block text-gray-500 text-xs\">@spotsharenl</span>\n              <a\n                target=\"_blank\"\n                rel=\"noopener\"\n                href=\"https://www.instagram.com/spotsharenl/\"\n                className=\"mt-4 text-white rounded-full bg-blue-500 hover:bg-blue-700 text-xs transition duration-100 px-3 py-2 inline-block\"\n              >\n                Volgen\n              </a>\n            </div>\n          </div>\n        </div>\n      </section>\n      <div className=\"bg-gray-100\">\n        <div className=\"max-w-screen-xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between\">\n          <h2 className=\"text-3xl leading-9 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10\">\n            Klaar om je vetste locaties te delen?\n            <br />\n            <span className=\"text-blue-600\">Meld je vandaag nog aan.</span>\n          </h2>\n          <div className=\"mt-8 flex lg:flex-shrink-0 lg:mt-0\">\n            <div className=\"inline-flex rounded-md shadow\">\n              <a\n                href=\"#\"\n                className=\"inline-flex items-center justify-center px-5 py-3 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:shadow-outline transition duration-150 ease-in-out\"\n              >\n                Aanmelden\n              </a>\n            </div>\n            <div className=\"ml-3 inline-flex rounded-md shadow\">\n              <a\n                href=\"#\"\n                className=\"inline-flex items-center justify-center px-5 py-3 border border-transparent text-base leading-6 font-medium rounded-md text-blue-600 bg-white hover:text-blue-500 focus:outline-none focus:shadow-outline transition duration-150 ease-in-out\"\n              >\n                Inloggen\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n","import React from \"react\";\n\nconst Input = ({ classes, name, label, error, ...rest }) => {\n  const className = \"mb-2 \" + classes;\n  return (\n    <div className={className}>\n      <label\n        className=\"block text-grey-darker text-sm font-bold mb-2\"\n        htmlFor={name}\n      >\n        {label}\n      </label>\n      <input\n        className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700\"\n        id={name}\n        name={name}\n        {...rest}\n      />\n      {error && <div className=\"text-red-500\">{error}</div>}\n    </div>\n  );\n};\n\nexport default Input;\n","import React, { Component } from 'react';\nimport { FaCheck } from \"react-icons/fa\";\n\n\nclass LocationCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            active: false\n        };\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.activeLocation !== this.props.activeLocation) {\n            const active = this.props.location === this.props.activeLocation ? true : false;\n            this.setState({ active });\n        }\n    }\n\n    onClickHandler = () => {\n        this.props.onClick(this.props.location);\n    }\n\n    render() {\n        const { active } = this.state;\n        let className = \"locationCard relative shadow-xs border-4 overflow-hidden hover:border-green-500\";\n        className += active ? ' border-green-500' : '';\n        return (\n            <React.Fragment>\n                <div className=\"w-full inline-block md:w-1/2 lg:w-1/3 m-2 rounded relative\" onClick={this.onClickHandler}>\n                    {active && <div className=\"absolute top-0 right-0 transform z-10 p-1 translate-x-1/2 -translate-y-1/2 rounded-full bg-green-500 text-white\"><FaCheck /></div>}\n                    <div className={className}>\n                        <div className=\"relative overflow-hidden\">\n                            <img\n                                src={this.props.location.photos[0].photo[0].url}\n                                className=\"object-cover  w-full h-48  block\"\n                                alt=\"Foto\"\n                            />\n\n                            <div className=\"photoContent p-4 absolute bottom-0 left-0\">\n                                <div className=\"photoInfo\">\n                                    <h3 className=\"text-white\">{this.props.location.title}</h3>\n                                    {/* <p className=\"text-white\">{photo.category}</p> */}\n                                </div>\n                                <div className=\"clear\"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default LocationCard;","/* globals React */\n/* eslint \"react/jsx-no-undef\":\"off\" */\n\nimport React, { Component, Fragment } from \"react\";\nimport graphQLFetch from \"./graphQLFetch.js\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet-universal\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport store from \"./store.js\";\nimport { Redirect } from \"react-router-dom\";\nimport userIcon from \"./images/userMarker.svg\";\nimport locationIcon from \"./images/locationMarker.svg\";\nimport { NavLink } from \"react-router-dom\";\nimport { FaPlus } from \"react-icons/fa\";\nimport FavButton from \"./components/favButton.jsx\";\nimport { userContext } from \"./services/userContext.js\";\nimport { PhotoView } from \"./PhotoCarousel.jsx\";\n\nconst LocationDetailStrapi = () => {\n  return (\n    <userContext.Consumer>\n      {(value) => {\n        if (value.user) {\n          return <LocationDetailComponentRouter curUser={value.user} />;\n        } else {\n          return <LocationDetailComponentRouter curUser={null} />;\n        }\n      }}\n    </userContext.Consumer>\n  );\n};\nexport default LocationDetailStrapi;\n\nclass LocationDetailComponent extends React.Component {\n  static async fetchData(match, search, showError) {\n    // build the graphql query\n    const query = `query locationBySlug($slug: String!){\n      locationBySlug(slug: $slug) {\n          title\n          photos {\n              likes\n              id\n              location {\n                longitude\n                latitude\n                id\n                title\n                slug\n              }\n              title\n              slug\n              user {\n                \n                id\n                firstname\n                lastname\n              }\n              photo {\n                  id\n                  name\n                  url\n              }\n          }\n          desc\n          slug\n          id\n          longitude\n          latitude\n          directions\n          whattoshoot\n          location_categories {\n            label\n            value\n          }\n          months {\n            label\n            value\n          }\n          usersFavourites {\n            id\n          }\n      }\n  }`;\n\n    let {\n      params: { id: slug },\n    } = match;\n    console.log(match);\n    const result = await graphQLFetch(query, { slug }, true);\n    return result;\n  }\n\n  constructor(props) {\n    super(props);\n    const locationBySlug = store.initialData\n      ? store.initialData.locationBySlug\n      : null;\n    delete store.initialData;\n    this.state = {\n      isServer: true,\n      userLikedLocation: false,\n      locationBySlug,\n      redirect: false,\n      zoom: 13,\n      userLocationKnown: false,\n      userMarker: null,\n      userLocation: {\n        longitude: null,\n        latitude: null,\n      },\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      match: {\n        params: { id: prevId },\n      },\n    } = prevProps;\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props;\n\n    if (prevId !== id) {\n      this.loadData();\n    }\n\n    const { curUser: prevCurUser } = prevProps;\n    const { curUser } = this.props;\n    const { locationBySlug, isServer } = this.state;\n\n    if (!isServer && curUser != null && prevCurUser !== curUser) {\n      // there is a logged in user\n      console.log(curUser);\n      console.log(this.state);\n      console.log(locationBySlug);\n\n      if (\n        locationBySlug.usersFavourites.filter(\n          (favourites) => favourites.id === curUser.id\n        ).length > 0\n      ) {\n        // check if user alreay liked the location\n        this.setState({ userLikedLocation: true });\n      }\n    }\n  }\n\n  componentDidMount() {\n    const { locationBySlug } = this.state;\n    if (locationBySlug === null) {\n      this.loadData();\n    }\n\n    // loading leaflet in componentDidMount because it doenst support SSR\n    const L = require(\"leaflet\");\n\n    const userMarker = new L.Icon({\n      iconUrl: userIcon,\n      iconRetinaUrl: userIcon,\n\n      iconAnchor: [16, 40],\n      popupAnchor: [0, -40],\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n      shadowAnchor: [13, 40],\n      iconSize: new L.Point(32, 40),\n    });\n\n    delete L.Icon.Default.prototype._getIconUrl;\n\n    L.Icon.Default.mergeOptions({\n      iconUrl: locationIcon,\n      iconRetinaUrl: locationIcon,\n      iconAnchor: [16, 40],\n      popupAnchor: [0, -40],\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n      shadowAnchor: [13, 40],\n      iconSize: new L.Point(32, 40),\n    });\n\n    // get users position\n    var options = {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 0,\n    };\n\n    const success = (pos) => {\n      var crd = pos.coords;\n\n      console.log(\"Your current position is:\");\n      console.log(`Latitude : ${crd.latitude}`);\n      console.log(`Longitude: ${crd.longitude}`);\n      console.log(`More or less ${crd.accuracy} meters.`);\n\n      this.setState((prevState) => ({\n        ...prevState,\n        userMarker,\n        userLocationKnown: true,\n        userLocation: { longitude: crd.longitude, latitude: crd.latitude },\n      }));\n    };\n\n    const error = (err) => {\n      console.warn(`ERROR(${err.code}): ${err.message}`);\n\n      fetch(\"https://ipapi.co/json\")\n        .then((res) => res.json())\n        .then((location) => {\n          this.setState((prevState) => ({\n            ...prevState,\n            userMarker,\n            userLocationKnown: true,\n            userLocation: {\n              longitude: location.longitude,\n              latitude: location.latitude,\n            },\n          }));\n        });\n    };\n\n    navigator.geolocation.getCurrentPosition(success, error, options);\n  }\n\n  async loadData() {\n    // get the search query string form url\n    const { match } = this.props;\n    // provide the query with the variables\n    const data = await LocationDetailComponent.fetchData(match);\n    console.log(data);\n    if (data.locationBySlug != null) {\n      this.setState({ locationBySlug: data.locationBySlug, isServer: false });\n    } else {\n      console.log(\"return not found\");\n      this.setState({ redirect: true });\n      console.log(this.state);\n    }\n  }\n\n  updateFav = async (user, likedId, action) => {\n    const query = `\n      mutation updateUser($input:updateUserInput) {\n        updateUser(input: $input) {\n          user {\n            favouriteLocations {\n              id\n            }\n          }\n        }\n      }`;\n\n    let favArray = user.favouriteLocations.map((fav) => fav.id);\n\n    if (action === \"add\") {\n      if (!favArray.includes(likedId)) {\n        favArray.push(likedId);\n      } else {\n        // already in favourites\n        return;\n      }\n    } else if (action === \"remove\") {\n      if (favArray.includes(likedId)) {\n        // likedId is in array, so remove it from array\n        const index = favArray.indexOf(likedId);\n        if (index > -1) {\n          favArray.splice(index, 1);\n        }\n        console.log(favArray);\n      } else {\n        // not in favourites\n        return;\n      }\n    }\n\n    const variables = {\n      input: {\n        where: {\n          id: user.id,\n        },\n        data: {\n          favouriteLocations: favArray,\n        },\n      },\n    };\n\n    const data = await graphQLFetch(query, variables, true);\n\n    let status = this.state.userLikedLocation;\n    this.setState({ userLikedLocation: !status });\n  };\n\n  render() {\n    const { locationBySlug, redirect, isServer } = this.state;\n    if (redirect) {\n      console.log(\"redirect\", redirect);\n      return <Redirect to=\"/niet-gevonden\" />;\n    }\n    if (locationBySlug === null) return null;\n\n    const { userLocation, userLocationKnown, userMarker } = this.state;\n    const { photos } = locationBySlug;\n\n    const position = [locationBySlug.latitude, locationBySlug.longitude];\n    const calculatedUserLocation = userLocation.latitude\n      ? [userLocation.latitude, userLocation.longitude]\n      : null;\n\n    return (\n      <div id=\"page\">\n        <div id=\"photoInfo\">\n          <div\n            className=\"w-full flex flex-col justify-center items-center relative\"\n            style={{\n              backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3)), url(${\n                photos.sort((a, b) => b.likes - a.likes)[0].photo[0].url\n              })`,\n              backgroundSize: `cover`,\n              backgroundPosition: `center center`,\n              height: \"80vh\",\n            }}\n          >\n            <h1 className=\"text-3xl font-bold mb-1 text-white block\">\n              {locationBySlug.title}\n            </h1>\n            <span className=\"flex items-center\">\n              <span className=\"text-gray-500 mr-2 text-sm\">Categorieen:</span>\n              {locationBySlug.location_categories.map((location) => (\n                <Link\n                  to={`/fotolocaties/categorie/${location.value}`}\n                  className=\"bg-green-500 py-1 px-3 text-sm rounded-full mr-2 text-white hover:bg-green-600\"\n                >\n                  {location.label}\n                </Link>\n              ))}\n            </span>\n            {!isServer && (\n              <div className=\"absolute right-0 bottom-0 m-10\">\n                <userContext.Consumer>\n                  {(value) => {\n                    console.log(value);\n                    if (value.user) {\n                      let favourite;\n                      if (\n                        value.user &&\n                        locationBySlug.usersFavourites.filter(\n                          (favourites) => favourites.id === value.user.id\n                        ).length > 0\n                      ) {\n                        favourite = true;\n                      } else {\n                        favourite = false;\n                      }\n                      return (\n                        <FavButton\n                          favourite={favourite}\n                          updateFav={this.updateFav}\n                          user={value.user}\n                          likedId={locationBySlug.id}\n                          addTitle=\"Deze locatie opslaan\"\n                          removeTitle=\"Verwijderen uit opgeslagen locaties\"\n                        />\n                      );\n                    }\n                  }}\n                </userContext.Consumer>\n\n                <Link\n                  className=\"revealTooltip flex pointer justify-end items-center\"\n                  to={`/foto/toevoegen/${locationBySlug.id}`}\n                >\n                  <div className=\"hidden inline-block bg-white rounded py-1 px-3 h-8\">\n                    Foto aan deze locatie toevoegen\n                  </div>\n                  <div className=\"inline-block bg-white rounded py-2 px-3 h-8\">\n                    <FaPlus />\n                  </div>\n                </Link>\n              </div>\n            )}\n            {/* \n            <p className=\"\">Bezoekers:</p>\n            {locationBySlug.photos.map((photo) => {\n              return <img src={photo.user.picture} />;\n            })} */}\n          </div>\n\n          <div className=\"p-6 \">\n            <section className=\"container\">\n              <div className=\"sm:py-10\">\n                <div className=\"block sm:flex\">\n                  <div className=\"pb-4 mr-4 w-full\">\n                    <h2 className=\"h1\">\n                      Over fotolocatie {locationBySlug.title}\n                    </h2>\n                    <p className=\"\">{locationBySlug.desc}</p>\n                  </div>\n                  <div className=\"pb-4 w-full\">\n                    <h3>Hoe kom ik bij {locationBySlug.title}</h3>\n                    <p className=\"\">{locationBySlug.directions}</p>\n                  </div>\n                </div>\n                <div className=\"block sm:flex\">\n                  <div className=\"pb-4 mr-4 w-full\">\n                    <h3>Wat kan ik fotograferen?</h3>\n                    <p className=\"\">{locationBySlug.whattoshoot}</p>\n                  </div>\n                  <div className=\"pb-4 w-full\">\n                    <h3>Beste tijd om te fotograferen?</h3>\n                    {locationBySlug.months.map((month) => (\n                      <p className=\"mr-1 inline-block\">{month.label}</p>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"w-full\">\n                <Map\n                  className=\"map\"\n                  id=\"photoLocation\"\n                  center={position}\n                  zoom={this.state.zoom}\n                >\n                  <TileLayer\n                    attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                  />\n                  <Marker position={position}>\n                    <Popup>Foto locatie</Popup>\n                  </Marker>\n                  {userLocationKnown && (\n                    <Marker position={calculatedUserLocation} icon={userMarker}>\n                      <Popup>Jouw locatie</Popup>\n                    </Marker>\n                  )}\n                </Map>\n              </div>\n\n              <div className=\"w-full mt-4\">\n                <h2 className=\"text-xl font-bold mb-1 text-gray-800 block\">\n                  Foto's gemaakt op fotolocatie {locationBySlug.title}\n                </h2>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n                  {photos.map((photoItem, index) => {\n                    return (\n                      <PhotoView\n                        key={photoItem.id}\n                        index={index}\n                        photo={photoItem}\n                        deletePhoto={null}\n                      />\n                    );\n                  })}\n                </div>\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction LocationPhotoItem(props) {\n  const itemPhoto = props.item.photo[0];\n  const selectedLocation = `/foto/${props.item.slug}`;\n  return (\n    <React.Fragment>\n      <div className=\"w-full inline-block md:w-1/2 lg:w-1/3 p-2\">\n        <div className=\"photoCard rounded relative shadow-xs\">\n          <div className=\"relative rounded overflow-hidden\">\n            <NavLink\n              to={selectedLocation}\n              className=\"absolute w-full h-full z-10\"\n              title=\"Bekijk foto nu\"\n            ></NavLink>\n            <img\n              src={itemPhoto.url.replace(\"-original\", \"-thumbnail\")}\n              className=\"object-cover  w-full h-48  block\"\n              alt=\"Foto\"\n            />\n\n            <div className=\"photoContent p-4 absolute bottom-0 left-0\">\n              <div className=\"photoInfo\">\n                <h3 className=\"text-white\">{props.item.title}</h3>\n              </div>\n              <div className=\"clear\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n\nconst LocationDetailComponentRouter = withRouter(LocationDetailComponent);\n","import React, { useState } from \"react\";\nimport Joi from \"@hapi/joi\";\nimport Form from \"./Form.jsx\";\nimport { NavLink } from \"react-router-dom\";\nimport auth from \"./services/authService\";\nimport Input from \"./Input.jsx\";\nimport { FaSpinner } from \"react-icons/fa\";\n\nconst Login = () => {\n  const [data, setData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [loginError, setLoginError] = useState(false);\n\n  const schema = {\n    email: Joi.string()\n      .email({ tlds: { allow: false } })\n      .required()\n      .messages({\n        \"string.empty\": `Vul je je email nog even in? .`,\n        \"any.required\": `Vul je je email nog even in? .`,\n        \"string.email\": `Vul je een geldig adres in? .`,\n      }),\n    password: Joi.string().required().messages({\n      \"string.empty\": `Vul je je wachtwoord nog even in? .`,\n      \"any.required\": `Vul je je wachtwoord nog even in? .`,\n    }),\n  };\n\n  const loginUser = async () => {\n    let input = { ...data };\n\n    Object.defineProperty(\n      input,\n      \"identifier\",\n      Object.getOwnPropertyDescriptor(input, \"email\")\n    );\n    delete input[\"email\"];\n\n    const loggedIn = await auth.login(input);\n\n    if (loggedIn === true) {\n      window.location = \"/\";\n    } else {\n      setLoginError(true);\n    }\n  };\n\n  const doSubmit = () => {\n    // call server\n    // redirect user to homepage\n    console.log(\"submitted\");\n    loginUser();\n  };\n\n  const validateProperty = ({ name, value }) => {\n    console.log(name, value);\n    const object = { [name]: value };\n    console.log(schema);\n    const _schema = Joi.object({ [name]: schema[name] });\n    const result = _schema.validate(object);\n    console.log(result);\n    const error = result.error;\n    console.log(\"returning\", error);\n    return error ? error.details[0].message : null;\n  };\n\n  const validate = () => {\n    const options = { abortEarly: false, allowUnknown: true };\n    const _schema = Joi.object({ ...schema });\n    const { error } = _schema.validate(data, options);\n    console.log(error);\n    if (!error) return null;\n\n    const errors = {};\n    for (let item of error.details) {\n      errors[item.path[0]] = item.message;\n    }\n    return errors;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const errors = validate();\n    setErrors(errors || {});\n    if (errors) return;\n\n    doSubmit();\n  };\n\n  const renderButton = (label, disable = false) => {\n    return (\n      <button\n        className={\n          \"w-full mb-2 mt-2 text-white flex items-center justify-center font-bold py-2 px-4 rounded\" +\n          (validate() || Object.keys(errors).length !== 0 || disable\n            ? \" bg-gray-500 hover:bg-gray-600\"\n            : \" bg-blue-500 hover:bg-blue-600\")\n        }\n        type=\"submit\"\n        disabled={validate() || Object.keys(errors).length !== 0 || disable}\n      >\n        {disable ? <FaSpinner className=\"animate-spin\" /> : label}\n      </button>\n    );\n  };\n\n  const handleChange = ({ currentTarget: input }) => {\n    const _errors = { ...errors };\n    const errorMessage = validateProperty(input);\n    if (errorMessage) _errors[input.name] = errorMessage;\n    else delete _errors[input.name];\n\n    const _data = { ...data };\n    _data[input.name] = input.value;\n    setData(_data);\n    setErrors(_errors);\n\n    // setInputs((inputs) => ({ ...inputs, [e.target.name]: e.target.value }));\n  };\n\n  const renderInput = (\n    name,\n    label,\n    placeholder,\n    type = \"text\",\n    classes = \"w-full\",\n    onBlur = () => {}\n  ) => {\n    return (\n      <Input\n        classes={classes}\n        name={name}\n        label={label}\n        value={data[name] || \"\"}\n        onChange={handleChange}\n        placeholder={placeholder}\n        error={errors[name]}\n        type={type}\n        onBlur={onBlur}\n      />\n    );\n  };\n\n  return (\n    <div>\n      <div className=\"block sm:flex\">\n        <form\n          onSubmit={handleSubmit}\n          className=\"bg-white w-full  px-8 md:px-16 pt-6 md:py-12 flex flex-col bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col border\"\n        >\n          <h1 className=\"font-bold text-xl text-green-500 text-center\">\n            Inloggen bij Spotshare\n          </h1>\n\n          {loginError && <ErrorBox />}\n          {renderInput(\"email\", \"Email\", \"Emailadres\")}\n          {renderInput(\n            \"password\",\n            \"Wachtwoord\",\n            \"Vul je wachtwoord in\",\n            \"password\"\n          )}\n          <div className=\"flex items-center justify-between\">\n            <div>{renderButton(\"Log in\")}</div>\n          </div>\n          <div className=\"flex items-center justify-center\">\n            <NavLink\n              className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-600 mr-4\"\n              to=\"/wachtwoord-vergeten\"\n            >\n              Wachtwoord vergeten?\n            </NavLink>{\" \"}\n            |\n            <NavLink\n              className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-600 ml-4\"\n              to=\"/aanmelden\"\n            >\n              Aanmelden\n            </NavLink>\n          </div>\n        </form>\n\n        <div className=\"w-full\">\n          <div\n            className=\"w-full h-full\"\n            style={{\n              backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3)), url(https://picsum.photos/1500/1500)`,\n              backgroundSize: `cover`,\n              backgroundPosition: `center center`,\n            }}\n          ></div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n\nconst ErrorBox = () => {\n  return (\n    <div className=\"p-4 rounded border border-red-500 bg-red-200 text-red-500 font-bold my-4\">\n      Gebruikersnaam of wachtwoord is onbekend.{\" \"}\n      <NavLink\n        className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-600 ml-4\"\n        to=\"/wachtwoord-vergeten\"\n      >\n        Wachtwoord vergeten?\n      </NavLink>\n    </div>\n  );\n};\n","import React, { Component } from \"react\";\nimport auth from \"./services/authService\";\n\nclass Logout extends Component {\n\tcomponentDidMount() {\n\t\tauth.logout();\n\t\twindow.location = \"/\";\n\t}\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default Logout;\n","import React from 'react';\n\nexport default ({ staticContext = {} }) => {\n    staticContext.status = 404;\n    return <h1>Sorry, pagina niet gevonden</h1>;\n};","import React, { Component, useState, useEffect } from \"react\";\nimport Contents from \"./Contents.jsx\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { FiMenu, FiX } from \"react-icons/fi\";\nimport { ToastContainer } from \"react-toastify\";\nimport { userContext } from \"./services/userContext.js\";\nimport Footer from \"./components/Footer.jsx\";\nimport Notifications from \"./components/notificationCenter/notifications.jsx\";\nimport { IoNotificationsOutline } from \"react-icons/io5\";\n\nconst NavBar = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [openNotifications, setOpenNotifications] = useState(false);\n  const history = useHistory();\n\n  const closeMenu = () => {\n    setIsOpen(false);\n    setOpenNotifications(false);\n  };\n\n  const notIconClick = (e) => {\n    e.preventDefault();\n    setOpenNotifications(!openNotifications);\n  };\n\n  const toggleOpen = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const onNotClick = (link) => {\n    setOpenNotifications(false);\n    history.push(link);\n  };\n\n  return (\n    <header className=\"bg-gray-900 sm:flex sm:justify-between sm:px-6 sm:py-3 sm:items-center\">\n      <div className=\"flex items-center justify-between px-4 py-3 sm:p-0 bg-gray-900\">\n        <div>\n          <NavLink onClick={closeMenu} exact to=\"/\">\n            <img\n              src=\"http://dkotwt30gflnm.cloudfront.net/assets/spotshare-logo.png\"\n              className=\"h-8\"\n              alt=\"Spotshare, de mooiste fotolocaties bij jou in de buurt\"\n            />\n          </NavLink>\n        </div>\n        <div className=\"sm:hidden\">\n          <button\n            onClick={toggleOpen}\n            type=\"button\"\n            className=\"text-gray-400 hover:text-white focus:text-white focus:outline-none\"\n          >\n            {isOpen ? (\n              <FiX className=\"fill-current text-white\" />\n            ) : (\n              <FiMenu className=\"fill-current text-white\" />\n            )}\n          </button>\n        </div>\n      </div>\n      <nav\n        className={`px-2 pt-2 pb-4 sm:p-0 items-center sm:flex ${\n          isOpen ? \" block\" : \" hidden\"\n        }`}\n      >\n        <NavLink\n          onClick={closeMenu}\n          to=\"/fotolocatie/volendam\"\n          className=\"block text-white font-semibold rounded hover:bg-gray-800 px-2 py-1\"\n        >\n          TestLocatie\n        </NavLink>\n        <NavLink\n          onClick={closeMenu}\n          to=\"/foto/haven-volendam\"\n          className=\"block text-white font-semibold rounded hover:bg-gray-800 px-2 py-1\"\n        >\n          TestFoto\n        </NavLink>\n        <NavLink\n          onClick={closeMenu}\n          to=\"/foto/toevoegen\"\n          className=\"block text-white font-semibold rounded hover:bg-gray-800 px-2 py-1\"\n        >\n          Uploaden\n        </NavLink>\n\n        <userContext.Consumer>\n          {(value) =>\n            !value.user ? (\n              <React.Fragment>\n                <NavLink\n                  onClick={closeMenu}\n                  to=\"/aanmelden\"\n                  className=\"block mt-1 text-white font-semibold rounded hover:bg-gray-800 px-2 py-1 sm:mt-0 sm:ml-2\"\n                >\n                  Aanmelden\n                </NavLink>\n                <NavLink\n                  onClick={closeMenu}\n                  to=\"/inloggen\"\n                  className=\"block mt-1 text-white font-semibold rounded hover:bg-gray-800 px-2 py-1 sm:mt-0 sm:ml-2\"\n                >\n                  Inloggen\n                </NavLink>\n              </React.Fragment>\n            ) : (\n              <React.Fragment>\n                <div className=\"relative\">\n                  <a\n                    onClick={notIconClick}\n                    className=\"relative block mt-1 text-white font-semibold rounded hover:bg-gray-800 px-2 py-1 sm:mt-0 sm:ml-2\"\n                  >\n                    <IoNotificationsOutline className=\"text-2xl\" />\n                  </a>\n                  <Notifications\n                    onClick={onNotClick}\n                    user={value.user}\n                    show={openNotifications}\n                  />\n                </div>\n                <NavLink\n                  onClick={closeMenu}\n                  to={`/fotograaf/${value.user.slug}`}\n                  className=\"block mt-1 text-white font-semibold rounded hover:bg-gray-800 px-2 py-1 sm:mt-0 sm:ml-2\"\n                >\n                  {value.user.username}\n                </NavLink>\n                <NavLink\n                  onClick={closeMenu}\n                  to=\"/uitloggen\"\n                  className=\"block mt-1 text-white font-semibold rounded hover:bg-gray-800 px-2 py-1 sm:mt-0 sm:ml-2\"\n                >\n                  Uitloggen\n                </NavLink>\n              </React.Fragment>\n            )\n          }\n        </userContext.Consumer>\n      </nav>\n    </header>\n  );\n};\n\nexport default function Page() {\n  return (\n    <div>\n      <NavBar />\n      <Contents />\n      <Footer />\n      <ToastContainer />\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport Joi from \"@hapi/joi\";\nimport Input from \"./Input.jsx\";\nimport { FaSpinner } from \"react-icons/fa\";\nimport graphQLFetch from \"./graphQLFetch.js\";\nimport { useLocation, Link } from \"react-router-dom\";\nimport URLSearchParams from \"url-search-params\";\nimport auth from \"./services/authService\";\nimport { toast } from \"react-toastify\";\n\nconst PasswordReset = () => {\n  const [data, setData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [loginError, setLoginError] = useState(false);\n  const [code, setCode] = useState();\n  const [success, setSuccess] = useState(false);\n  const location = useLocation();\n\n  useEffect(() => {\n    const { search } = location;\n    const params = new URLSearchParams(search);\n    const _code = params.get(\"code\");\n    setCode(_code);\n  }, [location]);\n\n  const handleChange = ({ currentTarget: input }) => {\n    const _errors = { ...errors };\n    const errorMessage = validateProperty(input);\n    if (errorMessage) _errors[input.name] = errorMessage;\n    else delete _errors[input.name];\n\n    const _data = { ...data };\n    _data[input.name] = input.value;\n    setData(_data);\n    setErrors(_errors);\n\n    // setInputs((inputs) => ({ ...inputs, [e.target.name]: e.target.value }));\n  };\n\n  const schema = {\n    password: Joi.string().required().messages({\n      \"string.empty\": `Vul je je wachtwoord nog even in? .`,\n      \"any.required\": `Vul je je wachtwoord nog even in? .`,\n    }),\n    passwordConfirmation: Joi.string()\n      .required()\n      .equal(Joi.ref(\"password\"))\n      .messages({\n        \"string.empty\": `Vul je je wachtwoord nog even in? .`,\n        \"any.required\": `Vul je je wachtwoord nog even in? .`,\n        \"any.only\": `Moet gelijk zijn .`,\n      }),\n  };\n\n  const validateProperty = ({ name, value }) => {\n    const object = { [name]: value };\n    //const _schema = Joi.object({ [name]: schema[name] });\n\n    const _schemaObject = { [name]: schema[name] };\n\n    if (name.endsWith(\"Confirmation\")) {\n      const dependentInput = name.substring(0, name.indexOf(\"Confirmation\"));\n      object[dependentInput] = data[dependentInput];\n      _schemaObject[dependentInput] = schema[dependentInput];\n    }\n\n    const _schema = Joi.object(_schemaObject);\n    const result = _schema.validate(object);\n    const error = result.error;\n\n    console.log(\"returning\", error);\n    return error ? error.details[0].message : null;\n  };\n\n  const validate = () => {\n    const options = { abortEarly: false, allowUnknown: true };\n    const _schema = Joi.object({ ...schema });\n    const { error } = _schema.validate(data, options);\n    console.log(error);\n    if (!error) return null;\n\n    const errors = {};\n    for (let item of error.details) {\n      errors[item.path[0]] = item.message;\n    }\n    return errors;\n  };\n\n  const doSubmit = async () => {\n    // call server\n    // redirect user to homepage\n    console.log(\"submitted\");\n\n    const query = `mutation resetPassword($password: String!, $passwordConfirmation: String!, $code: String!){\n        resetPassword(password:$password, passwordConfirmation:$passwordConfirmation, code:$code) {\n          jwt\n        }\n      }`;\n\n    const vars = {\n      password: data.password,\n      passwordConfirmation: data.passwordConfirmation,\n      code: code,\n    };\n\n    console.log(vars);\n\n    const result = await graphQLFetch(query, vars, true, true);\n\n    console.log(result);\n\n    if (result.resetPassword !== null) {\n      auth.setToken(result.resetPassword.jwt);\n      setSuccess(true);\n    } else {\n      // error message\n      console.log(\"ERROR!\");\n      toast.error(\"Je code is verlopen, probeer het opnieuw.\");\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const errors = validate();\n    setErrors(errors || {});\n    if (errors) return;\n\n    doSubmit();\n  };\n\n  const renderButton = (label, disable = false) => {\n    return (\n      <button\n        className={\n          \"w-full mb-2 mt-2 text-white flex items-center justify-center font-bold py-2 px-4 rounded\" +\n          (validate() || Object.keys(errors).length !== 0 || disable\n            ? \" bg-gray-500 hover:bg-gray-600\"\n            : \" bg-blue-500 hover:bg-blue-600\")\n        }\n        type=\"submit\"\n        disabled={validate() || Object.keys(errors).length !== 0 || disable}\n      >\n        {disable ? <FaSpinner className=\"animate-spin\" /> : label}\n      </button>\n    );\n  };\n  const renderInput = (\n    name,\n    label,\n    placeholder,\n    type = \"text\",\n    classes = \"w-full\",\n    onBlur = () => {}\n  ) => {\n    return (\n      <Input\n        classes={classes}\n        name={name}\n        label={label}\n        value={data[name] || \"\"}\n        onChange={handleChange}\n        placeholder={placeholder}\n        error={errors[name]}\n        type={type}\n        onBlur={onBlur}\n      />\n    );\n  };\n\n  return (\n    <div>\n      <div className=\"block sm:flex\">\n        {success ? (\n          <div className=\"bg-white w-full   px-8 md:px-16 pt-6 md:py-12\">\n            <h1 className=\"font-bold text-xl text-green-500 text-center\">\n              Wachtwoord gewijzigd!\n            </h1>\n            <div className=\"p-6 rounded bg-green-100 border border-green-200 mt-4\">\n              <p className=\"text-green-500\">\n                Wachtwoord succesvol gewijzigd.{\" \"}\n                <a className=\"font-bold\" href=\"/\">\n                  Klik hier\n                </a>{\" \"}\n                om naar je dashboard te gaan!\n              </p>\n            </div>\n          </div>\n        ) : (\n          <form\n            onSubmit={handleSubmit}\n            className=\"bg-white w-full  px-8 md:px-16 pt-6 md:py-12 flex flex-col bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col border\"\n          >\n            <h1 className=\"font-bold text-xl text-green-500 text-center\">\n              Wachtwoord resetten\n            </h1>\n\n            {loginError && <ErrorBox />}\n            {renderInput(\n              \"password\",\n              \"Wachtwoord\",\n              \"Vul je wachtwoord in\",\n              \"password\"\n            )}\n            {renderInput(\n              \"passwordConfirmation\",\n              \"Wachtwoord nogmaals\",\n              \"Herhaal je wachtwoord\",\n              \"password\"\n            )}\n            <div className=\"flex items-center justify-between\">\n              <div>{renderButton(\"Wachtwoord resetten\")}</div>\n            </div>\n          </form>\n        )}\n\n        <div className=\"w-full\">\n          <div\n            className=\"w-full h-full\"\n            style={{\n              backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3)), url(https://picsum.photos/1500/1500)`,\n              backgroundSize: `cover`,\n              backgroundPosition: `center center`,\n            }}\n          ></div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PasswordReset;\n","/* globals React */\nimport React, { Component } from \"react\";\nimport graphQLFetch from \"./graphQLFetch.js\";\nimport EXIF from \"exif-js\";\nimport { FaSpinner } from \"react-icons/fa\";\nimport exifr from \"exifr\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet-universal\";\nimport userIcon from \"./images/userMarker.svg\";\nimport locationIcon from \"./images/locationMarker.svg\";\nimport LocationCard from \"./LocationCard.jsx\";\nimport CreatableSelect from \"react-select/creatable\";\nimport Select from \"react-select\";\nimport makeAnimated from \"react-select/animated\";\nimport slugify from \"slugify\";\nimport AddPhoto from \"./AddPhoto.jsx\";\nimport { userContext } from \"./services/userContext.js\";\nimport { findNearbyLocations } from \"./components/FindNearbyLocations.jsx\";\n\nconst animatedComponents = makeAnimated();\n\nexport default class PhotoAddStrapi extends React.Component {\n  redirect = (slug) => {\n    //if the query returns an id in data, the photo is created\n    // redirect to created photo\n\n    const { history } = this.props;\n    history.push({\n      pathname: `/foto/${slug}`,\n    });\n  };\n\n  // we are rendering the actual component to have access to the Context\n  // outside of the renderfunction in the next component\n  // We have to pass functions to make use of the router functionality\n\n  render() {\n    return (\n      <userContext.Consumer>\n        {(value) =>\n          value.user ? (\n            <AddPhotoForm\n              value={value}\n              redirect={this.redirect}\n              fetchLocation={this.fetchLocation}\n            />\n          ) : (\n            <div>Niet ingelogd</div>\n          )\n        }\n      </userContext.Consumer>\n    );\n  }\n}\n\nclass AddPhotoForm extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      currentStep: 1,\n      photo: {},\n      photoLoading: false,\n      tempFile: null,\n      onDrop: false,\n      onDragOver: false,\n      uploadPercentage: 0,\n      invalidFields: {},\n      blob: null,\n      map: {\n        longitude: null,\n        latitude: null,\n        zoom: 13,\n      },\n      locationKnown: false,\n      selectedLocation: null,\n      locationCategoryValues: [],\n      monthValues: [],\n      months: null,\n      location_categories: null,\n      newLocation: false,\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onFileChange = this.onFileChange.bind(this);\n    this.fileInput = React.createRef();\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log(\"component updated\", prevProps, this.props);\n    const {\n      value: { user: prevUser },\n    } = prevProps;\n    const {\n      value: { user },\n    } = this.props;\n    if (prevUser !== user) {\n      this.updateContext();\n    }\n  }\n\n  updateContext() {\n    this.setState((prevState) => ({\n      ...prevState,\n      photo: { ...prevState.photo, user: this.props.value.user.id },\n    }));\n  }\n\n  onNewLocationClick = (e) => {\n    this.setNewLocation();\n    this.resetSelectedLocation();\n  };\n\n  setNewLocation = () => {\n    this.setState({ newLocation: true });\n  };\n\n  _next = () => {\n    let currentStep = this.state.currentStep;\n    currentStep = currentStep >= 2 ? 3 : currentStep + 1;\n    this.setState({\n      currentStep: currentStep,\n    });\n  };\n\n  _prev = () => {\n    let currentStep = this.state.currentStep;\n    currentStep = currentStep <= 1 ? 1 : currentStep - 1;\n    this.setState({\n      currentStep: currentStep,\n    });\n  };\n\n  previousButton() {\n    let currentStep = this.state.currentStep;\n    if (currentStep !== 1) {\n      return (\n        <button\n          className=\"block px-3 py- my-2 text-white rounded text-l bg-gray-700\"\n          type=\"button\"\n          onClick={this._prev}\n        >\n          Vorige\n        </button>\n      );\n    }\n    return null;\n  }\n\n  nextButton(disabled, btnClass) {\n    let currentStep = this.state.currentStep;\n    if (currentStep < 2) {\n      return (\n        <button\n          disabled={disabled}\n          className={btnClass}\n          type=\"button\"\n          onClick={this._next}\n        >\n          Volgende\n        </button>\n      );\n    }\n    return null;\n  }\n\n  changeMarkers = () => {\n    // loading leaflet in componentDidMount because it doenst support SSR\n    const L = require(\"leaflet\");\n\n    const userMarker = new L.Icon({\n      iconUrl: userIcon,\n      iconRetinaUrl: userIcon,\n\n      iconAnchor: [16, 40],\n      popupAnchor: [0, -40],\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n      shadowAnchor: [13, 40],\n      iconSize: new L.Point(32, 40),\n    });\n\n    delete L.Icon.Default.prototype._getIconUrl;\n\n    L.Icon.Default.mergeOptions({\n      iconUrl: locationIcon,\n      iconRetinaUrl: locationIcon,\n      iconAnchor: [16, 40],\n      popupAnchor: [0, -40],\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n      shadowAnchor: [13, 40],\n      iconSize: new L.Point(32, 40),\n    });\n  };\n\n  componentDidMount(prevProps, prevState) {\n    // handle blob in 'onFileChange' from state\n    // blob gets set on choosing file\n    this.changeMarkers();\n    this.updateContext();\n  }\n\n  onCategoryCreate = async (option) => {\n    const label = option;\n\n    // check if slug is available, if not, add number\n    const value = slugify(option, {\n      replacement: \"-\", // replace spaces with replacement character, defaults to `-`\n      remove: undefined, // remove characters that match regex, defaults to `undefined`\n      lower: true, // convert to lower case, defaults to `false`\n      strict: true, // strip special characters except replacement, defaults to `false`\n    });\n\n    const query = `mutation CreateLocationCategory($input: createLocationCategoryInput) {\n            createLocationCategory(input: $input){\n            locationCategory{\n              label\n              value\n              id\n            }\n          }\n          }`;\n\n    let input = {};\n    input[\"data\"] = {\n      label: label,\n      value: value,\n    };\n\n    const data = await graphQLFetch(query, { input }, true);\n\n    if (data) {\n      const { label, value, id } = data.createLocationCategory.locationCategory;\n      this.setState((prevState) => {\n        const oldCategories = [...this.state.locationCategoryValues];\n        const newCategory = {\n          label: label,\n          value: value,\n          id: id,\n        };\n        oldCategories.push(newCategory);\n\n        const selectedValues =\n          this.state.location_categories != null\n            ? this.state.location_categories\n            : [];\n        selectedValues.push(newCategory);\n\n        const categoryIds = this.state.location.location_categories\n          ? this.state.location.location_categories\n          : [];\n        categoryIds.push(newCategory.id);\n\n        return {\n          location: {\n            ...prevState.location,\n            location_categories: [...categoryIds],\n          },\n          locationCategoryValues: [...oldCategories],\n          location_categories: selectedValues,\n        };\n      });\n      return {\n        label: label,\n        value: value,\n      };\n    }\n  };\n\n  handleSelect = (newValue, name) => {\n    /*\n        set the ID of the location_categories to location object\n        and update the selected values in object location_categories in the state\n        */\n    let ids;\n    if (newValue !== null) {\n      ids = newValue.map((item) => {\n        return item.id;\n      });\n    } else {\n      ids = [];\n    }\n\n    this.setState((prevState) => ({\n      ...prevState,\n      location: { ...prevState.location, [name]: ids },\n      [name]: newValue,\n    }));\n  };\n\n  createLocation = async () => {\n    console.log(\"creating location\");\n\n    const {\n      location,\n      location: { title },\n    } = this.state;\n\n    console.log(location, title);\n\n    const slug = slugify(title, {\n      replacement: \"-\", // replace spaces with replacement character, defaults to `-`\n      remove: undefined, // remove characters that match regex, defaults to `undefined`\n      lower: true, // convert to lower case, defaults to `false`\n      strict: true, // strip special characters except replacement, defaults to `false`\n    });\n\n    const query = `mutation CreateLocation($input: createLocationInput) {\n            createLocation(input: $input){\n            location{\n              slug\n              id\n            }\n          }\n          }`;\n\n    let input = {};\n    location[\"slug\"] = slug;\n    input[\"data\"] = location;\n\n    console.log(input);\n    const data = await graphQLFetch(query, { input }, true);\n\n    if (data) {\n      return data.createLocation;\n    }\n  };\n\n  handleInputChange = (event, property) => {\n    console.log(\"handling on input chagne\");\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState((prevState) => {\n      let stateFields;\n      if (property === \"location\") {\n        console.log(\"setting location state\");\n        stateFields = {\n          ...prevState,\n          location: { ...prevState.location, [name]: value },\n        };\n      } else {\n        stateFields = {\n          ...prevState,\n          photo: { ...prevState.photo, [name]: value },\n        };\n      }\n\n      const invalidFields = { ...prevState.invalidFields };\n      if (this.state.photo.title && this.state.invalidFields.title)\n        delete invalidFields[\"title\"];\n      stateFields[\"invalidFields\"] = invalidFields;\n      return stateFields;\n    });\n  };\n\n  removeImage = () => {\n    console.log(\"remove\");\n    this.setState({\n      tempFile: null,\n      photo: {},\n      blob: null,\n      locationKnown: false,\n    });\n  };\n\n  photoValidation = (file) => {\n    if (file.size > 27000000) {\n      this.setState((prevState) => ({\n        ...prevState,\n        invalidFields: {\n          ...prevState.invalidFields,\n          blob: \"Selecteer een afbeelding kleiner dan 27MB.\",\n        },\n      }));\n      return;\n    } else {\n      this.setState((prevState) => {\n        const invalidFields = { ...prevState.invalidFields };\n        if (invalidFields.hasOwnProperty(\"blob\")) delete invalidFields[\"blob\"];\n        return { invalidFields };\n      });\n    }\n  };\n\n  onFileChange = async (e) => {\n    const file = e.target.files[0];\n    this.setState({ blob: e.target.files[0] });\n\n    this.photoValidation(file);\n\n    this.setState({\n      photoLoading: true,\n    });\n\n    var reader = new FileReader();\n    reader.onload = () => {\n      this.setState({\n        photoLoading: false,\n        tempFile: URL.createObjectURL(file),\n      });\n    };\n    reader.readAsDataURL(file);\n\n    // TODO: extract lensmodel, and write location suggestion\n    let exifrGps = await exifr.gps(file);\n    let output = await exifr.parse(file, [\"LensModel\"]);\n\n    // if the photo contains gps data\n    if (exifrGps) {\n      let { longitude, latitude } = exifrGps;\n      this.setState((prevState) => ({\n        ...prevState,\n        locationKnown: true,\n        photo: { ...prevState.photo, longitude, latitude },\n      }));\n    }\n\n    if (file && file.name) {\n      EXIF.getData(file, () => {\n        let exifData = EXIF.pretty(file);\n        if (\n          exifData &&\n          EXIF.getTag(file, \"ExposureTime\") &&\n          EXIF.getTag(file, \"ISOSpeedRatings\") &&\n          EXIF.getTag(file, \"FNumber\")\n        ) {\n          let date = EXIF.getTag(file, \"DateTime\");\n          if (date) {\n            let splittedDate = EXIF.getTag(file, \"DateTime\")\n              .substr(0, 10)\n              .split(\":\");\n            const year = splittedDate[0];\n            const month = splittedDate[1];\n            const day = splittedDate[2];\n            let dateVal = `${year}-${month}-${day}`;\n\n            this.setState((prevState) => ({\n              ...prevState,\n              photo: { ...prevState.photo, date: dateVal },\n            }));\n          }\n\n          const shutterVal =\n            EXIF.getTag(file, \"ExposureTime\").numerator /\n            EXIF.getTag(file, \"ExposureTime\").denominator;\n          let shutterspeedVal =\n            shutterVal > 1 ? shutterVal : \"1/\" + 1 / shutterVal;\n          let ISOVal = EXIF.getTag(file, \"ISOSpeedRatings\");\n          let apertureVal =\n            EXIF.getTag(file, \"FNumber\").numerator /\n            EXIF.getTag(file, \"FNumber\").denominator;\n          let focalLengthVal = EXIF.getTag(file, \"FocalLength\") + \"mm\";\n          let cameraVal = EXIF.getTag(file, \"Model\");\n\n          this.setState((prevState) => ({\n            ...prevState,\n            photo: {\n              ...prevState.photo,\n              shutterspeed: shutterspeedVal,\n              iso: ISOVal,\n              aperture: apertureVal,\n              focalLength: focalLengthVal,\n              camera: cameraVal,\n            },\n          }));\n        } else {\n          this.setState((prevState) => ({\n            ...prevState,\n            photo: {\n              ...prevState.photo,\n              date: \"\",\n              shutterspeed: \"\",\n              iso: \"\",\n              aperture: \"\",\n              focalLength: \"\",\n              camera: \"\",\n            },\n          }));\n        }\n      });\n    } else {\n      this.setState((prevState) => ({\n        ...prevState,\n        photo: {\n          ...prevState.photo,\n          date: \"\",\n          shutterspeed: \"\",\n          iso: \"\",\n          aperture: \"\",\n          focalLength: \"\",\n          camera: \"\",\n        },\n      }));\n    }\n  };\n\n  handleOnDrop = (e) => {\n    console.log(\"handleOnDrop fired\", e);\n  };\n  handleOnDragOver = (e) => {\n    this.setState({ onDragOver: true });\n  };\n  handleOnDragLeave = (e) => {\n    this.setState({ onDragOver: false });\n  };\n\n  checkForAvailableSlug = async (slug) => {\n    let query = `query photoBySlug($slug: String!){\n            photoBySlug(slug: $slug) {\n                title\n            }\n        }`;\n\n    const result = await graphQLFetch(query, { slug }, true);\n    return result;\n  };\n\n  createSlug = async (slug, suffix, previousSuffix) => {\n    var result = await this.checkForAvailableSlug(slug);\n\n    if (!result.photoBySlug) {\n      // slug is available, proceed\n      return slug;\n    } else {\n      // slug is not available, try again\n\n      if (!suffix) {\n        suffix = 1;\n      } else {\n        suffix++;\n      }\n      var n = str.lastIndexOf(previousSuffix);\n      slug.replace(previousSlug, \"\");\n\n      const createdSuffix = \"-\" + suffix;\n      let adjustedSlug = slug + reactedSlug;\n      return this.createSlug(adjustedSlug, suffix, createdSuffix);\n    }\n  };\n\n  fetchCategories = async () => {\n    // build the graphql query\n    const query = `query locationCategories{\n            locationCategories {\n              label\n              value\n              id\n            }\n            months {\n              label\n              value\n              id\n            }\n          }`;\n    const result = await graphQLFetch(query, {}, true);\n    this.setState({\n      locationCategoryValues: result.locationCategories,\n      monthValues: result.months,\n    });\n  };\n\n  async handleSubmit(e) {\n    console.log(\"submitted\");\n    e.preventDefault();\n    e.persist();\n\n    const {\n      blob,\n      newLocation,\n      photo: { title },\n    } = this.state;\n\n    // check if an image is given, and title, if not show error and return null;\n    if (!blob || !title) {\n      if (!blob) {\n        console.log(\"no blob in state\");\n        this.setState((prevState) => ({\n          ...prevState,\n          invalidFields: {\n            ...prevState.invalidFields,\n            blob: \"Voeg je nog een foto toe? \",\n          },\n        }));\n      }\n      if (!title) {\n        console.log(\"no title in state.photo\");\n        this.setState((prevState) => ({\n          ...prevState,\n          invalidFields: {\n            ...prevState.invalidFields,\n            title: \"Wat is de titel van je foto? \",\n          },\n        }));\n      }\n      console.log(\"returning\");\n      return;\n    }\n\n    let createdLocation = null;\n    if (newLocation) {\n      createdLocation = await this.createLocation();\n      console.log(createdLocation);\n    } else {\n      console.log(\"no new location found\");\n    }\n\n    // check if slug is available, if not, add number\n    let slug = slugify(title, {\n      replacement: \"-\", // replace spaces with replacement character, defaults to `-`\n      remove: undefined, // remove characters that match regex, defaults to `undefined`\n      lower: true, // convert to lower case, defaults to `false`\n      strict: true, // strip special characters except replacement, defaults to `false`\n    });\n\n    const createdSlug = await this.createSlug(slug);\n\n    // if slug is available, add to the state\n    this.setState((prevState) => {\n      return {\n        ...prevState,\n        photo: {\n          ...prevState.photo,\n          slug: createdSlug,\n          location:\n            createdLocation !== null\n              ? createdLocation.location.id\n              : prevState.photo.location,\n          date: prevState.photo.date ? new Date(prevState.photo.date) : null,\n          iso: prevState.photo.iso ? prevState.photo.iso.toString() : null,\n          aperture: prevState.photo.aperture\n            ? prevState.photo.aperture.toString()\n            : null,\n          shutterspeed: prevState.photo.shutterspeed\n            ? prevState.photo.shutterspeed.toString()\n            : null,\n        },\n      };\n    });\n\n    //create photo page with info\n    // query for new photo\n    const query = `mutation CreatePhoto($input: createPhotoInput) {\n            createPhoto(input: $input){\n                photo{\n                    title\n                    desc\n                    slug\n                    date\n                    brand\n                    shutterspeed\n                    iso\n                    aperture\n                    camera\n                    focalLength\n                    id\n                    location {\n                        id\n                        title\n                        longitude\n                        latitude\n                    }\n                }\n            }\n        }`;\n\n    let input = {};\n    input[\"data\"] = this.state.photo;\n    delete input.data.blob;\n    delete input.data.longitude;\n    delete input.data.latitude;\n\n    console.log(\"input\", input);\n\n    const data = await graphQLFetch(query, { input }, true);\n\n    if (data) {\n      console.log(\"photo page created, uploading foto..\");\n      //after pages is created, use refId to upload files with xhr request\n\n      const redirect = () => {\n        //if the query returns an id in data, the photo is created\n        // redirect to created photo\n        this.props.redirect(data.createPhoto.photo.slug);\n      };\n\n      const formData = new FormData();\n\n      const { blob: uploadedFile } = this.state;\n\n      formData.append(`files`, uploadedFile, uploadedFile.name);\n      formData.append(\"ref\", \"photo\");\n      formData.append(\"field\", \"photo\");\n      formData.append(\"refId\", data.createPhoto.photo.id);\n\n      const request = new XMLHttpRequest();\n      request.open(\"POST\", `http://localhost:1337/upload`);\n      request.send(formData);\n      request.addEventListener(\"load\", redirect);\n    } else {\n      console.log(\"failed\");\n    }\n  }\n\n  onLocationSelect = (location) => {\n    // if existing location is selected, add to the state\n    this.setState((prevState) => ({\n      ...prevState,\n      selectedLocation: location,\n      photo: { ...prevState.photo, location: location.id },\n    }));\n  };\n\n  resetSelectedLocation = () => {\n    this.setState((prevState) => ({\n      ...prevState,\n      selectedLocation: null,\n      photo: { ...prevState.photo, location: null },\n    }));\n  };\n\n  updateNewLocationCoords = (lat, lng) => {\n    console.log(lat, lng);\n    this.setState((prevState) => ({\n      ...prevState,\n      newLocation: false,\n      location: { ...prevState.location, longitude: lng, latitude: lat },\n    }));\n  };\n\n  render() {\n    let btnClass = \"block px-3 py- my-2 text-white rounded text-l\";\n    let disabled =\n      this.state.currentStep == 1\n        ? this.state.photo.title === undefined ||\n          this.state.photo.title === \"\" ||\n          this.state.blob === null\n        : false;\n    btnClass += disabled ? \" bg-gray-400\" : \" bg-blue-600\";\n\n    return (\n      <React.Fragment>\n        <form\n          name=\"photoAdd\"\n          encType=\"multipart/form-data\"\n          onSubmit={this.handleSubmit}\n          className=\"photoAdd block py-3 px-4 border border-gray-300 rounded md:mx-auto md:my-6 md:w-9/12 lg:w-1/2 rounded md:shadow-lg md:p-6\"\n        >\n          <h1 className=\"my-2 font-bold\">Starpi Foto toevoegen</h1>\n\n          <AddPhoto\n            currentStep={this.state.currentStep}\n            state={this.state}\n            fileInput={this.fileInput}\n            onFileChange={this.onFileChange}\n            onChange={this.handleInputChange}\n            handleOnDrop={this.handleOnDrop}\n            handleOnDragOver={this.handleOnDragOver}\n            handleOnDragLeave={this.handleOnDragLeave}\n            removeImage={this.removeImage}\n          />\n          {this.state.currentStep === 2 && (\n            <Step2\n              currentStep={this.state.currentStep}\n              state={this.state}\n              findNearbyLocations={findNearbyLocations}\n              onLocationSelect={this.onLocationSelect}\n              resetSelectedLocation={this.resetSelectedLocation}\n              activeLocation={this.state.selectedLocation}\n              onChange={this.handleInputChange}\n              updateNewLocationCoords={this.updateNewLocationCoords}\n              handleSelect={this.handleSelect}\n              onCategoryCreate={this.onCategoryCreate}\n              fetchCategories={this.fetchCategories}\n              onNewLocationClick={this.onNewLocationClick}\n              setNewLocation={this.setNewLocation}\n            />\n          )}\n\n          <div className=\"shadow w-full bg-grey-light\">\n            <div\n              className=\"bg-blue-500 text-xs leading-none py-1 text-center text-white\"\n              style={{ width: this.state.uploadPercentage + \"%\" }}\n            >\n              {this.state.uploadPercentage + \"%\"}\n            </div>\n          </div>\n\n          {this.previousButton()}\n          {this.nextButton(disabled, btnClass)}\n        </form>\n      </React.Fragment>\n    );\n  }\n}\n\nclass Step2 extends React.Component {\n  constructor(props) {\n    console.log(props);\n    super(props);\n\n    const { locationKnown } = props.state;\n    const zoom = locationKnown ? props.state.map.zoom : 6;\n\n    this.state = {\n      nearbyLocations: null,\n      draggable: !props.locationKnown,\n      marker: {\n        lat: 52.243712,\n        lng: 5.4411363,\n      },\n      zoom,\n      loadingNearbyLocations: false,\n    };\n  }\n\n  displayLocations = async (lat, lng) => {\n    const nearbyLocations = await this.props.findNearbyLocations(lat, lng);\n    if (nearbyLocations === null) {\n      this.props.setNewLocation();\n    }\n    this.setState({ nearbyLocations, loadingNearbyLocations: false });\n  };\n\n  async componentDidMount() {\n    if (this.props.currentStep == 2) {\n      console.log(\"mounting\");\n      const { locationKnown } = this.props.state;\n      if (locationKnown) {\n        console.log(\"location known\");\n        const { latitude, longitude } = this.props.state.photo;\n        console.log(\"getting long lat\", latitude, longitude);\n        this.props.updateNewLocationCoords(latitude, longitude);\n        this.displayLocations(latitude, longitude);\n        this.setState({\n          marker: { lat: latitude, lng: longitude },\n        });\n      }\n      this.props.fetchCategories();\n    }\n  }\n\n  refmarker = React.createRef();\n  map = React.createRef();\n\n  updatePosition = () => {\n    const marker = this.refmarker.current;\n    const map = this.map.current;\n    if (marker != null) {\n      console.log(\"updating position\", marker.leafletElement.getLatLng());\n      this.setState({\n        marker: marker.leafletElement.getLatLng(),\n        zoom: map.leafletElement.getZoom(),\n        loadingNearbyLocations: true,\n      });\n    }\n    this.displayLocations(this.state.marker.lat, this.state.marker.lng);\n    console.log(\n      marker.leafletElement.getLatLng().lat,\n      marker.leafletElement.getLatLng().lng\n    );\n    this.props.updateNewLocationCoords(\n      marker.leafletElement.getLatLng().lat,\n      marker.leafletElement.getLatLng().lng\n    );\n  };\n\n  onChange = (e) => {\n    this.props.onChange(e, \"location\");\n  };\n\n  render() {\n    if (this.props.currentStep !== 2) {\n      return null;\n    }\n\n    const {\n      locationCategoryValues,\n      location_categories,\n      newLocation,\n      monthValues,\n    } = this.props.state;\n    const { marker } = this.state;\n    const position = [marker.lat, marker.lng];\n\n    const { nearbyLocations, zoom, loadingNearbyLocations } = this.state;\n\n    return (\n      <div className=\"form-group\">\n        <Map\n          className=\"map\"\n          id=\"photoLocation\"\n          center={position}\n          zoom={zoom}\n          ref={this.map}\n        >\n          <TileLayer\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          <Marker\n            position={position}\n            ref={this.refmarker}\n            draggable={this.state.draggable}\n            onDragend={this.updatePosition}\n          >\n            <Popup>Foto locatie</Popup>\n          </Marker>\n        </Map>\n\n        {loadingNearbyLocations && <FaSpinner />}\n        {nearbyLocations && !newLocation && (\n          <div>\n            <div className=\"\">Bedoel je misschien deze locatie?</div>\n            <div className=\"flex flex-wrap -mx-2\">\n              {nearbyLocations.map(\n                (location) =>\n                  location.photos.length > 0 && (\n                    <LocationCard\n                      activeLocation={this.props.activeLocation}\n                      key={location.id}\n                      location={location}\n                      onClick={this.props.onLocationSelect}\n                    />\n                  )\n              )}\n            </div>\n            <div\n              onClick={this.props.onNewLocationClick}\n              className=\"rounded bg-blue-500 text-white w-full p-2\"\n            >\n              Nee, nieuwe locatie toevoegen\n            </div>\n          </div>\n        )}\n        {newLocation && (\n          <React.Fragment>\n            <h2>Nieuwe locatie toevoegen</h2>\n            <input\n              type=\"text\"\n              name=\"title\"\n              placeholder=\"Titel\"\n              onChange={this.onChange}\n            />\n            <textarea\n              type=\"text\"\n              name=\"desc\"\n              onChange={this.onChange}\n              placeholder=\"Beschrijving van de locatie\"\n            />\n            <textarea\n              type=\"text\"\n              name=\"directions\"\n              onChange={this.onChange}\n              placeholder=\"Beste manier om hier naar toe te reizen? Is bijvoorbeeld er een parkeerplaats dichtbij, stopt er een bus?\"\n            />\n            <textarea\n              type=\"text\"\n              name=\"whattoshoot\"\n              onChange={this.onChange}\n              placeholder=\"Tips en advies, wat kan je fotograferen op deze locatie?\"\n            />\n            <Select\n              components={animatedComponents}\n              closeMenuOnSelect={false}\n              isMulti\n              options={monthValues}\n              placeholder=\"Beste maand om te fotograferen\"\n              onChange={(e) => {\n                this.props.handleSelect(e, \"months\");\n              }}\n            />\n            <CreatableSelect\n              components={animatedComponents}\n              isMulti\n              onChange={(e) => {\n                this.props.handleSelect(e, \"location_categories\");\n              }}\n              options={locationCategoryValues}\n              placeholder=\"Categorien\"\n              value={location_categories}\n              onCreateOption={this.props.onCategoryCreate}\n              formatCreateLabel={(label) => `Maak nieuwe categorie: \"${label}`}\n            />\n          </React.Fragment>\n        )}\n        <button\n          type=\"submit\"\n          className=\"block px-3 py- my-2 text-white rounded text-l bg-blue-500\"\n        >\n          Uploaden\n        </button>\n      </div>\n    );\n  }\n}\n","/* globals React */\nimport React, { useContext } from \"react\";\nimport graphQLFetch from \"./graphQLFetch.js\";\nimport http from \"./services/httpService\";\nimport EXIF from \"exif-js\";\nimport exifr from \"exifr\";\nimport slugify from \"slugify\";\nimport AddPhoto from \"./AddPhoto.jsx\";\nimport { userContext } from \"./services/userContext.js\";\n\nexport default class PhotoAddToLocation extends React.Component {\n  redirect = (slug) => {\n    //if the query returns an id in data, the photo is created\n    // redirect to created photo\n\n    const { history } = this.props;\n    history.push({\n      pathname: `/foto/${slug}`,\n    });\n  };\n\n  fetchLocation = async () => {\n    const query = `query location($id:ID!) {\n            location(id:$id) {\n              title\n              id\n              slug\n            }\n          }`;\n\n    let {\n      params: { id },\n    } = this.props.match;\n\n    const data = await graphQLFetch(query, { id }, true);\n    return data;\n  };\n\n  // we are rendering the actual component to have access to the Context\n  // outside of the renderfunction in the next component\n  // We have to pass functions to make use of the router functionality\n\n  render() {\n    return (\n      <userContext.Consumer>\n        {(value) => {\n          console.log(value);\n          return (\n            <MapElement\n              value={value}\n              redirect={this.redirect}\n              fetchLocation={this.fetchLocation}\n            />\n          );\n        }}\n      </userContext.Consumer>\n    );\n  }\n}\n\nclass MapElement extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      photo: {},\n      photoLoading: false,\n      tempFile: null,\n      onDrop: false,\n      onDragOver: false,\n      uploadPercentage: 0,\n      invalidFields: {},\n      blob: null,\n      location: null,\n    };\n    this.fileInput = React.createRef();\n    this.handleSubmit = this.handleSubmit.bind(this);\n    console.log(props);\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log(\"update\");\n    const {\n      value: { user: prevUser },\n    } = prevProps;\n    const {\n      value: { user },\n    } = this.props;\n    console.log(prevUser, user);\n    if (prevUser !== user) {\n      console.log(\"updating context\");\n      this.updateContext();\n    }\n  }\n\n  updateContext() {\n    this.setState((prevState) => ({\n      ...prevState,\n      photo: { ...prevState.photo, user: this.props.value.user.id },\n    }));\n  }\n\n  async componentDidMount() {\n    console.log(this.props.value);\n\n    const data = await this.props.fetchLocation();\n    if (data) {\n      console.log(\"props from mount\", this.props);\n      this.setState({\n        location: data.location,\n        photo: { location: data.location.id, user: this.props.value.id },\n      });\n    } else {\n      this.setState({ location: null });\n    }\n  }\n\n  async handleSubmit(e) {\n    console.log(\"submitted\");\n    e.preventDefault();\n    e.persist();\n    updateContext();\n\n    const {\n      blob,\n      newLocation,\n      photo: { title },\n    } = this.state;\n\n    // check if an image is given, and title, if not show error and return null;\n    if (!blob || !title) {\n      if (!blob) {\n        console.log(\"no blob in state\");\n        this.setState((prevState) => ({\n          ...prevState,\n          invalidFields: {\n            ...prevState.invalidFields,\n            blob: \"Voeg je nog een foto toe? \",\n          },\n        }));\n      }\n      if (!title) {\n        console.log(\"no title in state.photo\");\n        this.setState((prevState) => ({\n          ...prevState,\n          invalidFields: {\n            ...prevState.invalidFields,\n            title: \"Wat is de titel van je foto? \",\n          },\n        }));\n      }\n      console.log(\"returning\");\n      return;\n    }\n\n    // check if slug is available, if not, add number\n    let slug = slugify(title, {\n      replacement: \"-\", // replace spaces with replacement character, defaults to `-`\n      remove: undefined, // remove characters that match regex, defaults to `undefined`\n      lower: true, // convert to lower case, defaults to `false`\n      strict: true, // strip special characters except replacement, defaults to `false`\n    });\n\n    const createdSlug = await this.createSlug(slug);\n\n    // if slug is available, add to the state\n    this.setState((prevState) => {\n      return {\n        ...prevState,\n        photo: {\n          ...prevState.photo,\n          slug: createdSlug,\n          date: prevState.photo.date ? new Date(prevState.photo.date) : null,\n          iso: prevState.photo.iso ? prevState.photo.iso.toString() : null,\n          aperture: prevState.photo.aperture\n            ? prevState.photo.aperture.toString()\n            : null,\n          shutterspeed: prevState.photo.shutterspeed\n            ? prevState.photo.shutterspeed.toString()\n            : null,\n        },\n      };\n    });\n\n    //create photo page with info\n    // query for new photo\n    const query = `mutation CreatePhoto($input: createPhotoInput) {\n            createPhoto(input: $input){\n                photo{\n                    title\n                    desc\n                    slug\n                    date\n                    brand\n                    shutterspeed\n                    iso\n                    aperture\n                    camera\n                    focalLength\n                    id\n                    location {\n                        id\n                        title\n                        longitude\n                        latitude\n                    }\n                }\n            }\n        }`;\n\n    let input = {};\n    input[\"data\"] = this.state.photo;\n    delete input.data.blob;\n    delete input.data.longitude;\n    delete input.data.latitude;\n\n    console.log(\"input\", input);\n\n    const data = await graphQLFetch(query, { input }, true);\n\n    if (data) {\n      console.log(\"photo page created, uploading foto..\");\n      //after pages is created, use refId to upload files with xhr request\n\n      const redirect = () => {\n        //if the query returns an id in data, the photo is created\n        // redirect to created photo\n        this.props.redirect(data.createPhoto.photo.slug);\n      };\n\n      const formData = new FormData();\n\n      const { blob: uploadedFile } = this.state;\n\n      formData.append(`files`, uploadedFile, uploadedFile.name);\n      formData.append(\"ref\", \"photo\");\n      formData.append(\"field\", \"photo\");\n      formData.append(\"refId\", data.createPhoto.photo.id);\n\n      const request = new XMLHttpRequest();\n      request.open(\"POST\", `http://localhost:1337/upload`);\n      request.send(formData);\n      request.addEventListener(\"load\", redirect);\n    } else {\n      console.log(\"failed\");\n    }\n  }\n\n  photoValidation = (file) => {\n    if (file.size > 27000000) {\n      this.setState((prevState) => ({\n        ...prevState,\n        invalidFields: {\n          ...prevState.invalidFields,\n          blob: \"Selecteer een afbeelding kleiner dan 27MB.\",\n        },\n      }));\n      return;\n    } else {\n      this.setState((prevState) => {\n        const invalidFields = { ...prevState.invalidFields };\n        if (invalidFields.hasOwnProperty(\"blob\")) delete invalidFields[\"blob\"];\n        return { invalidFields };\n      });\n    }\n  };\n\n  onFileChange = async (e) => {\n    const file = e.target.files[0];\n    this.setState({ blob: e.target.files[0] });\n\n    this.photoValidation(file);\n\n    this.setState({\n      photoLoading: true,\n    });\n\n    var reader = new FileReader();\n    reader.onload = () => {\n      this.setState({\n        photoLoading: false,\n        tempFile: URL.createObjectURL(file),\n      });\n    };\n    reader.readAsDataURL(file);\n\n    let exifrGps = await exifr.gps(file);\n    let output = await exifr.parse(file, [\"LensModel\"]);\n\n    // if the photo contains gps data\n    if (exifrGps) {\n      let { longitude, latitude } = exifrGps;\n      this.setState((prevState) => ({\n        ...prevState,\n        locationKnown: true,\n        photo: { ...prevState.photo, longitude, latitude },\n      }));\n    }\n\n    if (file && file.name) {\n      EXIF.getData(file, () => {\n        let exifData = EXIF.pretty(file);\n        if (\n          exifData &&\n          EXIF.getTag(file, \"ExposureTime\") &&\n          EXIF.getTag(file, \"ISOSpeedRatings\") &&\n          EXIF.getTag(file, \"FNumber\")\n        ) {\n          let date = EXIF.getTag(file, \"DateTime\");\n          if (date) {\n            let splittedDate = EXIF.getTag(file, \"DateTime\")\n              .substr(0, 10)\n              .split(\":\");\n            const year = splittedDate[0];\n            const month = splittedDate[1];\n            const day = splittedDate[2];\n            let dateVal = `${year}-${month}-${day}`;\n\n            this.setState((prevState) => ({\n              ...prevState,\n              photo: { ...prevState.photo, date: dateVal },\n            }));\n          }\n\n          const shutterVal =\n            EXIF.getTag(file, \"ExposureTime\").numerator /\n            EXIF.getTag(file, \"ExposureTime\").denominator;\n          let shutterspeedVal =\n            shutterVal > 1 ? shutterVal : \"1/\" + 1 / shutterVal;\n          let ISOVal = EXIF.getTag(file, \"ISOSpeedRatings\");\n          let apertureVal =\n            EXIF.getTag(file, \"FNumber\").numerator /\n            EXIF.getTag(file, \"FNumber\").denominator;\n          let focalLengthVal = EXIF.getTag(file, \"FocalLength\") + \"mm\";\n          let cameraVal = EXIF.getTag(file, \"Model\");\n\n          this.setState((prevState) => ({\n            ...prevState,\n            photo: {\n              ...prevState.photo,\n              shutterspeed: shutterspeedVal,\n              iso: ISOVal,\n              aperture: apertureVal,\n              focalLength: focalLengthVal,\n              camera: cameraVal,\n            },\n          }));\n        } else {\n          this.setState((prevState) => ({\n            ...prevState,\n            photo: {\n              ...prevState.photo,\n              date: \"\",\n              shutterspeed: \"\",\n              iso: \"\",\n              aperture: \"\",\n              focalLength: \"\",\n              camera: \"\",\n            },\n          }));\n        }\n      });\n    } else {\n      this.setState((prevState) => ({\n        ...prevState,\n        photo: {\n          ...prevState.photo,\n          date: \"\",\n          shutterspeed: \"\",\n          iso: \"\",\n          aperture: \"\",\n          focalLength: \"\",\n          camera: \"\",\n        },\n      }));\n    }\n  };\n\n  handleInputChange = (event, property) => {\n    console.log(\"handling on input chagne\");\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState((prevState) => {\n      let stateFields;\n      if (property === \"location\") {\n        console.log(\"setting location state\");\n        stateFields = {\n          ...prevState,\n          location: { ...prevState.location, [name]: value },\n        };\n      } else {\n        stateFields = {\n          ...prevState,\n          photo: { ...prevState.photo, [name]: value },\n        };\n      }\n\n      const invalidFields = { ...prevState.invalidFields };\n      if (this.state.photo.title && this.state.invalidFields.title)\n        delete invalidFields[\"title\"];\n      stateFields[\"invalidFields\"] = invalidFields;\n      return stateFields;\n    });\n  };\n\n  removeImage = () => {\n    console.log(\"remove\");\n    this.setState({\n      tempFile: null,\n      photo: {},\n      blob: null,\n      locationKnown: false,\n    });\n  };\n\n  handleOnDrop = (e) => {\n    console.log(\"handleOnDrop fired\", e);\n  };\n  handleOnDragOver = (e) => {\n    this.setState({ onDragOver: true });\n  };\n  handleOnDragLeave = (e) => {\n    this.setState({ onDragOver: false });\n  };\n\n  checkForAvailableSlug = async (slug) => {\n    let query = `query photoBySlug($slug: String!){\n            photoBySlug(slug: $slug) {\n                title\n            }\n        }`;\n\n    const result = await graphQLFetch(query, { slug }, true);\n    return result;\n  };\n\n  createSlug = async (slug, suffix, previousSuffix) => {\n    var result = await this.checkForAvailableSlug(slug);\n\n    if (!result.photoBySlug) {\n      // slug is available, proceed\n      return slug;\n    } else {\n      // slug is not available, try again\n\n      if (!suffix) {\n        suffix = 1;\n      } else {\n        suffix++;\n      }\n      var n = str.lastIndexOf(previousSuffix);\n      slug.replace(previousSlug, \"\");\n\n      const createdSuffix = \"-\" + suffix;\n      let adjustedSlug = slug + reactedSlug;\n      return this.createSlug(adjustedSlug, suffix, createdSuffix);\n    }\n  };\n\n  render() {\n    const { location } = this.state;\n    if (location === null) {\n      return null;\n    }\n\n    let btnClass = \"block px-3 py- my-2 text-white rounded text-l\";\n    let disabled =\n      this.state.photo.title === undefined ||\n      this.state.photo.title === \"\" ||\n      this.state.blob === null\n        ? true\n        : false;\n    btnClass += disabled ? \" bg-gray-400\" : \" bg-blue-600\";\n\n    return (\n      <>\n        <form\n          name=\"photoAdd\"\n          encType=\"multipart/form-data\"\n          onSubmit={this.handleSubmit}\n          className=\"photoAdd block py-3 px-4 border border-gray-300 rounded md:mx-auto md:my-6 md:w-9/12 lg:w-1/2 rounded md:shadow-lg md:p-6\"\n        >\n          <div className=\"block mb-2\">\n            <div className=\"w-full rounded p-2 border\">\n              <p className=\"font-bold\">\n                Foto toevoegen aan locatie: {location.title}\n              </p>\n            </div>\n          </div>\n          <AddPhoto\n            state={this.state}\n            fileInput={this.fileInput}\n            onFileChange={this.onFileChange}\n            onChange={this.handleInputChange}\n            handleOnDrop={this.handleOnDrop}\n            handleOnDragOver={this.handleOnDragOver}\n            handleOnDragLeave={this.handleOnDragLeave}\n            removeImage={this.removeImage}\n          />\n          <button disabled={disabled} type=\"submit\" className={btnClass}>\n            Uploaden\n          </button>\n        </form>\n      </>\n    );\n  }\n}\n","/* globals React */\nimport React, { Component } from \"react\";\nimport { Link, withRouter, NavLink } from \"react-router-dom\";\nimport { CgTrash } from \"react-icons/cg\";\n\nexport const PhotoView = withRouter(\n  ({ photo, location: { search }, deletePhoto, index }) => {\n    const selectedLocation = { pathname: `/foto/${photo.slug}`, search };\n    return (\n      <React.Fragment>\n        <div className=\"w-full inline-block my-2 mr-2\">\n          <div className=\"photoCard rounded relative shadow-xs\">\n            <div className=\"relative rounded overflow-hidden\">\n              <NavLink\n                to={selectedLocation}\n                className=\"absolute w-full h-full z-10\"\n                title=\"Bekijk foto nu\"\n              ></NavLink>\n              <img\n                src={photo.photo[0].url}\n                className=\"object-cover  w-full h-48  block\"\n                alt=\"Foto\"\n              />\n            </div>\n          </div>\n          <div className=\"photoContent pt-2\">\n            <span className=\"text-black\">\n              {\n                // convert date type to a readable date string\n                photo.date && photo.date.toDateString()\n              }\n            </span>\n            <div className=\"photoInfo flex\">\n              <div>\n                <h3 className=\"text-black\">{photo.title}</h3>\n                <span className=\"text-black\">{photo.location.title}</span>\n              </div>\n              {/* <p className=\"text-black\">{photo.category}</p> */}\n              {deletePhoto != null && (\n                <div\n                  onClick={\n                    deletePhoto != null &&\n                    (() => {\n                      if (\n                        window.confirm(\n                          \"Weet je zeker dat je deze foto wilt verwijderen?\"\n                        )\n                      )\n                        deletePhoto(index);\n                    })\n                  }\n                  className=\"rounded w-8 h-8 bg-red-700 ml-auto flex items-center justify-center\"\n                >\n                  <CgTrash className=\"w-4 h-4 stroke-current text-white\" />\n                </div>\n              )}\n            </div>\n            <div className=\"clear\"></div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n);\n\nexport default function PhotoCarousel({ photos, deletePhoto }) {\n  const photoViews = photos.map((photo, index) => (\n    <PhotoView\n      key={photo.id}\n      index={index}\n      deletePhoto={deletePhoto}\n      photo={photo}\n    />\n  ));\n  return <div className=\"-mx-2\">{photoViews}</div>;\n}\n","/* globals React */\n/* eslint \"react/jsx-no-undef\":\"off\" */\n\nimport React, { Component, Fragment } from \"react\";\nimport graphQLFetch from \"./graphQLFetch.js\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet-universal\";\nimport { Link } from \"react-router-dom\";\nimport store from \"./store.js\";\nimport { Redirect } from \"react-router-dom\";\nimport userIcon from \"./images/userMarker.svg\";\nimport locationIcon from \"./images/locationMarker.svg\";\nimport shadowIcon from \"./images/markerShadow.png\";\nimport { userContext } from \"./services/userContext.js\";\nimport FavButton from \"./components/favButton.jsx\";\nimport UserProfilePicture from \"./components/UserProfilePicture.jsx\";\nimport PhotoComment from \"./components/Comments/Comments.jsx\";\nimport { IoCameraOutline } from \"react-icons/io5\";\nimport { GoSettings } from \"react-icons/go\";\nimport CreateNotification from \"./components/CreateNotification.jsx\";\n\nexport default class PhotoDetailStrapi extends React.Component {\n  static async fetchData(match, search, showError) {\n    // build the graphql query\n    const query = `query photoBySlug($slug: String!){\n                    photoBySlug(slug: $slug) {\n                      id\n                      title\n                      desc\n                      photo {\n                          url\n                      }\n                      slug\n                      date\n                      brand\n                      shutterspeed\n                      iso\n                      aperture\n                      camera\n                      comments {\n                        id\n                        body\n                        parent {\n                          id\n                        }\n                        user {\n                          profilePicture {\n                            url\n                          }\n                          slug\n                          username \n                          firstname\n                          lastname\n                        }\n                      }\n                      likes\n                      focalLength\n                      usersLike {\n                        id\n                      }\n                      location {\n                          longitude\n                          latitude\n                          id\n                          title\n                          slug\n                      }\n                      user {\n                        id\n                        slug\n                        username\n                        profilePicture {\n                          url\n                        }\n                      }\n                    }\n                  }`;\n\n    let {\n      params: { id: slug },\n    } = match;\n    const result = await graphQLFetch(query, { slug }, true);\n    console.log(result);\n    return result;\n  }\n\n  constructor() {\n    super();\n    const photoBySlug = store.initialData\n      ? store.initialData.photoBySlug\n      : null;\n    delete store.initialData;\n    this.state = {\n      isServer: true,\n      photoBySlug,\n      redirect: false,\n      zoom: 13,\n      userLocationKnown: false,\n      userMarker: null,\n      userLocation: {\n        longitude: null,\n        latitude: null,\n      },\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      match: {\n        params: { id: prevId },\n      },\n    } = prevProps;\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props;\n    if (prevId !== id) {\n      this.loadData();\n    }\n  }\n\n  componentDidMount() {\n    const { photoBySlug } = this.state;\n    if (photoBySlug === null) {\n      this.loadData();\n    }\n\n    // loading leaflet in componentDidMount because it doenst support SSR\n    const L = require(\"leaflet\");\n\n    const userMarker = new L.Icon({\n      iconUrl: userIcon,\n      iconRetinaUrl: userIcon,\n\n      iconAnchor: [16, 40],\n      popupAnchor: [0, -40],\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n      shadowAnchor: [13, 40],\n      iconSize: new L.Point(32, 40),\n    });\n\n    delete L.Icon.Default.prototype._getIconUrl;\n\n    L.Icon.Default.mergeOptions({\n      iconUrl: locationIcon,\n      iconRetinaUrl: locationIcon,\n      iconAnchor: [16, 40],\n      popupAnchor: [0, -40],\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n      shadowAnchor: [13, 40],\n      iconSize: new L.Point(32, 40),\n    });\n\n    // get users position\n    var options = {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 0,\n    };\n\n    const success = (pos) => {\n      var crd = pos.coords;\n\n      console.log(\"Your current position is:\");\n      console.log(`Latitude : ${crd.latitude}`);\n      console.log(`Longitude: ${crd.longitude}`);\n      console.log(`More or less ${crd.accuracy} meters.`);\n\n      this.setState((prevState) => ({\n        ...prevState,\n        userMarker,\n        userLocationKnown: true,\n        userLocation: { longitude: crd.longitude, latitude: crd.latitude },\n      }));\n    };\n\n    const error = (err) => {\n      console.warn(`ERROR(${err.code}): ${err.message}`);\n\n      fetch(\"https://ipapi.co/json\")\n        .then((res) => res.json())\n        .then((location) => {\n          this.setState((prevState) => ({\n            ...prevState,\n            userMarker,\n            userLocationKnown: true,\n            userLocation: {\n              longitude: location.longitude,\n              latitude: location.latitude,\n            },\n          }));\n        });\n    };\n\n    navigator.geolocation.getCurrentPosition(success, error, options);\n    this.setState({ isServer: false });\n  }\n\n  async loadData() {\n    // get the search query string form url\n    const { match } = this.props;\n    // provide the query with the variables\n    const data = await PhotoDetailStrapi.fetchData(match);\n    if (data.photoBySlug != null) {\n      this.setState({ photoBySlug: data.photoBySlug });\n    } else {\n      this.setState({ redirect: true });\n    }\n  }\n\n  updateFav = async (user, likedId, action, receiver) => {\n    // TODO: store user.likedPhotos in state, and map favArray from state instead of user object\n    // problem: user.likedPhotos is not updated\n    const query = `\n      mutation updateUser($input:updateUserInput) {\n        updateUser(input: $input) {\n          user {\n            likedPhotos {\n              id\n            }\n          }\n        }\n      }`;\n\n    let favArray = user.likedPhotos.map((fav) => fav.id);\n\n    if (action === \"add\") {\n      if (!favArray.includes(likedId)) {\n        favArray.push(likedId);\n        await CreateNotification(user.id, receiver, \"like\", likedId);\n      } else {\n        // already in favourites\n        return;\n      }\n    } else if (action === \"remove\") {\n      if (favArray.includes(likedId)) {\n        // likedId is in array, so remove it from array\n        const index = favArray.indexOf(likedId);\n        if (index > -1) {\n          favArray.splice(index, 1);\n        }\n      } else {\n        // not in favourites\n        return;\n      }\n    }\n\n    const variables = {\n      input: {\n        where: {\n          id: user.id,\n        },\n        data: {\n          likedPhotos: favArray,\n        },\n      },\n    };\n\n    const data = await graphQLFetch(query, variables, true);\n  };\n\n  addComment = async (data, receiver) => {\n    console.log(data, receiver);\n\n    const query = `mutation createPhotoComment($input: createPhotoCommentInput){\n      createPhotoComment(\n        input: $input\n      ) {\n        photoComment {\n          body\n          id\n          parent {\n            id\n          }\n          user {\n            id\n            firstname\n            lastname\n            profilePicture {\n              url\n            }\n            slug\n            username\n          }\n        }\n      }\n    }`;\n\n    let input = { input: data };\n    console.log(input);\n\n    const response = await graphQLFetch(query, input, true, true);\n    console.log(response);\n\n    if (response) {\n      if (!response.errors) {\n        await CreateNotification(\n          data.data.user,\n          receiver,\n          \"comment\",\n          data.data.photo\n        );\n        let _comments = [...this.state.photoBySlug.comments];\n        _comments.push({\n          body: response.createPhotoComment.photoComment.body,\n          id: response.createPhotoComment.photoComment.id,\n          parent: response.createPhotoComment.photoComment.parent,\n          user: response.createPhotoComment.photoComment.user,\n        });\n        this.setState((prevState) => ({\n          photoBySlug: { ...prevState.photoBySlug, comments: _comments },\n        }));\n      } else {\n        console.log(\"an error happened\");\n      }\n    }\n  };\n\n  render() {\n    const { photoBySlug, redirect, isServer } = this.state;\n    if (redirect) {\n      return <Redirect to=\"/niet-gevonden\" />;\n    }\n    if (photoBySlug === null) {\n      return null;\n    } else {\n      console.log(photoBySlug);\n    }\n\n    const { userLocation, userLocationKnown, userMarker } = this.state;\n\n    const position = [\n      photoBySlug.location.latitude,\n      photoBySlug.location.longitude,\n    ];\n    const calculatedUserLocation = userLocation.latitude\n      ? [userLocation.latitude, userLocation.longitude]\n      : null;\n\n    return (\n      <div id=\"page\">\n        <div\n          className=\"w-full flex flex-col justify-center items-center relative bg-black\"\n          style={{\n            height: \"80vh\",\n          }}\n        >\n          <img\n            className=\"px-6 py-6 h-full w-full object-contain\"\n            src={photoBySlug.photo[0].url}\n            alt={photoBySlug.title}\n          />\n\n          {!isServer && (\n            <div className=\"absolute right-0 bottom-0 m-6\">\n              <userContext.Consumer>\n                {(value) => {\n                  if (value.user) {\n                    if (value.user.id === photoBySlug.user.id) {\n                      return;\n                    }\n                    let favourite;\n                    if (\n                      value.user &&\n                      photoBySlug.usersLike.filter(\n                        (favourites) => favourites.id === value.user.id\n                      ).length > 0\n                    ) {\n                      favourite = true;\n                    } else {\n                      favourite = false;\n                    }\n                    return (\n                      <FavButton\n                        favourite={favourite}\n                        updateFav={this.updateFav}\n                        user={value.user}\n                        likedId={photoBySlug.id}\n                        addTitle=\"Toevoegen aan favorieten\"\n                        removeTitle=\"Verwijderen uit favorieten\"\n                        receiver={photoBySlug.user.id}\n                      />\n                    );\n                  }\n                }}\n              </userContext.Consumer>\n            </div>\n          )}\n        </div>\n\n        <div className=\"p-6\">\n          <div className=\"container mx-auto sm:mt-6\">\n            <div className=\"block sm:flex\">\n              <div id=\"photoInfo\" className=\"w-full sm:mr-6 md:mr-12\">\n                <h1 className=\"text-2xl font-bold mb-1 text-gray-800 block\">\n                  {photoBySlug.title}\n                </h1>\n                <p className=\"text-gray-600 mb-6\">{photoBySlug.desc}</p>\n\n                <hr />\n\n                <PhotoComment\n                  comments={photoBySlug.comments}\n                  photoId={photoBySlug.id}\n                  addComment={this.addComment}\n                  receiver={photoBySlug.user.id}\n                />\n              </div>\n\n              <div className=\"w-full\">\n                <div className=\"relative block sm:flex sm:items-center sm:w-full\">\n                  <Link\n                    className=\"top-0 left-0 h-full w-full absolute\"\n                    to={`/fotograaf/${photoBySlug.user.slug}`}\n                  />\n                  <div className=\"mx-auto sm:mx-0 mb-2 sm:mr-4\">\n                    <UserProfilePicture profile={photoBySlug.user} />\n                  </div>\n                  <h1 className=\"font-bold text-xl leading-tight\">\n                    {photoBySlug.user.username}\n                  </h1>\n                </div>\n\n                <div className=\"my-4\">\n                  {photoBySlug.camera && (\n                    <div className=\"flex items-center mb-3\">\n                      <div className=\"mr-2\">\n                        <IoCameraOutline className=\"text-2xl\" />\n                      </div>\n                      <div>{photoBySlug.camera}</div>\n                    </div>\n                  )}\n                  {(photoBySlug.focalLength ||\n                    photoBySlug.aperture ||\n                    photoBySlug.iso ||\n                    photoBySlug.shutterspeed) && (\n                    <div className=\"flex items-center\">\n                      <div className=\"mr-2\">\n                        <GoSettings className=\"text-2xl\" />\n                      </div>\n                      {photoBySlug.focalLength && (\n                        <div className=\"mr-2\">{photoBySlug.focalLength}</div>\n                      )}\n                      {photoBySlug.aperture && (\n                        <div className=\"mr-2\">{photoBySlug.aperture}</div>\n                      )}\n                      {photoBySlug.iso && (\n                        <div className=\"mr-2\">{photoBySlug.iso}</div>\n                      )}\n                      {photoBySlug.shutterspeed && (\n                        <div className=\"mr-2\">{photoBySlug.shutterspeed}</div>\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                <Link to={`/fotolocatie/${photoBySlug.location.slug}`}>\n                  <h2>{photoBySlug.location.title}</h2>\n                </Link>\n                <Map\n                  className=\"map\"\n                  id=\"photoLocation\"\n                  center={position}\n                  zoom={this.state.zoom}\n                >\n                  <TileLayer\n                    attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                  />\n                  <Marker position={position}>\n                    <Popup>Foto locatie</Popup>\n                  </Marker>\n                  {userLocationKnown && (\n                    <Marker position={calculatedUserLocation} icon={userMarker}>\n                      <Popup>Jouw locatie</Popup>\n                    </Marker>\n                  )}\n                </Map>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component, useState, useEffect } from \"react\";\nimport graphQLFetch from \"./graphQLFetch.js\";\nimport store from \"./store.js\";\nimport { FiEdit2, FiPlus } from \"react-icons/fi\";\nimport { MdEdit } from \"react-icons/md\";\nimport { TiLocation } from \"react-icons/ti\";\nimport { userContext } from \"./services/userContext.js\";\nimport { PhotoView } from \"./PhotoCarousel.jsx\";\nimport { Link } from \"react-router-dom\";\nimport FollowButton from \"./components/followButton.jsx\";\nimport useConstructor from \"./components/ConstructorHook.jsx\";\nimport UserProfilePicture from \"./components/UserProfilePicture.jsx\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport CreateNotification from \"./components/CreateNotification.jsx\";\nimport LocationCard from \"./components/LocationCards.jsx\";\n\nconst UserProfile = (props) => {\n  const [profile, setProfile] = useState(null);\n  const history = useHistory();\n\n  const getInitialProfile = async (props) => {\n    let _profile = store.initialData ? store.initialData : null;\n    delete store.initialData;\n    if (!_profile) {\n      _profile = await UserProfile.fetchData(props.match);\n    }\n    setProfile(_profile);\n  };\n\n  const getProfile = async () => {\n    const _profile = await UserProfile.fetchData(props.match);\n    setProfile(_profile);\n  };\n\n  useConstructor(() => {\n    getInitialProfile(props);\n  });\n\n  useEffect(() => {\n    getProfile();\n  }, [props]);\n\n  const updateFollow = async (followId) => {\n    //console.log(followId);\n    const query = `\n      mutation updateUser($input:updateUserInput) {\n        updateUser(input: $input) {\n          user {\n            followers {\n              id\n            }\n          }\n        }\n      }`;\n\n    let profileFollowersArray = profile.followers.map(\n      (following) => following.id\n    );\n\n    //console.log(\"before adjusting\", profileFollowersArray);\n    let action;\n    // if the id that is being followed is not already in the array, add it\n    if (!profileFollowersArray.includes(followId)) {\n      profileFollowersArray.push(followId);\n      action = \"add\";\n    } else if (profileFollowersArray.includes(followId)) {\n      // followId is in array, so remove it from array\n      const index = profileFollowersArray.indexOf(followId);\n      if (index > -1) {\n        profileFollowersArray.splice(index, 1);\n      }\n      action = \"remove\";\n    }\n\n    //console.log(\"after adjusting\", profileFollowersArray);\n\n    const variables = {\n      input: {\n        where: {\n          id: profile.id,\n        },\n        data: {\n          followers: profileFollowersArray,\n        },\n      },\n    };\n\n    let prevProfile = { ...profile };\n    let _profile = { ...profile };\n\n    let newFollowArray = profileFollowersArray.map((following) => {\n      return { id: following };\n    });\n\n    _profile.followers = newFollowArray;\n    setProfile(_profile);\n\n    const data = await graphQLFetch(query, variables, true, true);\n\n    if (data) {\n      if (data.errors) {\n        console.log(\"an error happened\");\n        setProfile(prevProfile);\n      } else {\n        if (action === \"add\") {\n          await CreateNotification(followId, profile.id, \"follow\");\n        }\n      }\n    }\n  };\n\n  const deletePhoto = async (index) => {\n    const query = `mutation photoDelete($input:deletePhotoInput) {\n      deletePhoto(input: $input) {\n        photo {\n          id\n        }\n      }\n    }`;\n\n    const prevProfile = { ...profile };\n\n    const { photos } = profile;\n    const newList = [...photos];\n    newList.splice(index, 1);\n    const _profile = { ...profile };\n    _profile.photos = newList;\n    setProfile(_profile);\n\n    // get the id of the photo to be deleted\n    const { id } = photos[index];\n\n    const variables = {\n      input: {\n        where: {\n          id,\n        },\n      },\n    };\n\n    // execute the query\n    const data = await graphQLFetch(query, variables, true, true);\n\n    if (data) {\n      if (data.errors) {\n        console.log(\"an error happened\");\n        setProfile(prevProfile);\n      }\n    }\n  };\n\n  return (\n    <userContext.Consumer>\n      {(value) => {\n        //console.log(\"value\", value);\n        if (value.user) {\n          return (\n            <UserProfileComponent\n              curUser={value.user}\n              profile={profile}\n              updateFollow={updateFollow}\n              deletePhoto={deletePhoto}\n            />\n          );\n        } else {\n          return (\n            <UserProfileComponent\n              curUser={null}\n              profile={profile}\n              updateFollow={updateFollow}\n              deletePhoto={deletePhoto}\n            />\n          );\n        }\n      }}\n    </userContext.Consumer>\n  );\n};\n\nexport default UserProfile;\n\nUserProfile.fetchData = async (match, search, showError) => {\n  console.log(match);\n\n  const query = `query profile($slug: String!) {\n          users( where: { slug: $slug } ) {\n            username\n            profilePicture {\n              url\n            }\n            email\n            id\n            slug\n            location\n            followers{\n              id\n            }\n            followings {\n              id\n            }\n            favouriteLocations {\n              id\n              title\n              slug\n              location_categories {\n                id\n                label\n              }\n              photos {\n                likes\n                photo {\n                  url\n                  \n                }\n              }\n            }\n            photos {\n              likes\n              id\n              title\n              slug\n              location {\n                longitude\n                latitude\n                id\n                title\n                slug\n              }\n              photo {\n                id\n                name\n                url\n              }\n            }\n          }\n        }`;\n\n  let {\n    params: { slug },\n  } = match;\n  const result = await graphQLFetch(query, { slug }, true);\n  return result.users[0];\n};\n\nconst UserProfileComponent = (props) => {\n  const { curUser, profile, updateFollow, deletePhoto } = props;\n  if (profile === null) {\n    console.log(\"return null from render\");\n    return null;\n  }\n\n  const [isServer, setIsServer] = useState(true);\n\n  useEffect(() => {\n    setIsServer(false);\n  }, []);\n\n  //console.log(\"curUser\", props);\n\n  const followCount = profile.followers.length;\n  console.log(\n    \"userProfileComponent rendered again, followCount: \",\n    followCount,\n    profile\n  );\n  const filterResult =\n    curUser &&\n    profile.followers.filter((followers) => followers.id === curUser.id);\n  //console.log(filterResult);\n  const followsUser = curUser\n    ? profile.followers.filter((followers) => followers.id === curUser.id)\n        .length > 0\n    : 0;\n\n  let numberOfLikes = 0;\n  if (profile.photos.length > 0) {\n    for (let i = 0; i < profile.photos.length; i++) {\n      numberOfLikes = numberOfLikes + profile.photos[i].likes;\n    }\n  }\n  console.log(profile);\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"container\">\n        <div className=\"sm:flex sm:items-center\">\n          <div className=\"block sm:flex sm:items-center sm:w-full\">\n            <div className=\"mx-auto sm:mx-0 mb-2 sm:mr-4\">\n              <UserProfilePicture profile={profile} />\n            </div>\n            <div className=\"sm:w-full\">\n              <h1 className=\"font-bold text-xl leading-tight text-center sm:text-left\">\n                {profile.username}\n              </h1>\n              <div className=\"\">\n                <p className=\"flex items-center text-gray-400 text-sm text-center justify-center sm:justify-start\">\n                  <TiLocation />\n                  &nbsp;\n                  {profile.location}\n                </p>\n              </div>\n\n              <div className=\"hidden sm:block\">\n                <div className=\"flex justify-between sm:justify-start mt-2 w-full\">\n                  <p className=\"mr-2 text-center sm:mr-3\">\n                    <span className=\"block sm:inline-block font-bold text-sm sm:mr-1\">\n                      {followCount}\n                    </span>\n                    <span className=\"text-gray-500 text-sm\">\n                      {followCount === 1 ? \"volger\" : \"volgers\"}\n                    </span>\n                  </p>\n                  <p className=\"mr-2 text-center sm:mr-3\">\n                    <span className=\"block sm:inline-block font-bold text-sm sm:mr-1\">\n                      {profile.followings.length}\n                    </span>\n                    <span className=\"text-gray-500 text-sm\">volgend</span>\n                  </p>\n                  <p className=\"mr-2 text-center sm:mr-3\">\n                    <span className=\"block sm:inline-block font-bold text-sm sm:mr-1\">\n                      {numberOfLikes}\n                    </span>\n                    <span className=\"text-gray-500 text-sm\">likes</span>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {!isServer && curUser && curUser.id !== profile.id && (\n            <FollowButton\n              follow={followsUser}\n              updateFollow={updateFollow}\n              followId={curUser.id}\n            />\n          )}\n          {!isServer && curUser && curUser.id === profile.id && (\n            <Link\n              to={`/profiel/bewerken/${profile.slug}`}\n              className=\"ml-auto my-1 rounded bg-blue-500 hover:bg-blue-600 text-white p-1 sm:p-3 text-xl flex justify-center items-center editProfile\"\n            >\n              <MdEdit />\n            </Link>\n          )}\n\n          <div className=\"sm:hidden\">\n            <div className=\"flex justify-between mt-2\">\n              <p className=\"mr-2 text-center\">\n                <span className=\"block font-bold text-sm\">{followCount}</span>\n                <span className=\"text-gray-500 text-sm\">\n                  {followCount === 1 ? \"volger\" : \"volgers\"}\n                </span>\n              </p>\n              <p className=\"mr-2 text-center\">\n                <span className=\"block font-bold text-sm\">\n                  {profile.followings.length}\n                </span>\n                <span className=\"text-gray-500 text-sm\">volgend</span>\n              </p>\n              <p className=\"mr-2 text-center\">\n                <span className=\"block font-bold text-sm\">{numberOfLikes}</span>\n                <span className=\"text-gray-500 text-sm\">likes</span>\n              </p>\n            </div>\n          </div>\n        </div>\n        <hr className=\"my-3\" />\n        <h2 className=\"my-3\">Foto's</h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n          {profile.photos.map((photo, index) => (\n            <PhotoView\n              key={photo.id}\n              index={index}\n              deletePhoto={\n                !isServer && curUser && curUser.id === profile.id\n                  ? deletePhoto\n                  : null\n              }\n              photo={photo}\n            />\n          ))}\n        </div>\n        <hr className=\"my-3\" />\n        <h2 id=\"fav\" className=\"my-3\">\n          Favoriete locaties\n        </h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n          {profile.favouriteLocations.map((location) => (\n            <LocationCard key={location.id} location={location} />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { Component } from \"react\";\nimport graphQLFetch from \"./graphQLFetch.js\";\nimport store from \"./store.js\";\nimport { FaUserSecret } from \"react-icons/fa\";\nimport Form from \"./Form.jsx\";\nimport { AiOutlineLoading3Quarters } from \"react-icons/ai\";\nimport Joi from \"@hapi/joi\";\nimport slugify from \"slugify\";\n\nclass dataEdit extends Form {\n  static async fetchData(match, search, showError) {\n    console.log(match);\n\n    const query = `query data($slug: String!) {\n            users( where: { slug: $slug } ) {\n              username\n\t\t\t        email\n              id\n              firstname\n              lastname\n              location\n              profilePicture {\n                url\n              }\n            }\n          }`;\n\n    let {\n      params: { slug },\n    } = match;\n    console.log(slug);\n    const result = await graphQLFetch(query, { slug }, true);\n    console.log(result);\n    return result;\n  }\n\n  componentDidMount() {\n    const { data } = this.state;\n    if (data === null) {\n      this.loadData();\n    }\n  }\n\n  constructor() {\n    super();\n    console.log(\"store: \", store.initialData);\n    const data = store.initialData ? store.initialData.users[0] : null;\n    console.log(\"data: \", data);\n    delete store.initialData;\n    this.state = {\n      data,\n      errors: {},\n      photoLoading: false,\n      tempFile: null,\n      saving: false,\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log(prevProps);\n    const {\n      match: {\n        params: { slug: prevSlug },\n      },\n    } = prevProps;\n    const {\n      match: {\n        params: { slug },\n      },\n    } = this.props;\n    if (prevSlug !== slug) {\n      this.loadData();\n    }\n  }\n\n  schema = {\n    email: Joi.string()\n      .email({ tlds: { allow: false } })\n      .required()\n      .messages({\n        \"string.empty\": `Vul je je email nog even in? `,\n        \"any.required\": `Vul je je email nog even in? `,\n        \"string.email\": `Vul je een geldig adres in? `,\n        \"any.invalid\": `Dit email adres is al ingebruik.`,\n      }),\n    firstname: Joi.string().required().messages({\n      \"string.empty\": `Vul je je voornaam nog even in? `,\n      \"any.required\": `Vul je je voornaam nog even in? `,\n    }),\n    lastname: Joi.string().required().messages({\n      \"string.empty\": `Vul je je achternaam nog even in? `,\n      \"any.required\": `Vul je je achternaam nog even in? `,\n    }),\n    username: Joi.string().regex(/^\\S*$/).required().messages({\n      \"string.empty\": `Vul je je gebruikersnaam nog even in? `,\n      \"any.required\": `Vul je je gebruikersnaam nog even in? `,\n      \"string.pattern.base\": \"Gebruikersnaam kan geen spaties bevatten\",\n    }),\n    location: Joi.string(),\n  };\n\n  async loadData() {\n    // get the search query string form url\n    const { match } = this.props;\n    // provide the query with the variables\n    const data = await dataEdit.fetchData(match);\n    console.log(\"loaded data: \", data);\n    if (data) {\n      this.setState({ data: data.users[0] });\n    }\n  }\n\n  uploadFile = (file, redirect, newSlug) => {\n    const formData = new FormData();\n\n    formData.append(`files`, file, file.name);\n    formData.append(\"ref\", \"user\");\n    formData.append(\"source\", \"users-permissions\"); // Plugin name.\n    formData.append(\"field\", \"profilePicture\");\n    formData.append(\"refId\", this.state.data.id);\n\n    const request = new XMLHttpRequest();\n    request.open(\"POST\", `http://localhost:1337/upload`);\n    request.send(formData);\n    request.addEventListener(\"load\", redirect(newSlug));\n  };\n\n  async doSubmit(e) {\n    this.setState({ saving: true });\n    const {\n      blob: uploadedFile,\n      data: { username, id: userId },\n    } = this.state;\n\n    const redirect = (slug) => {\n      //if the query returns an id in data, the photo is created\n      // redirect to created photo\n      const doRedirect = () => {\n        const { history } = this.props;\n        history.push({\n          pathname: `/fotograaf/${slug}`,\n        });\n      };\n      setTimeout(doRedirect, 2000);\n      //window.location = `/fotograaf/${slug}`;\n    };\n\n    // update the fields\n    const query = `\n      mutation updateUser($input:updateUserInput) {\n        updateUser(input: $input) {\n          user {\n            slug\n          }\n        }\n      }`;\n\n    const variables = {\n      input: {\n        where: {\n          id: userId,\n        },\n        data: {\n          ...this.state.data,\n        },\n      },\n    };\n\n    delete variables.input.data.profilePicture;\n    delete variables.input.data.id;\n\n    variables.input.data.slug = slugify(username, {\n      replacement: \"-\", // replace spaces with replacement character, defaults to `-`\n      remove: undefined, // remove characters that match regex, defaults to `undefined`\n      lower: true, // convert to lower case, defaults to `false`\n      strict: true, // strip special characters except replacement, defaults to `false`\n    });\n\n    const data = await graphQLFetch(query, variables, true);\n\n    if (data.updateUser) {\n      if (uploadedFile !== null && uploadedFile !== undefined) {\n        console.log(\"in upload file\");\n        this.uploadFile(uploadedFile, redirect, data.updateUser.user.slug);\n      } else {\n        console.log(\"straight to redirect\");\n        redirect(data.updateUser.user.slug);\n      }\n    }\n  }\n\n  photoValidation = (file) => {\n    if (file.size > 27000000) {\n      this.setState((prevState) => ({\n        ...prevState,\n        invalidFields: {\n          ...prevState.invalidFields,\n          blob: \"Selecteer een afbeelding kleiner dan 27MB.\",\n        },\n      }));\n      return;\n    } else {\n      this.setState((prevState) => {\n        const invalidFields = { ...prevState.invalidFields };\n        if (invalidFields.hasOwnProperty(\"blob\")) delete invalidFields[\"blob\"];\n        return { invalidFields };\n      });\n    }\n  };\n\n  onFileChange = async (e) => {\n    const file = e.target.files[0];\n    this.setState({ blob: e.target.files[0] });\n\n    this.photoValidation(file);\n\n    this.setState({\n      photoLoading: true,\n    });\n\n    var reader = new FileReader();\n    reader.onload = () => {\n      this.setState({\n        photoLoading: false,\n        tempFile: URL.createObjectURL(file),\n      });\n    };\n    reader.readAsDataURL(file);\n  };\n\n  removeImage = () => {\n    console.log(\"remove\");\n    this.setState({\n      tempFile: null,\n      photo: {},\n      blob: null,\n    });\n  };\n\n  render() {\n    const { data, photoLoading, tempFile } = this.state;\n    if (data === null) {\n      console.log(\"return null from render\");\n      return null;\n    }\n\n    return (\n      <form\n        name=\"profileEdit\"\n        encType=\"multipart/form-data\"\n        onSubmit={this.handleSubmit}\n      >\n        {photoLoading && (\n          <AiOutlineLoading3Quarters className=\"fill-current text-green-500\" />\n        )}\n\n        <div className=\"p-6\">\n          <div className=\"flex flex-col justify-center items-center mb-4 relative cursor-pointer\">\n            <input\n              type=\"file\"\n              name=\"blob\"\n              ref={this.fileInput}\n              onChange={this.onFileChange}\n              onDrop={this.handleOnDrop}\n              onDragOver={this.handleOnDragOver}\n              onDragLeave={this.handleOnDragLeave}\n              className=\"absolute m-0 p-0 w-full h-full outline-none pointer opacity-0 top-0 left-0\"\n            />\n\n            {tempFile ? (\n              <div\n                id=\"imagePreview\"\n                className=\"relative h-16 w-16 overflow-hidden rounded-full mb-2\"\n              >\n                {/* <div\n                      onClick={this.removeImage}\n                      className=\"border border-gray-600 rounded p-4 m-4 absolute top-0 right-0 cursor-pointer bg-black opacity-50 hover:opacity-100\"\n                    >\n                      <FiTrash2 className=\"stroke-current text-gray-100\" />\n                    </div> */}\n                <img\n                  src={tempFile}\n                  id=\"output_image\"\n                  className=\"w-auto h-16 rounded-full mb-2\"\n                />\n              </div>\n            ) : data.profilePicture !== null &&\n              data.profilePicture !== undefined ? (\n              <div\n                id=\"imagePreview\"\n                className=\"relative h-16 w-16 overflow-hidden rounded-full mb-2\"\n              >\n                <img\n                  className=\"w-auto h-16 rounded-full mb-2\"\n                  src={data.profilePicture.url}\n                ></img>\n              </div>\n            ) : (\n              <div className=\"fill-current h-16 w-16 mr-4 mb-auto text-white bg-gray-500  rounded-full flex items-center justify-center\">\n                <FaUserSecret className=\"text-2xl\" />\n              </div>\n            )}\n\n            <span className=\"font-bold text-blue-500\">\n              Profielfoto veranderen\n            </span>\n          </div>\n\n          <div className=\"flex flex-col w-full\">\n            {this.renderInput(\n              \"username\",\n              \"Gebruikersnaam\",\n              \"Gebruikersnaam\",\n              \"text\"\n            )}\n            {this.renderInput(\"email\", \"Email\", \"Email\", \"text\")}\n            {this.renderInput(\"firstname\", \"Voornaam\", \"Voornaam\", \"text\")}\n            {this.renderInput(\"lastname\", \"Achternaam\", \"Achternaam\", \"text\")}\n            {this.renderInput(\"location\", \"Woonplaats\", \"Woonplaats\", \"text\")}\n          </div>\n          {this.renderButton(\"Profiel opslaan\", this.state.saving)}\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default dataEdit;\n","import React, { useState } from \"react\";\nimport Joi from \"@hapi/joi\";\nimport Form from \"./Form.jsx\";\nimport { NavLink } from \"react-router-dom\";\nimport auth from \"./services/authService\";\nimport axios from \"axios\";\nimport { FaFacebook } from \"react-icons/fa\";\nimport slugify from \"slugify\";\n\nimport Input from \"./Input.jsx\";\nimport { FaSpinner } from \"react-icons/fa\";\n\nconst RegisterForm = () => {\n  const [data, setData] = useState({});\n  const [errors, setErrors] = useState({});\n\n  const schema = {\n    email: Joi.string()\n      .email({ tlds: { allow: false } })\n      .required()\n      .messages({\n        \"string.empty\": `Vul je je email nog even in? `,\n        \"any.required\": `Vul je je email nog even in? `,\n        \"string.email\": `Vul je een geldig adres in? `,\n        \"any.invalid\": `Dit email adres is al ingebruik.`,\n      }),\n    password: Joi.string().required().messages({\n      \"string.empty\": `Vul je je wachtwoord nog even in? `,\n      \"any.required\": `Vul je je wachtwoord nog even in? `,\n    }),\n    firstname: Joi.string().required().messages({\n      \"string.empty\": `Vul je je voornaam nog even in? `,\n      \"any.required\": `Vul je je voornaam nog even in? `,\n    }),\n    lastname: Joi.string().required().messages({\n      \"string.empty\": `Vul je je achternaam nog even in? `,\n      \"any.required\": `Vul je je achternaam nog even in? `,\n    }),\n    username: Joi.string().regex(/^\\S*$/).required().messages({\n      \"string.empty\": `Vul je je gebruikersnaam nog even in? `,\n      \"any.required\": `Vul je je gebruikersnaam nog even in? `,\n      \"string.pattern.base\": \"Gebruikersnaam kan geen spaties bevatten\",\n    }),\n  };\n\n  const doSubmit = () => {\n    // call server\n\n    // redirect user to homepage\n    createUser();\n  };\n\n  const renderButton = (label, disable = false) => {\n    return (\n      <button\n        className={\n          \"w-full mb-2 mt-2 text-white flex items-center justify-center font-bold py-2 px-4 rounded\" +\n          (validate() || Object.keys(errors).length !== 0 || disable\n            ? \" bg-gray-500 hover:bg-gray-600\"\n            : \" bg-blue-500 hover:bg-blue-600\")\n        }\n        type=\"submit\"\n        disabled={validate() || Object.keys(errors).length !== 0 || disable}\n      >\n        {disable ? <FaSpinner className=\"animate-spin\" /> : label}\n      </button>\n    );\n  };\n\n  const handleChange = ({ currentTarget: input }) => {\n    const _errors = { ...errors };\n    const errorMessage = validateProperty(input);\n    if (errorMessage) _errors[input.name] = errorMessage;\n    else delete _errors[input.name];\n\n    const _data = { ...data };\n    _data[input.name] = input.value;\n    setData(_data);\n    setErrors(_errors);\n\n    // setInputs((inputs) => ({ ...inputs, [e.target.name]: e.target.value }));\n  };\n\n  const renderInput = (\n    name,\n    label,\n    placeholder,\n    type = \"text\",\n    classes = \"w-full\",\n    onBlur = () => {}\n  ) => {\n    return (\n      <Input\n        classes={classes}\n        name={name}\n        label={label}\n        value={data[name] || \"\"}\n        onChange={handleChange}\n        placeholder={placeholder}\n        error={errors[name]}\n        type={type}\n        onBlur={onBlur}\n      />\n    );\n  };\n\n  const onInputBlur = async (type) => {\n    // get the email entered\n    const value = data[type];\n\n    // do a query to db to check if email is available\n    let valueObj = {};\n    valueObj[type] = value;\n    const available = await auth.checkAvailability(type, valueObj);\n\n    // if email already exists, add error to email\n    if (!available) {\n      const _errors = { ...errors };\n      const errorMessage = `${\n        type.charAt(0).toUpperCase() + type.slice(1)\n      } is al in gebruik.`;\n      _errors[type] = errorMessage;\n\n      setErrors(_errors);\n\n      // else, email doesnt exists, validate property if there is a correct email and set errors if they exist\n    } else {\n      const _errors = { ...errors };\n      const errorMessage = validateProperty({\n        name: type,\n        value: value,\n      });\n      if (errorMessage) _errors[type] = errorMessage;\n      else delete _errors[type];\n\n      setErrors(_errors);\n    }\n  };\n\n  const validateProperty = ({ name, value }) => {\n    console.log(name, value);\n    const object = { [name]: value };\n    console.log(schema);\n    const _schema = Joi.object({ [name]: schema[name] });\n    const result = _schema.validate(object);\n    console.log(result);\n    const error = result.error;\n    console.log(\"returning\", error);\n    return error ? error.details[0].message : null;\n  };\n\n  const createUser = async () => {\n    let input = { ...data };\n    input[\"role\"] = \"5eef1a60e3b96d29e2d1d1ac\";\n\n    // check if slug is available, if not, add number\n    input[\"slug\"] = slugify(input.username, {\n      replacement: \"-\", // replace spaces with replacement character, defaults to `-`\n      remove: undefined, // remove characters that match regex, defaults to `undefined`\n      lower: true, // convert to lower case, defaults to `false`\n      strict: true, // strip special characters except replacement, defaults to `false`\n    });\n\n    console.log({ input: input });\n\n    const registered = await auth.register({ input: input });\n\n    if (registered === true) {\n      window.location = \"/\";\n    } else {\n      console.log(registered);\n    }\n  };\n\n  const validate = () => {\n    const options = { abortEarly: false, allowUnknown: true };\n    const schema = Joi.object({ ...schema });\n    const { error } = schema.validate(data, options);\n    console.log(error);\n    if (!error) return null;\n\n    const errors = {};\n    for (let item of error.details) {\n      errors[item.path[0]] = item.message;\n    }\n    return errors;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const errors = validate();\n    setErrors(errors || {});\n    if (errors) return;\n\n    doSubmit();\n  };\n\n  return (\n    <div>\n      <div className=\"block sm:flex\">\n        <form\n          onSubmit={handleSubmit}\n          className=\"bg-white w-full  px-8 md:px-16 pt-6 md:py-12 flex flex-col\"\n        >\n          <h1 className=\"font-bold mb-6 text-2xl text-green-500 text-center\">\n            Welkom bij Spotshare\n          </h1>\n          <a\n            className=\"py-3 bg-blue-500 rounded text-white flex justify-center items-center hover:pointer hover:bg-blue-600\"\n            href=\"https://d3bdf895b473.ngrok.io/connect/facebook\"\n          >\n            <FaFacebook className=\"mr-2\" /> Registreer met Facebook\n          </a>\n\n          <div className=\"flex my-4 justify-center items-center\">\n            <hr className=\"w-full border-gray-400 mt-0\" />\n            <div className=\"mx-4 text-center text-gray-500\">Of</div>\n            <hr className=\"w-full border-gray-400 mt-0\" />\n          </div>\n\n          <div className=\"flex\">\n            {renderInput(\n              \"firstname\",\n              \"Voornaam\",\n              \"Voornaam\",\n              \"text\",\n              \"w-1/2 mr-2\"\n            )}\n            {renderInput(\n              \"lastname\",\n              \"Achternaam\",\n              \"Achternaam\",\n              \"text\",\n              \"w-1/2\"\n            )}\n          </div>\n\n          {renderInput(\n            \"username\",\n            \"Gebruikersnaam\",\n            \"Gebruikersnaam\",\n            \"text\",\n            \"w-full\",\n            () => {\n              onInputBlur(\"username\");\n            }\n          )}\n          {renderInput(\"email\", \"Email\", \"Emailadres\", \"text\", \"w-full\", () => {\n            onInputBlur(\"email\");\n          })}\n          {renderInput(\n            \"password\",\n            \"Wachtwoord\",\n            \"Vul je wachtwoord in\",\n            \"password\"\n          )}\n\n          <div className=\"flex items-center justify-between\">\n            {renderButton(\"Kom bij de club!\")}\n          </div>\n          <div className=\"flex justify-center itemst-center w-full\">\n            <span className=\"text-gray-600 text-center text-sm mr-2 block\">\n              Heb je al een account?\n            </span>\n\n            <NavLink\n              className=\"block align-baseline font-bold text-sm text-blue-500 hover:text-blue-600\"\n              to=\"/inloggen\"\n            >\n              Inloggen\n            </NavLink>\n          </div>\n        </form>\n\n        <div className=\"w-full\">\n          <div\n            className=\"w-full h-full\"\n            style={{\n              backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3)), url(https://picsum.photos/1500/1500)`,\n              backgroundSize: `cover`,\n              backgroundPosition: `center center`,\n            }}\n          ></div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterForm;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { findNearbyLocations } from \"../FindNearbyLocations.jsx\";\n/* to support IE */\nimport store from \"../../store.js\";\nimport useConstructor from \"../ConstructorHook.jsx\";\nimport ResultMap from \"../Results/ResultMap.jsx\";\nimport CategorieFilter from \"../Results/CategorieFilter.jsx\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport graphQLFetch from \"../../graphQLFetch.js\";\nimport LocationList from \"../Results/LocationList.jsx\";\n\nconst LocationsPerCategorie = (props) => {\n  const [locations, setLocations] = useState();\n  const [filteredLocations, setFilteredLocations] = useState({});\n  const [selectedLocation, setSelectedLocation] = useState();\n  const [showMap, setShowMap] = useState(false);\n\n  let history = useHistory();\n  let location = useLocation();\n\n  useEffect(() => {\n    !locations && getLocations();\n\n    const _activeFilter = getActiveFilter();\n\n    if (locations) {\n      const _filteredLocations = locations.filter((location) => {\n        const include = location.location_categories.filter((categorie) => {\n          if (categorie.id === _activeFilter) {\n            return true;\n          } else {\n            return false;\n          }\n        });\n        //console.log(location.id, include);\n        if (include.length > 0) return true;\n      });\n      setFilteredLocations(_filteredLocations);\n    }\n    //console.log(_filteredLocations);\n  }, [location]);\n\n  const getLocations = async () => {\n    let _locations = store.initialData ? store.initialData : null;\n    console.log(store.initialData, _locations);\n    delete store.initialData;\n    if (!_locations) {\n      console.log(\"getting locations\");\n      _locations = await LocationsPerCategorie.fetchData(\n        props.match,\n        location.search\n      );\n    }\n    setLocations(_locations.filter((location) => location.photos.length > 0));\n    console.log(_locations);\n  };\n\n  const getActiveFilter = () => {\n    const params = new URLSearchParams(location.search);\n\n    const _activeFilter = params.get(\"categorie\")\n      ? params.get(\"categorie\")\n      : \"\";\n\n    if (_activeFilter) {\n      return _activeFilter;\n    } else {\n      return false;\n    }\n  };\n\n  useConstructor(() => {\n    const _activeFilter = getActiveFilter();\n    if (_activeFilter) {\n      setActiveFilter(_activeFilter);\n    }\n    getLocations();\n    setShowMap(true);\n  });\n\n  const selectLocation = (locationId) => {\n    setSelectedLocation(locationId);\n  };\n\n  return (\n    <div className=\"relative h-screen\">\n      <div className=\"flex h-full\">\n        <div className=\"w-full p-4 h-screen overflow-scroll\">\n          <h1>Resultaten</h1>\n          {/* <div className=\"mb-2 flex\">\n            <span className=\"mr-2\">Filter op categorie:</span>\n            {locations &&\n              (filteredLocations.length > 0 ? (\n                <CategorieFilter\n                  active={activeFilter}\n                  onFilterChange={onFilterChange}\n                  categories={filteredLocations.map((location) => {\n                    return location.location_categories;\n                  })}\n                />\n              ) : (\n                <CategorieFilter\n                  active={activeFilter}\n                  onFilterChange={onFilterChange}\n                  categories={locations.map((location) => {\n                    return location.location_categories;\n                  })}\n                />\n              ))}\n          </div> */}\n          {locations &&\n            (filteredLocations.length > 0\n              ? filteredLocations.map((location) => (\n                  <div key={location.id} className=\"w-full\">\n                    <LocationList\n                      size=\"large\"\n                      location={location}\n                      key={location.id}\n                      active={selectedLocation === location.id ? true : false}\n                      selectLocation={selectLocation}\n                    />\n                  </div>\n                ))\n              : locations.map((location) => (\n                  <div key={location.id} className=\"w-full\">\n                    <LocationList\n                      size=\"large\"\n                      location={location}\n                      key={location.id}\n                      active={selectedLocation === location.id ? true : false}\n                      selectLocation={selectLocation}\n                    />\n                  </div>\n                )))}\n        </div>\n\n        <div className=\"mb-10 w-full h-full\">\n          {showMap &&\n            locations &&\n            (filteredLocations.length > 0 ? (\n              <ResultMap\n                locations={filteredLocations}\n                selectLocation={selectLocation}\n                active={selectedLocation}\n              />\n            ) : (\n              <ResultMap\n                locations={locations}\n                selectLocation={selectLocation}\n                active={selectedLocation}\n              />\n            ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LocationsPerCategorie;\n\nLocationsPerCategorie.fetchData = async (match, search, showError) => {\n  // test URL; http://localhost:8000/fotolocaties/resultaten?lng=52.379189&lat=4.899431\n  // use URLSearchParams for IE Compatibility\n\n  console.log(match);\n\n  let {\n    params: { value },\n  } = match;\n\n  console.log(value);\n\n  const query = `query locationCategorie($value:String!){\n    locationCategories(where:{value: $value}) {\n      label\n    value\n    locations {\n      id\n      title\n      longitude\n      latitude\n      slug\n      location_categories {\n        label\n        value\n        locations {\n          title\n        }\n      }\n      photos {\n            id\n            likes\n            title\n            slug\n            photo {\n                url \n            }\n        }\n    }\n  }\n  }`;\n\n  const data = await graphQLFetch(query, { value }, true);\n  if (data) {\n    console.log(data.locationCategories[0].locations);\n  }\n\n  return data.locationCategories[0].locations;\n\n  // const params = new URLSearchParams(search);\n\n  // console.log(\"fetching data\");\n\n  // const vars = {};\n  // if (params.get(\"lat\")) vars.lat = params.get(\"lat\");\n  // if (params.get(\"lng\")) vars.lng = params.get(\"lng\");\n  // //vars.cat = params.get(\"categorie\") ? params.get(\"categorie\") : \"\";\n\n  // console.log(vars);\n\n  // const _locations = await findNearbyLocations(vars.lat, vars.lng);\n\n  // console.log(_locations);\n\n  // return _locations;\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Comment } from \"./RecursiveComment.jsx\";\nimport ReplyBox from \"./ReplyBox.jsx\";\n\nconst PhotoComment = ({ comments, photoId, addComment, receiver }) => {\n  const [unflattenedComments, setUnflattenedComments] = useState([]);\n\n  useEffect(() => {\n    setUnflattenedComments(unflatten(comments));\n  }, [comments]);\n\n  const unflatten = (arr) => {\n    var tree = [],\n      mappedArr = {},\n      arrElem,\n      mappedElem;\n\n    // First map the nodes of the array to an object -> create a hash table.\n    for (var i = 0, len = arr.length; i < len; i++) {\n      arrElem = arr[i];\n      mappedArr[arrElem.id] = arrElem;\n      mappedArr[arrElem.id][\"children\"] = [];\n    }\n\n    for (var id in mappedArr) {\n      if (mappedArr.hasOwnProperty(id)) {\n        mappedElem = mappedArr[id];\n        // If the element is not at the root level, add it to its parent array of children.\n        if (mappedElem.parent) {\n          mappedArr[mappedElem.parent.id][\"children\"].push(mappedElem);\n        }\n        // If the element is at the root level, add it to first level elements array.\n        else {\n          tree.unshift(mappedElem);\n        }\n      }\n    }\n    return tree;\n  };\n\n  return (\n    <>\n      <ReplyBox photoId={photoId} addComment={addComment} receiver={receiver} />\n\n      <div className=\"\">\n        {unflattenedComments.length\n          ? unflattenedComments.map((item, idx) => {\n              return (\n                <Comment\n                  item={item}\n                  key={idx}\n                  photoId={photoId}\n                  addComment={addComment}\n                  receiver={receiver}\n                />\n              );\n            })\n          : \"\"}\n      </div>\n    </>\n  );\n};\n\nexport default PhotoComment;\n","import React, { Fragment, useState, useEffect } from \"react\";\nimport { FaUserSecret } from \"react-icons/fa\";\nimport ReplyBox from \"./ReplyBox.jsx\";\n\nexport const Comment = ({ item, idx, photoId, addComment, receiver }) => {\n  const [showReplyBox, setShowReplyBox] = useState(false);\n\n  const replyClick = () => {\n    setShowReplyBox(!showReplyBox);\n  };\n\n  const closeReplyBox = () => {\n    setShowReplyBox(false);\n  };\n\n  return (\n    <Fragment key={idx}>\n      <div className=\"comment mb-2\">\n        <div>\n          <div className=\"flex\">\n            {item.user.profilePicture !== null ? (\n              <img\n                src={item.user.profilePicture.url}\n                className=\"rounded-full w-12 h-12 mr-4\"\n              />\n            ) : (\n              <div\n                id=\"imagePreview\"\n                className=\"relative h-12 w-12 overflow-hidden rounded-full mr-4\"\n              >\n                <div className=\"fill-current h-12 w-12  mb-auto text-white bg-gray-500  rounded-full flex items-center justify-center\">\n                  <FaUserSecret className=\"text-2xl\" />\n                </div>\n              </div>\n            )}\n            <div className=\"rounded px-3 py-2 bg-gray-100\">\n              <p>{item.body}</p>\n              <span\n                className=\"block text-blue-500 text-xs cursor-pointer\"\n                onClick={replyClick}\n              >\n                Beantwoorden\n              </span>\n            </div>\n          </div>\n          {showReplyBox ? (\n            <ReplyBox\n              replyTo={item.id}\n              photoId={photoId}\n              addComment={addComment}\n              closeBoxHandler={closeReplyBox}\n              receiver={receiver}\n            />\n          ) : null}\n        </div>\n        {item.children && item.children.length > 0 && (\n          <div className=\"ml-10 mt-2\">\n            {item.children.map((item, idx) => {\n              return (\n                <Comment\n                  item={item}\n                  key={idx}\n                  photoId={photoId}\n                  addComment={addComment}\n                  receiver={receiver}\n                />\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </Fragment>\n  );\n};\n","import React, { useState } from \"react\";\nimport { userContext } from \"../../services/userContext.js\";\nimport { Link } from \"react-router-dom\";\n\nconst ReplyBox = ({\n  replyTo = null,\n  photoId,\n  addComment,\n  closeBoxHandler,\n  receiver,\n}) => {\n  const [commentValue, setCommentValue] = useState(\"\");\n\n  const onChange = (event) => setCommentValue(event.target.value);\n\n  const post = (userId) => {\n    const data = {\n      body: commentValue,\n      photo: photoId,\n      user: userId,\n      parent: replyTo,\n    };\n    let input = {};\n    input[\"data\"] = data;\n    addComment(input, receiver);\n    closeBoxHandler && closeBoxHandler();\n    setCommentValue(\"\");\n  };\n\n  return (\n    <>\n      <userContext.Consumer>\n        {(value) => {\n          if (value.user) {\n            return (\n              <div className=\"flex mb-6\">\n                <div className=\"w-full\">\n                  <div className=\"flex flex-wrap -mx-3\">\n                    <h2 className=\"px-4 pt-3 pb-2 text-gray-800 text-lg\">\n                      Reactie plaatsen\n                    </h2>\n                    <div className=\"w-full md:w-full px-3 mb-2 mt-2\">\n                      <textarea\n                        className=\"bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white\"\n                        name=\"body\"\n                        placeholder=\"Je bericht\"\n                        required\n                        value={commentValue}\n                        onChange={onChange}\n                      ></textarea>\n                    </div>\n                    <div className=\"w-full md:w-full flex items-start md:w-full px-3\">\n                      <div className=\"-mr-1\">\n                        <input\n                          type=\"submit\"\n                          className=\"bg-white text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100\"\n                          value=\"Plaatsen\"\n                          onClick={() => {\n                            post(value.user.id);\n                          }}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          } else {\n            return (\n              <div className=\"p-4 mt-4 mb-6 bg-blue-100 rounded border border-blue-200 text-blue-400\">\n                <Link\n                  to=\"/inloggen\"\n                  className=\"font-bold text-blue-400 hover:text-blue-500\"\n                >\n                  Login\n                </Link>{\" \"}\n                om een reactie te plaatsen\n              </div>\n            );\n          }\n        }}\n      </userContext.Consumer>\n    </>\n  );\n};\n\nexport default ReplyBox;\n","import { useRef } from \"react\";\n\nconst useConstructor = (callBack = () => {}) => {\n  const hasBeenCalled = useRef(false);\n  if (hasBeenCalled.current) return;\n  callBack();\n  hasBeenCalled.current = true;\n};\n\nexport default useConstructor;\n","import graphQLFetch from \"../graphQLFetch\";\n\nconst CreateNotification = async (giver, receiver, action, photo) => {\n  const query = `mutation createNotification($input:createNotificationInput!) {\n        createNotification(input:$input) {\n          notification {\n            id\n          }\n        }\n      }`;\n\n  let input = { data: {} };\n  input.data.giver = giver;\n  input.data.receiver = receiver;\n  input.data.action = action;\n  if (photo) input.data.photo = photo;\n\n  const result = await graphQLFetch(query, { input }, true);\n};\n\nexport default CreateNotification;\n","import React from \"react\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport { Link } from \"react-router-dom\";\n\nconst CategorieList = ({ categories }) => {\n  console.log(categories);\n\n  return (\n    <div className=\"\">\n      <h2 className=\"text-black mb-2\">Zoek locatie op categorie</h2>\n      <div className=\"flex flex-wrap\">\n        {categories &&\n          categories\n            .filter((categorie) => categorie.value != \"\")\n            .map((categorie) => (\n              <CategorieLabel categorie={categorie} key={categorie.value} />\n            ))}\n      </div>\n    </div>\n  );\n};\n\nexport default CategorieList;\n\nconst CategorieLabel = ({ categorie: { label, value } }) => {\n  return (\n    <Link\n      to={`/fotolocaties/categorie/${value}`}\n      className=\"block py-2 px-4 rounded-full mr-2 mb-2 bg-green-100 text-green-400 font-bold hover:bg-green-200 hover:text-green-500\"\n    >\n      {label}\n    </Link>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport Heading from \"./Heading.jsx\";\nimport LocationsNearby from \"./LocationsNearby.jsx\";\nimport CategorieList from \"./CategorieList.jsx\";\nimport graphQLFetch from \"../../graphQLFetch.js\";\nimport store from \"../../store.js\";\nimport { userContext } from \"../../services/userContext.js\";\nimport { Redirect, Link, useRouteMatch } from \"react-router-dom\";\nimport useConstructor from \"../ConstructorHook.jsx\";\nimport MostRecent from \"./MostRecent.jsx\";\nimport UserProfilePicture from \"../UserProfilePicture.jsx\";\nimport { FaHome, FaBookmark, FaPlus } from \"react-icons/fa\";\nimport { IoNotifications } from \"react-icons/io5\";\nimport { FiLogOut } from \"react-icons/fi\";\nimport NotificationBoard from \"./NotificationBoard.jsx\";\n\nconst Dashboard = (props) => {\n  const [categories, setCategories] = useState();\n  const [showNotifications, setShowNotifications] = useState();\n  const match = useRouteMatch();\n\n  const getCategories = async () => {\n    console.log({ match });\n    let _categories = store.initialData ? store.initialData : null;\n    delete store.initialData;\n    if (!_categories) {\n      _categories = await Dashboard.fetchData();\n    }\n    setCategories(_categories);\n  };\n\n  useConstructor(() => {\n    getCategories();\n  });\n\n  const redirect = (slug) => {\n    props.history.push(slug);\n  };\n\n  return (\n    <userContext.Consumer>\n      {(value) => {\n        return !value.user ? (\n          <Redirect to=\"/\" />\n        ) : (\n          <React.Fragment>\n            <div className=\"block md:flex mt-8\">\n              <div className=\"w-full md:w-1/4 px-8\">\n                <div className=\"flex items-center\">\n                  <div className=\"mr-4\">\n                    <UserProfilePicture profile={value.user} size={10} />\n                  </div>\n                  <h1 className=\"font-bold text-xl leading-tight text-center sm:text-left\">\n                    {value.user.username}\n                  </h1>\n                </div>\n                <ul className=\"mt-6\">\n                  <li\n                    className={`block py-3 flex items-center ${\n                      !showNotifications\n                        ? `text-blue-500 font-bold`\n                        : `text-gray-900 hover:text-blue-500 hover:font-bold`\n                    }`}\n                    onClick={() => setShowNotifications(false)}\n                  >\n                    <FaHome className=\"mr-2\" />\n                    <span>Dashboard</span>\n                  </li>\n                  <li>\n                    <Link\n                      className=\"block py-3 text-gray-900 hover:text-blue-500 hover:font-bold flex items-center\"\n                      to={`/fotograaf/${value.user.slug}#fav`}\n                    >\n                      <FaBookmark className=\"mr-2\" />\n                      <span>Opgeslagen locaties</span>\n                    </Link>\n                  </li>\n                  <li>\n                    <Link\n                      className=\"block py-3 text-gray-900 hover:text-blue-500 hover:font-bold flex items-center\"\n                      to=\"/foto/toevoegen\"\n                    >\n                      <FaPlus className=\"mr-2\" />\n                      <span>Foto uploaden</span>\n                    </Link>\n                  </li>\n                  <li>\n                    <span\n                      className={`block py-3 flex items-center ${\n                        showNotifications\n                          ? `text-blue-500 font-bold`\n                          : `text-gray-900 hover:text-blue-500 hover:font-bold`\n                      }`}\n                      onClick={() => setShowNotifications(true)}\n                    >\n                      <IoNotifications className=\"mr-2\" />\n                      <span>Berichten</span>\n                    </span>\n                  </li>\n                  <li>\n                    <Link\n                      className=\"block py-3 text-gray-900 hover:text-blue-500 hover:font-bold border-t border-gray-200 pt-6 mt-6 flex items-center\"\n                      to=\"\"\n                    >\n                      <FiLogOut className=\"mr-2\" />\n                      <span>Uitloggen</span>\n                    </Link>\n                  </li>\n                </ul>\n              </div>\n\n              <div className=\"w-full md:w-1/2\">\n                {showNotifications ? (\n                  <NotificationBoard user={value.user} />\n                ) : (\n                  <>\n                    <Heading redirect={redirect} />\n                    <MostRecent />\n                  </>\n                )}\n              </div>\n\n              <div className=\"w-full md:w-1/4  px-8\">\n                <LocationsNearby />\n                <CategorieList categories={categories} />\n              </div>\n            </div>\n          </React.Fragment>\n        );\n      }}\n    </userContext.Consumer>\n  );\n};\n\nexport default Dashboard;\n\nDashboard.fetchData = async (match, search, showError) => {\n  // build the graphql query\n  const query = `query {\n\t\tlocationCategories{\n\t\t  label\n      value\n      locations {\n        id\n      }\n\t\t}\n\t  }`;\n\n  const vars = {};\n  const { locationCategories: result } = await graphQLFetch(query, vars, true);\n\n  // only return categories with available locations\n  return result.filter((cat) => cat.locations.length > 0);\n};\n","import React, { useState, useEffect } from \"react\";\nimport { userContext } from \"../../services/userContext\";\nimport SearchBox from \"./SearchBox.jsx\";\n\nconst Heading = (props) => {\n  const [greeting, setGreeting] = useState();\n\n  useEffect(() => {\n    var myDate = new Date();\n    var hrs = myDate.getHours();\n\n    if (hrs < 12) setGreeting(\"Goedemorgen\");\n    else if (hrs >= 12 && hrs <= 17) setGreeting(\"Goedemiddag\");\n    else if (hrs >= 17 && hrs <= 24) setGreeting(\"Goedenavond\");\n  }, []);\n\n  const personalHeading = (name) => (\n    <h1 className=\"mb-4 text-white\">\n      <div className=\"text-3xl mb-4\">\n        {greeting} {name}!\n      </div>\n      <div>\n        Zoek je volgende <span className=\"text-green-500\">fotolocatie</span>.\n      </div>\n    </h1>\n  );\n\n  return (\n    <div className=\"\">\n      <div className=\"pb-8 pt-6  text-center rounded bg-gray-900 mb-6\">\n        <userContext.Consumer>\n          {(value) =>\n            !value.user ? (\n              <h1 className=\"mb-4 text-white\">\n                De mooiste fotolocaties, gewoon bij jou in de buurt.\n              </h1>\n            ) : (\n              personalHeading(\n                value.user.firstname\n                  ? value.user.firstname\n                  : value.user.username\n              )\n            )\n          }\n        </userContext.Consumer>\n\n        <SearchBox redirect={props.redirect} />\n      </div>\n    </div>\n  );\n};\n\nexport default Heading;\n","import React, { useEffect, useState } from \"react\";\nimport { findNearbyLocations } from \"../FindNearbyLocations.jsx\";\nimport { LocationHashtag } from \"../LocationCards.jsx\";\n// Import Swiper React components\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport { Link } from \"react-router-dom\";\nimport Img from \"react-cool-img\";\n\nconst LocationsNearby = () => {\n  const [locations, setLocations] = useState();\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async (match, search, showError) => {\n    // get users position\n    var options = {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 0,\n    };\n\n    const success = async (pos) => {\n      console.log(\"succes\");\n      var crd = pos.coords;\n      const _locations = await findNearbyLocations(crd.latitude, crd.longitude);\n      setLocations(_locations);\n    };\n\n    const error = async (err) => {\n      console.log(\"err\");\n      fetch(\"https://ipapi.co/json\")\n        .then((res) => res.json())\n        .then(async (location) => {\n          const _locations = await findNearbyLocations(\n            location.latitude,\n            location.longitude\n          );\n          console.log(location, _locations);\n          setLocations(_locations);\n        });\n    };\n\n    navigator.geolocation.getCurrentPosition(success, error, options);\n  };\n\n  return (\n    <div className=\"\">\n      <h2 className=\"text-black mb-4\">Locaties in de buurt</h2>\n\n      {locations &&\n        locations.map((location) => {\n          return (\n            <div\n              key={location.id}\n              className={`overflow-hidden relative rounded shadow hover:shadow-lg transition-shadow duration-500 ease-in-out mb-4`}\n            >\n              <Link\n                className=\"absolute w-full h-full top-0 left-0 z-10\"\n                to={`/fotolocatie/${location.slug}`}\n              ></Link>\n              <div className=\"flex items-center\">\n                <Img\n                  className={`block max-w-none w-20 h-20 object-cover mr-4`}\n                  src={location.photos\n                    .sort((a, b) => b.likes - a.likes)[0]\n                    .photo[0].url.replace(/-original|-watermark/gi, \"-small\")}\n                  alt={`Bekijk locatie ${location.title}`}\n                />\n\n                <div className=\"w-full\">\n                  <h3 className=\"text-black text-sm\">{location.title}</h3>\n                  {location.location_categories.map((category) => (\n                    <LocationHashtag key={category.id} category={category} />\n                  ))}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n    </div>\n  );\n};\n\nexport default LocationsNearby;\n","import React, { useState } from \"react\";\nimport useConstructor from \"../ConstructorHook.jsx\";\nimport store from \"../../store.js\";\nimport graphQLFetch from \"../../graphQLFetch.js\";\nimport SocialCard from \"./SocialCard.jsx\";\n\nconst MostRecent = () => {\n  const [recentPhotos, setRecentPhotos] = useState();\n\n  const getMostRecent = async () => {\n    let _recentPhotos = store.initialData ? store.initialData : null;\n    delete store.initialData;\n    if (!_recentPhotos) {\n      _recentPhotos = await MostRecent.fetchData();\n    }\n    setRecentPhotos(_recentPhotos);\n  };\n\n  useConstructor(() => {\n    getMostRecent();\n  });\n\n  return (\n    <div className=\"\">\n      <h2>Meest Recent</h2>\n      <div className=\"\">\n        {recentPhotos &&\n          recentPhotos.photos.map((photo) => {\n            return <SocialCard key={photo.id} photo={photo} />;\n          })}\n      </div>\n    </div>\n  );\n};\n\nexport default MostRecent;\n\nMostRecent.fetchData = async (match, search, showError) => {\n  // build the graphql query\n  const query = `query recentPhotos{\n    photos(limit: 6, sort:\"createdAt:desc\") {\ncreatedAt\n      title\n      desc\n      photo {\n          url\n      }\n\n      comments {\n        body\n        user {\n          profilePicture {\n            url\n          }\n          slug\n          username \n        }\n      }\n      slug\n      date\n      brand\n\n      shutterspeed\n      iso\n      aperture\n      camera\n      likes\n      focalLength\nusersLike {\nid\n}\n      location {\n          longitude\n          latitude\n          id\n          title\n          slug\n      }\n      user {\n        id\n        slug\n        username\n        firstname\n        lastname\n        profilePicture {\n            url\n          }\n      }\n    }\n  }`;\n\n  const vars = {};\n  const result = await graphQLFetch(query, vars, true);\n  return result;\n};\n","import React, { useState, useEffect } from \"react\";\nimport UserProfilePicture from \"../UserProfilePicture.jsx\";\nimport { IoIosCloseCircle } from \"react-icons/io\";\nimport graphQLFetch from \"../../graphQLFetch.js\";\nimport { useHistory } from \"react-router-dom\";\n\nconst NotificationBoard = ({ user }) => {\n  const [notifications, setNotifications] = useState();\n\n  useEffect(() => {\n    setNotifications(user.receivedNotifications);\n  }, [user.receivedNotifications]);\n\n  const deleteNotification = async (id) => {\n    const oldNotifications = notifications;\n\n    const _notifications = notifications.filter((notification) => {\n      return notification.id != id;\n    });\n\n    setNotifications(_notifications);\n\n    const query = `mutation deleteNotification($id:ID!){\n        deleteNotification(input: { where: { id: $id } }) {\n          notification {\n            id\n          }\n        }\n      }`;\n\n    let vars = {};\n    vars.id = id;\n\n    const data = await graphQLFetch(query, vars, true);\n    if (!data.deleteNotification.notification) {\n      setNotifications(oldNotifications);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"py-6\" id=\"notifications\">\n        <h1 className=\"text-black pl-6\">Meldingen</h1>\n        {notifications && !notifications.length > 0 ? (\n          <div className=\"my-2 px-6 py-4\">\n            Er zijn geen notificaties voor je!\n          </div>\n        ) : (\n          notifications &&\n          notifications.map((notification) => {\n            return (\n              <Notification\n                key={notification.id}\n                notification={notification}\n                onDeleteNotification={deleteNotification}\n              />\n            );\n          })\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default NotificationBoard;\n\nconst Notification = ({ notification, onDeleteNotification }) => {\n  const { giver, photo } = notification;\n  const history = useHistory();\n\n  const generateText = () => {\n    if (notification.action === \"like\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } vind je foto ${photo.title} leuk`;\n    }\n    if (notification.action === \"comment\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } heeft gereageerd op je foto ${photo.title}`;\n    }\n    if (notification.action === \"follow\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } volgt je nu!`;\n    }\n  };\n\n  const goToPage = () => {\n    if (notification.action === \"like\" || notification.action === \"comment\") {\n      history.push(`/foto/${photo.slug}`);\n    }\n    if (notification.action === \"follow\") {\n      history.push(`/fotograaf/${giver.slug}`);\n    }\n  };\n\n  const deleteNotification = (e) => {\n    e.stopPropagation();\n    onDeleteNotification(notification.id);\n  };\n\n  return (\n    <>\n      <div\n        onClick={goToPage}\n        className=\"flex items-center relative my-2 px-6 py-4 hover:bg-gray-100 cursor-pointer z-10\"\n      >\n        <div className=\"mr-4\">\n          <UserProfilePicture profile={notification.giver} size={8} />\n        </div>\n        <div>{generateText()}</div>\n        <div className=\"ml-auto\" onClick={deleteNotification}>\n          <IoIosCloseCircle className=\"text-gray-500 hover:text-gray-600 text-2xl\" />{\" \"}\n        </div>\n      </div>\n    </>\n  );\n};\n","import React, { useState } from \"react\";\nimport { FaSearch } from \"react-icons/fa\";\nimport { TiLocationArrow } from \"react-icons/ti\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nconst SearchBox = (props) => {\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [formValue, setFormValue] = useState(\"\");\n  let history = useHistory();\n\n  const handleDropdown = (focussed) => {\n    setShowDropdown(focussed);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log(\"submiteed\");\n    console.log(formValue);\n    const urlValue = formValue.trim().replace(/\\s/g, \"%20\");\n\n    const url = `https://nominatim.openstreetmap.org/search/${urlValue}?format=json&addressdetails=1&limit=1`;\n\n    const response = await fetch(url);\n    console.log(response);\n    if (response.ok) {\n      // if HTTP-status is 200-299\n      // get the response body (the method explained below)\n      let json = await response.json();\n      //console.log(json);\n      //\n      if (json.length > 0) {\n        // the entered city can be converted to lat long\n        sessionStorage.getItem(\"prevsettings\") &&\n          sessionStorage.removeItem(\"prevsettings\");\n        props.redirect(\n          `/fotolocaties/resultaten/?lat=${json[0].lat}&lng=${json[0].lon}`\n        );\n      } else {\n        toast.error(\n          \"Het lijkt erop dat je geen geldige locatie hebt ingevuld :-(\"\n        );\n      }\n    } else {\n      alert(\"HTTP-Error: \" + response.status);\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormValue(e.target.value);\n  };\n\n  const searchCurLoc = () => {\n    // get users position\n    var options = {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 0,\n    };\n\n    const success = async (pos) => {\n      var crd = pos.coords;\n\n      sessionStorage.getItem(\"prevsettings\") &&\n        sessionStorage.removeItem(\"prevsettings\");\n\n      props.redirect(\n        `/fotolocaties/resultaten/?lat=${crd.latitude}&lng=${crd.longitude}`\n      );\n    };\n\n    const error = async (err) => {\n      fetch(\"https://ipapi.co/json\")\n        .then((res) => res.json())\n        .then(async (location) => {\n          props.redirect(\n            `/fotolocaties/resultaten/?lat=${location.latitude}&lng=${location.longitude}`\n          );\n        });\n    };\n\n    navigator.geolocation.getCurrentPosition(success, error, options);\n  };\n\n  return (\n    <div className=\"searchBox max-w-md mx-auto\">\n      <form\n        action=\"/fotolocaties/resultaten/\"\n        method=\"get\"\n        id=\"search-locations\"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"relative\">\n          <div className=\"relative\">\n            <input type=\"hidden\" name=\"lat\" id=\"lat\" />\n            <input type=\"hidden\" name=\"lng\" id=\"lng\" />\n\n            <input\n              className=\"rounded border border-gray-300 px-4 py-2 w-full top-0 left-0 focus:rounded-t\"\n              type=\"search\"\n              placeholder=\"Locatie zoeken\"\n              onFocus={() => {\n                handleDropdown(true);\n              }}\n              onBlur={() => {\n                setTimeout(() => {\n                  handleDropdown(false);\n                }, 1000);\n              }}\n              onChange={handleChange}\n            />\n            <FaSearch className=\"absolute top-0 right-0 m-3 fill-current text-gray-500\" />\n          </div>\n          {showDropdown && (\n            <div className=\"dropdown bg-white rounded-b border absolute w-full\">\n              <div className=\"flex justify-center items-center px-4 py-2\">\n                <TiLocationArrow />\n                <span onClick={searchCurLoc}>Gebruik huidige locatie</span>\n              </div>\n            </div>\n          )}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default SearchBox;\n","import React from \"react\";\nimport UserProfilePicture from \"../UserProfilePicture.jsx\";\nimport Img from \"react-cool-img\";\n\nconst SocialCard = ({ photo }) => {\n  return (\n    <div>\n      <div className=\"flex items-center my-4\">\n        <div className=\"mr-2\">\n          <UserProfilePicture profile={photo.user} size={8} />\n        </div>\n        <div>\n          <div className=\"font-bold\">\n            {photo.user && photo.user.firstname}{\" \"}\n            {photo.user && photo.user.lastname}\n          </div>\n          <div className=\"text-xs text-gray-500\">\n            {photo.createdAt.toLocaleString()}\n          </div>\n        </div>\n      </div>\n      <Img\n        className={`rounded block max-w-none w-full h-64 object-cover`}\n        style={{ backgroundColor: \"grey\", width: \"480\", height: \"320\" }}\n        src={photo.photo[0].url.replace(\n          /-original|-watermark|-thumbnail/gi,\n          \"-small\"\n        )}\n        alt={photo.title}\n      />\n    </div>\n  );\n};\n\nexport default SocialCard;\n","import graphQLFetch from \"../graphQLFetch.js\";\n\nexport const findNearbyLocations = async (lat, lng, category) => {\n  // calculate min and max latitudes\n  //echo 'submit';\n  //const lat = this.state.photo.latitude;\n  //const lng = this.state.photo.longitude;\n\n  category && console.log(category);\n\n  lat = parseFloat(lat);\n  lng = parseFloat(lng);\n\n  console.log(lat, lng);\n\n  const distance = 75; //in km\n  const radius = 6371; // earth's radius in km = ~6371\n\n  function rad2deg(angle) {\n    return angle * 57.29577951308232; // angle / Math.PI * 180\n  }\n\n  function deg2rad(angle) {\n    return angle * 0.017453292519943295; // (angle / 180) * Math.PI;\n  }\n\n  // latitude boundaries\n  const maxlat = lat + rad2deg(distance / radius);\n  const minlat = lat - rad2deg(distance / radius);\n\n  // longitude boundaries (longitude gets smaller when latitude increases)\n  const maxlng = lng + rad2deg(distance / radius / Math.cos(deg2rad(lat)));\n  const minlng = lng - rad2deg(distance / radius / Math.cos(deg2rad(lat)));\n\n  function distanceFromLocation(lat1, lon1, lat2, lon2) {\n    const theta = lon1 - lon2;\n    let dist =\n      Math.sin(deg2rad(lat1)) * Math.sin(deg2rad(lat2)) +\n      Math.cos(deg2rad(lat1)) *\n        Math.cos(deg2rad(lat2)) *\n        Math.cos(deg2rad(theta));\n    dist = Math.acos(dist);\n    dist = rad2deg(dist);\n    const miles = dist * 60 * 1.1515;\n    return miles * 1.609344;\n  }\n\n  //$query = \"template=location, place.lat>=$minlat, place.lat<=$maxlat, place.lng>=$minlng, place.lng<=$maxlng \";\n\n  const query = `query locationsInRange($minlat:Float!, $maxlat:Float!, $minlng:Float!, $maxlng:Float! $cat:String){\n        locations(where:{latitude_gte:$minlat,latitude_lte:$maxlat,longitude_gte:$minlng,longitude_lte:$maxlng,location_categories:$cat}) {\n        title\n        longitude\n        latitude\n\t\tid\n\t\tlocation_categories {\n\t\t\tlabel\n      value\n      id\n\t\t\tlocations {\n        title\n        id\n\t\t\t}\n\t\t}\n\t\tslug\n        photos {\n            id\n            likes\n            title\n            slug\n            photo {\n                url \n            }\n        }\n        }\n      }`;\n\n  const search = {\n    minlat: parseFloat(minlat),\n    maxlat: parseFloat(maxlat),\n    minlng: parseFloat(minlng),\n    maxlng: parseFloat(maxlng),\n  };\n\n  if (category != \"\") {\n    search.cat = category;\n  }\n\n  //console.log(query, search);\n  const result = await graphQLFetch(query, search, true);\n\n  console.log(\"result from FindNearbyLocations\", result);\n\n  if (result.locations.length > 0) {\n    //console.log(\"found locations\", result.locations);\n\n    // show only locations where a photo is linked to it\n    const locations = result.locations.filter(\n      (location) => location.photos.length > 0\n    );\n    //sort items on distance\n    locations.forEach((location) => {\n      // lat and lng are from this.state.photo\n      const locDistance = distanceFromLocation(\n        location.latitude,\n        location.longitude,\n        lat,\n        lng\n      );\n      location[\"distance\"] = locDistance;\n    });\n\n    locations.sort(function (a, b) {\n      var keyA = new Date(a.distance),\n        keyB = new Date(b.distance);\n      // Compare the 2 dates\n      if (keyA < keyB) return -1;\n      if (keyA > keyB) return 1;\n      return 0;\n    });\n\n    return locations;\n  } else {\n    return null;\n  }\n};\n","import React from \"react\";\n\nconst Footer = () => {\n  return (\n    <>\n      <footer>\n        <div className=\"bg-gray-900 py-12\">\n          <div className=\"container px-6 m-auto text-gray-800 block sm:flex justify-center\">\n            <div className=\"w-full \">\n              <div className=\"text-xs uppercase text-gray-500 font-medium\">\n                Home\n              </div>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Services <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Products <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                About Us <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Pricing <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Partners <span className=\"text-teal-600 text-xs p-1\">New</span>\n              </a>\n            </div>\n            <div className=\"w-full \">\n              <div className=\"text-xs uppercase text-gray-500 font-medium\">\n                User\n              </div>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Sign in <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                New Account <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Demo <span className=\"text-teal-600 text-xs p-1\">New</span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Career{\" \"}\n                <span className=\"text-teal-600 text-xs p-1\">We're hiring</span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Surveys <span className=\"text-teal-600 text-xs p-1\">New</span>\n              </a>\n            </div>\n            <div className=\"w-full \">\n              <div className=\"text-xs uppercase text-gray-500 font-medium\">\n                Resources\n              </div>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Documentation{\" \"}\n                <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Tutorials <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Support <span className=\"text-teal-600 text-xs p-1\">New</span>\n              </a>\n            </div>\n            <div className=\"w-full \">\n              <div className=\"text-xs uppercase text-gray-500 font-medium\">\n                Support\n              </div>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Help Center <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Privacy Policy{\" \"}\n                <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n              <a className=\"my-3 block text-white\" href=\"/#\">\n                Conditions <span className=\"text-teal-600 text-xs p-1\"></span>\n              </a>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-gray-900 pt-2 \">\n          <div\n            className=\"flex pb-5 px-6 m-auto pt-5 border-t text-white text-sm flex-col\n      md:flex-row container\"\n          >\n            <div className=\"mt-2\"> Copyright 2020. All Rights Reserved.</div>\n            <div className=\"md:flex-auto md:flex-row-reverse mt-2 flex-row flex\">\n              <a href=\"/#\" className=\"w-6 mx-1\">\n                <svg\n                  className=\"fill-current cursor-pointer text-gray-500 hover:text-gray-400\"\n                  width=\"100%\"\n                  height=\"100%\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    id=\"Facebook\"\n                    d=\"M24,12c0,6.627 -5.373,12 -12,12c-6.627,0 -12,-5.373 -12,-12c0,-6.627\n                  5.373,-12 12,-12c6.627,0 12,5.373\n                  12,12Zm-11.278,0l1.294,0l0.172,-1.617l-1.466,0l0.002,-0.808c0,-0.422\n                  0.04,-0.648 0.646,-0.648l0.809,0l0,-1.616l-1.295,0c-1.555,0 -2.103,0.784\n                  -2.103,2.102l0,0.97l-0.969,0l0,1.617l0.969,0l0,4.689l1.941,0l0,-4.689Z\"\n                  ></path>\n                </svg>\n              </a>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </>\n  );\n};\n\nexport default Footer;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Img from \"react-cool-img\";\nimport { useHistory } from \"react-router-dom\";\n\nconst LocationCard = ({ location, size, active }) => {\n  let cardClass;\n  let imageClass;\n  let imageStyle;\n  if (!size) {\n    cardClass = \"w-48 h-48 mr-4 lg:w-64 lg:h-64 locationCard\";\n    imageClass = \"w-auto h-full\";\n    imageStyle = {\n      backgroundColor: \"grey\",\n      transform: \"translateX(-50%)\",\n      left: \"50%\",\n    };\n  } else {\n    if (size === \"large\") {\n      cardClass = active\n        ? \"w-full h-48 mb-4 border-4 border-red-500\"\n        : \"w-full h-48 mb-4\";\n      imageClass = \"w-full h-48 object-cover\";\n      imageStyle = {\n        backgroundColor: \"grey\",\n        transform: \"translateY(-50%)\",\n        top: \"50%\",\n      };\n    }\n  }\n  return (\n    <div>\n      <div\n        className={`relative overflow-hidden rounded shadow hover:shadow-lg transition-shadow duration-500 ease-in-out ${cardClass}`}\n      >\n        <Link\n          className=\"absolute w-full h-full top-0 left-0 z-10\"\n          to={`/fotolocatie/${location.slug}`}\n        ></Link>\n\n        <Img\n          className={`absolute block max-w-none ${imageClass}`}\n          style={imageStyle}\n          src={location.photos\n            .sort((a, b) => b.likes - a.likes)[0]\n            .photo[0].url.replace(/-original|-watermark/gi, \"-small\")}\n          alt={`Bekijk locatie ${location.title}`}\n        />\n\n        <div className=\"absolute w-100 bottom-0 left-0 px-3 py-2\">\n          <h3 className=\"text-white text-sm\">{location.title}</h3>\n          {location.location_categories.map((category) => (\n            <LocationHashtag key={category.id} category={category} />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport const LocationHashtag = ({ category }) => {\n  return (\n    <span className=\"text-gray-400 mr-2 text-xs inline-block\">\n      #{category.label.toLowerCase()}\n    </span>\n  );\n};\n\nexport default LocationCard;\n","import React, { useState, useEffect } from \"react\";\n\nconst CategorieFilter = ({ categories, active, onFilterChange }) => {\n  const [filteredCategories, setFilteredCategories] = useState([]);\n  const [value, setValue] = useState();\n\n  useEffect(() => {\n    if (active) setValue(active);\n\n    const _filteredCategories = categories.reduce((newCats, categoryArr) => {\n      categoryArr.map((category) => {\n        const duplicateArr = newCats.filter((index) => {\n          return index.label === category.label;\n        });\n\n        if (duplicateArr.length === 0) {\n          newCats.push(category);\n        }\n\n        return newCats;\n      });\n      return newCats;\n    }, []);\n\n    setFilteredCategories(_filteredCategories);\n  }, []);\n\n  const onChange = (e) => {\n    setValue(e.target.value);\n    if (e.target.value === \"alle\") {\n      onFilterChange(e, true);\n    } else {\n      onFilterChange(e, false);\n    }\n  };\n\n  return (\n    <div>\n      <select\n        value={value}\n        onChange={onChange}\n        name=\"category\"\n        id=\"category\"\n        className=\"border p-1\"\n      >\n        <option value=\"alle\">Alle</option>\n        {filteredCategories.map((category) => {\n          return (\n            <option key={category.id} value={category.id}>\n              {category.label}\n            </option>\n          );\n        })}\n      </select>\n    </div>\n  );\n};\n\nexport default CategorieFilter;\n","import React from \"react\";\nimport Img from \"react-cool-img\";\nimport { useHistory } from \"react-router-dom\";\nimport { LocationHashtag } from \"../LocationCards.jsx\";\n\nconst LocationList = ({ location, active, selectLocation }) => {\n  let history = useHistory();\n  let cardClass = active\n    ? \"w-full mb-1 border-2 border-green-500\"\n    : \"w-full mb-1 border-2 border-white\";\n\n  const goToLocation = (slug, id) => {\n    let data = [];\n    if (sessionStorage.getItem(\"visitedLocations\")) {\n      data = JSON.parse(sessionStorage.getItem(\"visitedLocations\"));\n    }\n    if (data.indexOf(id) === -1) {\n      data.push(id);\n    }\n    sessionStorage.setItem(\"visitedLocations\", JSON.stringify(data));\n\n    history.push(`/fotolocatie/${slug}`);\n  };\n\n  return (\n    <div>\n      <div\n        onMouseOver={() => {\n          selectLocation(location.id);\n        }}\n        onMouseOut={() => {\n          selectLocation(\"\");\n        }}\n        className={`relative shadow hover:shadow-lg transition ease-in-out rounded ${cardClass}`}\n      >\n        <div\n          className=\"flex items-center p-1\"\n          onClick={() => {\n            goToLocation(location.slug, location.id);\n          }}\n        >\n          <Img\n            className={`rounded block max-w-none w-20 h-16 object-cover`}\n            style={{\n              backgroundColor: \"grey\",\n            }}\n            src={location.photos\n              .sort((a, b) => b.likes - a.likes)[0]\n              .photo[0].url.replace(/-original|-watermark/gi, \"-small\")}\n            alt={`Bekijk locatie ${location.title}`}\n          />\n\n          <div className=\"px-5 py-2\">\n            <h3 className=\"text-black text-lg\">{location.title}</h3>\n            {location.location_categories.map((category) => (\n              <LocationHashtag key={category.id} category={category} />\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LocationList;\n","import React, { useEffect, useState } from \"react\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet-universal\";\nimport locationIcon from \"../../images/locationMarker.svg\";\nimport userIcon from \"../../images/userMarker.svg\";\nimport visIcon from \"../../images/visitedMarker.svg\";\nimport Img from \"react-cool-img\";\nimport { useHistory } from \"react-router-dom\";\n\nconst ResultMap = ({ locations, selectLocation, active }) => {\n  const [bounds, setBounds] = useState([]);\n  const [showMap, setShowMap] = useState(false);\n  const [hoverIcon, setHoverIcon] = useState(false);\n  const [locIcon, setLocIcon] = useState(false);\n  const [visitedIcon, setVisIcon] = useState(false);\n  const [visitedLocations, setVisitedLocations] = useState([]);\n  const [prevSettings, setPrevSettings] = useState();\n  const [dynamicBounds, setDynamicBounds] = useState({});\n  let history = useHistory();\n\n  const loadMap = () => {\n    // loading leaflet in componentDidMount because it doenst support SSR\n    const L = require(\"leaflet\");\n\n    delete L.Icon.Default.prototype._getIconUrl;\n\n    const _hoverIcon = new L.Icon({\n      iconUrl: userIcon,\n      iconRetinaUrl: userIcon,\n      iconAnchor: [16, 40],\n      popupAnchor: [0, -40],\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n      shadowAnchor: [13, 40],\n      iconSize: new L.Point(32, 40),\n      className: \"little-blue-dot-\" + location.id,\n    });\n\n    const _locIcon = new L.Icon({\n      iconUrl: locationIcon,\n      iconRetinaUrl: locationIcon,\n      iconAnchor: [16, 40],\n      popupAnchor: [0, -40],\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n      shadowAnchor: [13, 40],\n      iconSize: new L.Point(32, 40),\n      className: \"little-blue-dot-\" + location.id,\n    });\n\n    const _visIcon = new L.Icon({\n      iconUrl: visIcon,\n      iconRetinaUrl: visIcon,\n      iconAnchor: [16, 40],\n      popupAnchor: [0, -40],\n      shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\").default,\n      shadowAnchor: [13, 40],\n      iconSize: new L.Point(32, 40),\n      className: \"little-blue-dot-\" + location.id,\n    });\n\n    setHoverIcon(_hoverIcon);\n    setLocIcon(_locIcon);\n    setVisIcon(_visIcon);\n\n    // get users position\n    var options = {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 0,\n    };\n    //const bounds = Leaflet.latLngBounds([position, position2]);\n    const _bounds = L.latLngBounds(\n      locations.map((location) => {\n        return [location.latitude, location.longitude];\n      })\n    );\n    setBounds(_bounds);\n\n    if (sessionStorage.getItem(\"visitedLocations\")) {\n      setVisitedLocations(\n        JSON.parse(sessionStorage.getItem(\"visitedLocations\"))\n      );\n    }\n\n    if (sessionStorage.getItem(\"prevsettings\")) {\n      console.log(\"getItem prevsettings if\");\n      setPrevSettings(JSON.parse(sessionStorage.getItem(\"prevsettings\")));\n      setBounds(null);\n    } else {\n      setDynamicBounds((dynamicBounds.bounds = _bounds));\n      console.log({ dynamicBounds });\n    }\n\n    setShowMap(true);\n  };\n\n  // useConstructor(() => {\n  //   loadMap();\n  // });\n\n  useEffect(() => {\n    loadMap();\n  }, []);\n\n  const goToLocation = (slug, id) => {\n    let data = [];\n    if (sessionStorage.getItem(\"visitedLocations\")) {\n      data = JSON.parse(sessionStorage.getItem(\"visitedLocations\"));\n    }\n    if (data.indexOf(id) === -1) {\n      data.push(id);\n    }\n    sessionStorage.setItem(\"visitedLocations\", JSON.stringify(data));\n\n    history.push(`/fotolocatie/${slug}`);\n  };\n\n  const onViewportChanged = (viewport) => {\n    console.log(viewport);\n    setPrevSettings(viewport);\n    sessionStorage.setItem(\"prevsettings\", JSON.stringify(viewport));\n  };\n\n  return (\n    <>\n      {showMap && (\n        <Map\n          center={prevSettings ? prevSettings.center : [52.0841037, 4.9424092]}\n          zoom={prevSettings ? prevSettings.zoom : 13}\n          // center={[52.0841037, 4.9424092]}\n          // zoom={13}\n          scrollWheelZoom={false}\n          className=\"resultMap w-full\"\n          id=\"photoLocation\"\n          onViewportChanged={onViewportChanged}\n          bounds={bounds || null}\n        >\n          <TileLayer\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          {locations.map((location) => {\n            return (\n              <Marker\n                position={[location.latitude, location.longitude]}\n                key={location.id}\n                onMouseOver={() => {\n                  console.log(\"check\", active, location.id);\n                  selectLocation(location.id);\n                }}\n                onMouseOut={() => {\n                  selectLocation(\"\");\n                }}\n                className=\"hover:translate-x-2 bg-black border border-red-500\"\n                icon={\n                  active === location.id\n                    ? hoverIcon\n                    : visitedLocations.indexOf(location.id) !== -1\n                    ? visitedIcon\n                    : locIcon\n                }\n              >\n                <Popup autoPan={false}>\n                  <span className=\"font-bold text-large block mb-2\">\n                    {location.title}\n                  </span>\n                  <Img\n                    className={` block max-w-none w-full h-18 object-cover`}\n                    src={location.photos\n                      .sort((a, b) => b.likes - a.likes)[0]\n                      .photo[0].url.replace(/-original|-watermark/gi, \"-small\")}\n                    alt={`Bekijk locatie ${location.title}`}\n                  />\n                  <div\n                    className=\"text-blue-400 font-bold text-large mt-2\"\n                    onClick={() => {\n                      goToLocation(location.slug, location.id);\n                    }}\n                  >\n                    Bekijk fotolocatie \n                  </div>\n                </Popup>\n              </Marker>\n            );\n          })}\n        </Map>\n      )}\n    </>\n  );\n};\n\nexport default ResultMap;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { findNearbyLocations } from \"../FindNearbyLocations.jsx\";\n/* to support IE */\nimport store from \"../../store.js\";\nimport useConstructor from \"../ConstructorHook.jsx\";\nimport ResultMap from \"./ResultMap.jsx\";\nimport CategorieFilter from \"./CategorieFilter.jsx\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport LocationList from \"./LocationList.jsx\";\n\nconst Results = (props) => {\n  const [locations, setLocations] = useState();\n  const [filteredLocations, setFilteredLocations] = useState({});\n  const [activeFilter, setActiveFilter] = useState(\"\");\n  const [selectedLocation, setSelectedLocation] = useState();\n  const [showMap, setShowMap] = useState(false);\n\n  let history = useHistory();\n  let location = useLocation();\n\n  useEffect(() => {\n    !locations && getLocations();\n\n    const _activeFilter = getActiveFilter();\n\n    if (locations) {\n      const _filteredLocations = locations.filter((location) => {\n        const include = location.location_categories.filter((categorie) => {\n          if (categorie.id === _activeFilter) {\n            return true;\n          } else {\n            return false;\n          }\n        });\n        //console.log(location.id, include);\n        if (include.length > 0) return true;\n      });\n      setFilteredLocations(_filteredLocations);\n    }\n    //console.log(_filteredLocations);\n  }, [location]);\n\n  const getLocations = async () => {\n    let _locations = store.initialData ? store.initialData : null;\n    console.log(store.initialData, _locations);\n    delete store.initialData;\n    if (!_locations) {\n      console.log(\"getting locations\");\n      _locations = await Results.fetchData(null, location.search);\n    }\n    setLocations(_locations.filter((location) => location.photos.length > 0));\n    console.log(_locations);\n  };\n\n  const getActiveFilter = () => {\n    const params = new URLSearchParams(location.search);\n\n    const _activeFilter = params.get(\"categorie\")\n      ? params.get(\"categorie\")\n      : \"\";\n\n    if (_activeFilter) {\n      return _activeFilter;\n    } else {\n      return false;\n    }\n  };\n\n  useConstructor(() => {\n    const _activeFilter = getActiveFilter();\n    if (_activeFilter) {\n      setActiveFilter(_activeFilter);\n    }\n    getLocations();\n    setShowMap(true);\n  });\n\n  const onFilterChange = (e, reset) => {\n    const params = new URLSearchParams(location.search);\n\n    const vars = {};\n    if (params.get(\"lat\")) vars.lat = params.get(\"lat\");\n    if (params.get(\"lng\")) vars.lng = params.get(\"lng\");\n\n    let url = \"\";\n    if (reset) {\n      url = `/fotolocaties/resultaten?lng=${vars.lng}&lat=${vars.lat}`;\n    } else {\n      url = `/fotolocaties/resultaten?lng=${vars.lng}&lat=${vars.lat}&categorie=${e.target.value}`;\n    }\n\n    history.push(url);\n  };\n\n  const selectLocation = (locationId) => {\n    setSelectedLocation(locationId);\n  };\n\n  return (\n    <div className=\"relative h-screen\">\n      <div className=\"flex h-full\">\n        <div className=\"w-full p-4 h-screen overflow-scroll\">\n          <h1>Resultaten</h1>\n          <div className=\"mb-2 flex\">\n            <span className=\"mr-2\">Filter op categorie:</span>\n            {locations &&\n              (filteredLocations.length > 0 ? (\n                <CategorieFilter\n                  active={activeFilter}\n                  onFilterChange={onFilterChange}\n                  categories={filteredLocations.map((location) => {\n                    return location.location_categories;\n                  })}\n                />\n              ) : (\n                <CategorieFilter\n                  active={activeFilter}\n                  onFilterChange={onFilterChange}\n                  categories={locations.map((location) => {\n                    return location.location_categories;\n                  })}\n                />\n              ))}\n          </div>\n          {locations &&\n            (filteredLocations.length > 0\n              ? filteredLocations.map((location) => (\n                  <div key={location.id} className=\"w-full\">\n                    <LocationList\n                      size=\"large\"\n                      location={location}\n                      key={location.id}\n                      active={selectedLocation === location.id ? true : false}\n                      selectLocation={selectLocation}\n                    />\n                  </div>\n                ))\n              : locations.map((location) => (\n                  <div key={location.id} className=\"w-full\">\n                    <LocationList\n                      size=\"large\"\n                      location={location}\n                      key={location.id}\n                      active={selectedLocation === location.id ? true : false}\n                      selectLocation={selectLocation}\n                    />\n                  </div>\n                )))}\n        </div>\n\n        <div className=\"mb-10 w-full h-full\">\n          {showMap &&\n            locations &&\n            (filteredLocations.length > 0 ? (\n              <ResultMap\n                locations={filteredLocations}\n                selectLocation={selectLocation}\n                active={selectedLocation}\n              />\n            ) : (\n              <ResultMap\n                locations={locations}\n                selectLocation={selectLocation}\n                active={selectedLocation}\n              />\n            ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Results;\n\nResults.fetchData = async (match, search, showError) => {\n  // test URL; http://localhost:8000/fotolocaties/resultaten?lng=52.379189&lat=4.899431\n  // use URLSearchParams for IE Compatibility\n  const params = new URLSearchParams(search);\n\n  console.log(\"fetching data\");\n\n  const vars = {};\n  if (params.get(\"lat\")) vars.lat = params.get(\"lat\");\n  if (params.get(\"lng\")) vars.lng = params.get(\"lng\");\n  //vars.cat = params.get(\"categorie\") ? params.get(\"categorie\") : \"\";\n\n  console.log(vars);\n\n  const _locations = await findNearbyLocations(vars.lat, vars.lng);\n\n  console.log(_locations);\n\n  return _locations;\n};\n","import React from \"react\";\nimport { FaUserSecret } from \"react-icons/fa\";\n\nconst UserProfilePicture = ({ profile, size = 16 }) => {\n  return profile.profilePicture !== null &&\n    profile.profilePicture !== undefined ? (\n    <div\n      id=\"imagePreview\"\n      className={`relative h-${size} w-${size} sm:h-${size + 4} sm:w-${\n        size + 4\n      } overflow-hidden rounded-full`}\n    >\n      <img\n        className={`w-auto h-${size} sm:h-${size + 4} sm:w-${\n          size + 4\n        } rounded-full mb-2`}\n        src={profile.profilePicture.url}\n      ></img>\n    </div>\n  ) : (\n    <div\n      id=\"imagePreview\"\n      className={`relative h-${size} w-${size} sm:h-${size + 4} sm:w-${\n        size + 4\n      } overflow-hidden rounded-full`}\n    >\n      <div\n        className={`fill-current h-${size} w-${size} sm:h-${size + 4} sm:w-${\n          size + 4\n        } mr-4 mb-auto text-white bg-gray-500  rounded-full flex items-center justify-center`}\n      >\n        <FaUserSecret className=\"text-2xl\" />\n      </div>\n    </div>\n  );\n};\n\nexport default UserProfilePicture;\n","import React, { useState } from \"react\";\nimport { FaHeart, FaSpinner } from \"react-icons/fa\";\n\nconst favButton = ({\n  favourite,\n  updateFav,\n  user,\n  likedId,\n  addTitle,\n  removeTitle,\n  receiver,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [liked, setLiked] = useState(favourite);\n\n  const onBtnClick = () => {\n    liked\n      ? updateFav(user, likedId, \"remove\", receiver)\n      : updateFav(user, likedId, \"add\", receiver);\n    setLiked(!liked);\n  };\n\n  const heartClass = !liked\n    ? `inline-block bg-white rounded py-2 px-3 h-8 text-gray-500 hover:text-red-500`\n    : `inline-block bg-white rounded py-2 px-3 h-8 text-red-500`;\n\n  return (\n    <div\n      className=\"revealTooltip mb-2 flex pointer justify-end items-center\"\n      onClick={loading ? () => {} : onBtnClick}\n    >\n      <div className=\"hidden inline-block bg-white rounded py-1 px-3 h-8\">\n        {!liked ? addTitle : removeTitle}\n      </div>\n      <div className={heartClass}>{loading ? <FaSpinner /> : <FaHeart />}</div>\n    </div>\n  );\n};\n\nexport default favButton;\n","import React, { useState, useEffect } from \"react\";\nimport { FiPlus, FiMinus } from \"react-icons/fi\";\n\nconst followButton = ({ follow, updateFollow, followId }) => {\n  const [loading, setLoading] = useState(false);\n  const [followed, setFollowed] = useState(follow);\n\n  const onBtnClick = () => {\n    console.log(\"clicked\");\n    followed ? updateFollow(followId) : updateFollow(followId);\n    setFollowed(!followed);\n  };\n\n  useEffect(() => {\n    setFollowed(follow);\n  }, [follow]);\n\n  const followIcon = !followed ? <FiPlus /> : <FiMinus />;\n\n  const followClass = !followed\n    ? `cursor-pointer my-1 rounded w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white px-2 py-2 text-xs flex justify-center items-center followProfile`\n    : `cursor-pointer my-1 rounded w-full sm:w-auto bg-gray-500 hover:bg-gray-600 text-white px-2 py-2 text-xs flex justify-center items-center followProfile`;\n\n  return (\n    <div onClick={loading ? () => {} : onBtnClick} className={followClass}>\n      {followIcon}\n      {!followed ? ` Volgen` : ` Ontvolgen`}\n    </div>\n  );\n};\n\nexport default followButton;\n","import React, { useState, useEffect } from \"react\";\nimport UserProfilePicture from \"../UserProfilePicture.jsx\";\nimport { IoIosCloseCircle } from \"react-icons/io\";\nimport graphQLFetch from \"../../graphQLFetch.js\";\n\nconst Notifications = ({ user, onClick, show }) => {\n  const [notifications, setNotifications] = useState();\n\n  useEffect(() => {\n    setNotifications(user.receivedNotifications);\n  }, [user.receivedNotifications]);\n\n  const deleteNotification = async (id) => {\n    const oldNotifications = notifications;\n\n    const _notifications = notifications.filter((notification) => {\n      return notification.id != id;\n    });\n\n    setNotifications(_notifications);\n\n    const query = `mutation deleteNotification($id:ID!){\n        deleteNotification(input: { where: { id: $id } }) {\n          notification {\n            id\n          }\n        }\n      }`;\n\n    let vars = {};\n    vars.id = id;\n\n    const data = await graphQLFetch(query, vars, true);\n    if (!data.deleteNotification.notification) {\n      setNotifications(oldNotifications);\n    }\n  };\n\n  if (!show) {\n    return (\n      <>\n        {notifications && notifications.length > 0 && (\n          <div className=\"rounded-full bg-red-500 text-white absolute top-0 -mt-1 right-0 -mr-1 text-xs w-5 h-5 flex items-center justify-center\">\n            {notifications.length}\n          </div>\n        )}\n      </>\n    );\n  } else {\n    return (\n      <>\n        {notifications && notifications.length > 0 && (\n          <div className=\"rounded-full bg-red-500 text-white absolute top-0 -mt-1 right-0 -mr-1 text-xs w-5 h-5 flex items-center justify-center\">\n            {notifications.length}\n          </div>\n        )}\n        <div\n          className=\"absolute bg-white rounded py-6 border z-20 right-0 shadow-lg\"\n          id=\"notifications\"\n        >\n          <h1 className=\"text-black pl-6\">Meldingen</h1>\n          {notifications && !notifications.length > 0 ? (\n            <div className=\"my-2 px-6 py-4\">\n              Er zijn geen notificaties voor je!\n            </div>\n          ) : (\n            notifications &&\n            notifications.map((notification) => {\n              return (\n                <Notification\n                  onClick={onClick}\n                  key={notification.id}\n                  notification={notification}\n                  onDeleteNotification={deleteNotification}\n                />\n              );\n            })\n          )}\n        </div>\n      </>\n    );\n  }\n};\n\nexport default Notifications;\n\nconst Notification = ({ notification, onClick, onDeleteNotification }) => {\n  const { giver, photo } = notification;\n\n  const generateText = () => {\n    if (notification.action === \"like\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } vind je foto ${photo.title} leuk`;\n    }\n    if (notification.action === \"comment\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } heeft gereageerd op je foto ${photo.title}`;\n    }\n    if (notification.action === \"follow\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } volgt je nu!`;\n    }\n  };\n\n  const goToPage = () => {\n    if (notification.action === \"like\" || notification.action === \"comment\") {\n      onClick(`/foto/${photo.slug}`);\n    }\n    if (notification.action === \"follow\") {\n      onClick(`/fotograaf/${giver.slug}`);\n    }\n  };\n\n  const deleteNotification = (e) => {\n    e.stopPropagation();\n    onDeleteNotification(notification.id);\n  };\n\n  return (\n    <>\n      <div\n        onClick={goToPage}\n        className=\"flex items-center relative my-2 px-6 py-4 hover:bg-gray-100 cursor-pointer z-10\"\n      >\n        <div className=\"mr-4\">\n          <UserProfilePicture profile={notification.giver} size={8} />\n        </div>\n        <div>{generateText()}</div>\n        <div className=\"ml-auto\" onClick={deleteNotification}>\n          <IoIosCloseCircle className=\"text-gray-500 hover:text-gray-600 text-2xl\" />{\" \"}\n        </div>\n      </div>\n    </>\n  );\n};\n","\nimport { toast, ToastType } from 'react-toastify';\nimport fetch from 'isomorphic-fetch';\n\nconst dateRegex = new RegExp('^\\\\d\\\\d\\\\d\\\\d-\\\\d\\\\d-\\\\d\\\\d');\n\nfunction jsonDateReviver(key, value) {\n    if (dateRegex.test(value)) return new Date(value);\n    return value;\n}\n\nexport default async function graphQLFetch(query, variables = {}, isBlog = false, returnError = false) {\n    //console.log('query from graphQlFetch ' + query)\n    let apiEndpoint = (__isBrowser__) // eslint-disable-line no-undef\n        ? window.ENV.UI_API_ENDPOINT\n        : process.env.UI_SERVER_API_ENDPOINT;\n\n    apiEndpoint = isBlog ? 'http://localhost:1337/graphql' : apiEndpoint;\n\n    try {\n        const response = await fetch(apiEndpoint, {\n            method: \"POST\",\n            headers: { \"Content-type\": \"application/json\" },\n            body: JSON.stringify({ query, variables })\n        });\n        const body = await response.text();\n        const result = JSON.parse(body, jsonDateReviver);\n\n        // alert the error message whenthe result is containing erros\n        if (result.errors) {\n            const error = result.errors[0];\n            if (error.extensions.code == \"BAD_USER_INPUT\") {\n                console.log(error);\n                const details = error.extensions.exception.errors.join(\"\\n \");\n                toast.error(`${error.message}\\n ${details}`);\n                if (returnError) return result;\n            } else {\n                toast.error(`${error.extensions.code}\\n ${error.message}`);\n                if (returnError) return result;\n            }\n        }\n        return result.data;\n    } catch (e) {\n        toast.error(`Error in sending data to server: ${e.message}`);\n    }\n}","export default __webpack_public_path__ + \"3dd5bee5e47514a333b518f1c68a0831.svg\";","export default __webpack_public_path__ + \"34bcdf28c1687c9e3e7bf72842119b4f.png\";","export default __webpack_public_path__ + \"0325b3fec9806c898205b7d408b0b963.svg\";","export default __webpack_public_path__ + \"bcaf5cb2422e718038f690e92846255a.svg\";","import PhotoDetailStrapi from \"./PhotoDetailStrapi.jsx\";\nimport LocationDetailStrapi from \"./LocationDetailStrapi.jsx\";\nimport PhotoAddStrapi from \"./PhotoAddStrapi.jsx\";\nimport PhotoAddToLocation from \"./PhotoAddToLocation.jsx\";\nimport Home from \"./Home.jsx\";\nimport NotFound from \"./NotFound.jsx\";\nimport BlogPost from \"./BlogPost.jsx\";\nimport RegisterForm from \"./RegisterHooks.jsx\";\nimport Login from \"./LoginHooks.jsx\";\nimport Logout from \"./Logout.jsx\";\nimport ForgotPassword from \"./ForgotPassword.jsx\";\nimport PasswordReset from \"./PasswordReset.jsx\";\nimport Profile from \"./Profile.jsx\";\nimport FBConnect from \"./FBConnect.jsx\";\nimport ProfileEdit from \"./ProfileEdit.jsx\";\nimport LocationsPerCategorie from \"./components/CategorySearch/LocationsPerCategorie.jsx\";\nimport Results from \"./components/Results/Results.jsx\";\nimport Dashboard from \"./components/Dashboard/Dashboard.jsx\";\nimport Notifications from \"./components/notificationCenter/notifications.jsx\";\n\nconst routes = [\n  { path: \"/aanmelden\", component: RegisterForm, exact: true },\n  { path: \"/inloggen\", component: Login, exact: true },\n  { path: \"/uitloggen\", component: Logout, exact: true },\n  { path: \"/wachtwoord-vergeten\", component: ForgotPassword, exact: true },\n  { path: \"/wachtwoord-resetten\", component: PasswordReset, exact: true },\n  { path: \"/foto/toevoegen\", component: PhotoAddStrapi, exact: true },\n  { path: \"/foto/toevoegen/:id\", component: PhotoAddToLocation, exact: true },\n  { path: \"/fotograaf/:slug\", component: Profile, exact: true },\n  { path: \"/foto/:id\", component: PhotoDetailStrapi, exact: true },\n  { path: \"/fotolocatie/:id\", component: LocationDetailStrapi, exact: true },\n  {\n    path: \"/fotolocaties/categorie/:value\",\n    component: LocationsPerCategorie,\n    exact: true,\n  },\n  {\n    path: \"/fotolocaties/resultaten\",\n    component: Results,\n    exact: true,\n  },\n  //{ path: \"/fotos\", component: PhotoListStrapi },\n  { path: \"/connect/facebook\", component: FBConnect },\n  //{ path: \"/bewerken/:id\", component: PhotoEdit, exact: true },\n  { path: \"/profiel/bewerken/:slug\", component: ProfileEdit },\n  //{ path: \"/report\", component: PhotoReport },\n  //{ path: \"/about\", component: About },\n  { path: \"/\", component: Home, exact: true },\n  { path: \"/dashboard\", component: Dashboard, exact: true },\n  { path: \"/niet-gevonden\", component: NotFound, exact: true },\n  { path: \"/*\", component: BlogPost },\n];\n\nexport default routes;\n","import graphQLFetch from \"../graphQLFetch.js\";\nimport jwtDecode from \"jwt-decode\";\n\nconst tokenKey = \"token\";\n\nexport async function register(input) {\n  const query = `mutation register($input: UsersPermissionsRegisterInput!) {\n            register(input: $input) {\n                jwt\n                user {\n                  id\n                  email\n                  username\n                  slug\n                }\n            }\n          } `;\n\n  const result = await graphQLFetch(query, { input }, true, true);\n  console.log(result);\n  if (!result.errors) {\n    // user registered and getting JWT token!\n    const {\n      register: { jwt },\n    } = result;\n    localStorage.setItem(tokenKey, jwt);\n    return true;\n  } else {\n    return result.errors[0];\n  }\n}\n\nexport function setToken(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport async function login(input) {\n  const query = `mutation login($input: UsersPermissionsLoginInput!) {\n            login(input: $input) {\n              jwt\n              user {\n                id\n                email\n\t\t\t\tusername\n              }\n            }\n          } `;\n\n  const result = await graphQLFetch(query, { input }, true, true);\n  //console.log(result);\n\n  console.log(result);\n  if (!result.errors) {\n    // user registered and getting JWT token!\n    const {\n      login: { jwt },\n    } = result;\n    localStorage.setItem(tokenKey, jwt);\n    return true;\n  } else {\n    return result.errors[0];\n  }\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport async function checkAvailability(type, value) {\n  const query = `query checkAvailability($${type}:String!){\n    users( where: { ${type}: $${type} }) {\n      ${type}\n    }\n  } `;\n\n  console.log(query, type, value);\n\n  const result = await graphQLFetch(query, value, true, true);\n  console.log(result);\n  console.log(result.users.length);\n  if (result.users.length > 0) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nexport async function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    //console.log(\"jwt\", jwt);\n    const userId = jwtDecode(jwt).id;\n\n    const query = `query getUser($id:ID!) {\n            user(id: $id) {\n                id\n                email\n                username\n                slug\n                receivedNotifications {\n                  id\n                  photo {\n                    title\n                    id\n                    slug\n                  }\n                  action\n                  giver {\n                    id\n                    firstname\n                    lastname\n                    slug\n                    username\n                    profilePicture {\n                      url\n                    }\n                  }\n                }\n                followings {\n                  id\n                }\n                favouriteLocations {\n                  id\n                }\n                likedPhotos {\n                  id\n                }\n                photos {\n                id\n                }\n            }\n            } `;\n\n    const result = await graphQLFetch(query, { id: userId }, true, true);\n    //console.log(result);\n    if (result) {\n      return result.user;\n    }\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport default {\n  login,\n  logout,\n  getCurrentUser,\n  register,\n  setToken,\n  checkAvailability,\n};\n","import axios from \"axios\";\n\naxios.interceptors.response.use(null, (error) => {\n  const expextedError =\n    error.response &&\n    error.response.status >= 400 &&\n    error.response.status < 500;\n\n  if (!expextedError) {\n    console.log(\"Logging the error\", error);\n  }\n});\n\nexport default {\n  get: axios.get,\n  post: axios.post,\n  put: axios.put,\n  delete: axios.delete\n};\n","import React from \"react\";\nexport const userContext = React.createContext({ user: {} }); // Create a context object\n","const store = {};\nexport default store;","const path = require(\"path\");\nconst nodeExternals = require(\"webpack-node-externals\");\nconst webpack = require(\"webpack\");\n\nconst browserConfig = {\n  mode: \"development\",\n  entry: { app: [\"./browser/App.jsx\"] },\n  output: {\n    filename: \"[name].bundle.js\",\n    path: path.resolve(__dirname, \"public\"),\n    publicPath: \"/\",\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          // Creates `style` nodes from JS strings\n          \"style-loader\",\n          // Translates CSS into CommonJS\n          \"css-loader\",\n          {\n            loader: \"postcss-loader\",\n            options: {\n              postcssOptions: {\n                plugins: [require(\"tailwindcss\"), require(\"autoprefixer\")],\n              },\n            },\n          },\n          // Compiles Sass to CSS\n          \"sass-loader\",\n        ],\n      },\n      {\n        test: /\\.jsx?$/,\n        exclude: /node_modules/,\n        use: {\n          loader: \"babel-loader\",\n          options: {\n            presets: [\n              [\n                \"@babel/preset-env\",\n                {\n                  targets: {\n                    ie: \"11\",\n                    edge: \"15\",\n                    safari: \"10\",\n                    firefox: \"50\",\n                    chrome: \"49\",\n                  },\n                },\n              ],\n              \"@babel/preset-react\",\n            ],\n            plugins: [\"@babel/plugin-proposal-class-properties\"],\n          },\n        },\n      },\n      {\n        test: /\\.(png|jpe?g|gif|svg)$/i,\n        use: [\n          {\n            loader: \"file-loader\",\n          },\n        ],\n      },\n    ],\n  },\n  optimization: {\n    splitChunks: {\n      name: \"vendor\",\n      chunks: \"all\",\n    },\n  },\n  plugins: [\n    new webpack.DefinePlugin({\n      __isBrowser__: \"true\",\n    }),\n  ],\n  devtool: \"source-map\",\n};\n\nconst serverConfig = {\n  mode: \"development\",\n  entry: { server: [\"./server/uiserver.js\"] },\n  target: \"node\",\n  externals: [nodeExternals()],\n  output: {\n    filename: \"server.js\",\n    path: path.resolve(__dirname, \"dist\"),\n    publicPath: \"/\",\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?$/,\n        use: {\n          loader: \"babel-loader\",\n          options: {\n            presets: [\n              [\n                \"@babel/preset-env\",\n                {\n                  targets: { node: \"10\" },\n                },\n              ],\n              \"@babel/preset-react\",\n            ],\n            plugins: [\"@babel/plugin-proposal-class-properties\"],\n          },\n        },\n      },\n      {\n        test: /\\.(png|jpe?g|gif|svg)$/i,\n        use: [\n          {\n            loader: \"file-loader\",\n          },\n        ],\n      },\n    ],\n  },\n  plugins: [\n    new webpack.DefinePlugin({\n      __isBrowser__: \"false\",\n    }),\n  ],\n  devtool: \"source-map\",\n};\n\nmodule.exports = [browserConfig, serverConfig];\n","module.exports = require(\"@hapi/joi\");","module.exports = require(\"autoprefixer\");","module.exports = require(\"axios\");","module.exports = require(\"dotenv\");","module.exports = require(\"exif-js\");","module.exports = require(\"exifr\");","module.exports = require(\"express\");","module.exports = require(\"http-proxy-middleware\");","module.exports = require(\"isomorphic-fetch\");","module.exports = require(\"jwt-decode\");","module.exports = require(\"leaflet\");","module.exports = require(\"leaflet/dist/images/marker-shadow.png\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-cool-img\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-icons/ai\");","module.exports = require(\"react-icons/cg\");","module.exports = require(\"react-icons/fa\");","module.exports = require(\"react-icons/fi\");","module.exports = require(\"react-icons/go\");","module.exports = require(\"react-icons/io\");","module.exports = require(\"react-icons/io5\");","module.exports = require(\"react-icons/md\");","module.exports = require(\"react-icons/ti\");","module.exports = require(\"react-leaflet-universal\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"react-sanitized-html\");","module.exports = require(\"react-select\");","module.exports = require(\"react-select/animated\");","module.exports = require(\"react-select/creatable\");","module.exports = require(\"react-toastify\");","module.exports = require(\"serialize-javascript\");","module.exports = require(\"slugify\");","module.exports = require(\"source-map-support\");","module.exports = require(\"swiper/react\");","module.exports = require(\"tailwindcss\");","module.exports = require(\"url-search-params\");","module.exports = require(\"webpack\");","module.exports = require(\"webpack-dev-middleware\");","module.exports = require(\"webpack-hot-middleware\");","module.exports = require(\"webpack-node-externals\");"],"sourceRoot":""}