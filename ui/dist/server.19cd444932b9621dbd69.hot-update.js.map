{"version":3,"sources":["webpack:///./src/components/Dashboard/Dashboard.jsx"],"names":["Dashboard","props","categories","setCategories","useState","showNotifications","setShowNotifications","match","useRouteMatch","getCategories","console","log","_categories","store","initialData","fetchData","useConstructor","redirect","slug","history","push","value","user","username","search","showError","query","vars","locationCategories","result","graphQLFetch","filter","cat","locations","length"],"mappings":"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","file":"server.19cd444932b9621dbd69.hot-update.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Heading from \"./Heading.jsx\";\nimport LocationsNearby from \"./LocationsNearby.jsx\";\nimport CategorieList from \"./CategorieList.jsx\";\nimport graphQLFetch from \"../../graphQLFetch.js\";\nimport store from \"../../store.js\";\nimport { userContext } from \"../../services/userContext.js\";\nimport { Redirect, Link, useRouteMatch } from \"react-router-dom\";\nimport useConstructor from \"../ConstructorHook.jsx\";\nimport MostRecent from \"./MostRecent.jsx\";\nimport UserProfilePicture from \"../UserProfilePicture.jsx\";\nimport { FaHome, FaBookmark, FaPlus } from \"react-icons/fa\";\nimport { IoNotifications } from \"react-icons/io5\";\nimport { FiLogOut } from \"react-icons/fi\";\n\nconst Dashboard = (props) => {\n  const [categories, setCategories] = useState();\n  const [showNotifications, setShowNotifications] = useState();\n  const match = useRouteMatch();\n\n  const getCategories = async () => {\n    console.log({ match });\n    let _categories = store.initialData ? store.initialData : null;\n    delete store.initialData;\n    if (!_categories) {\n      _categories = await Dashboard.fetchData();\n    }\n    setCategories(_categories);\n  };\n\n  useConstructor(() => {\n    getCategories();\n  });\n\n  const redirect = (slug) => {\n    props.history.push(slug);\n  };\n\n  return (\n    <userContext.Consumer>\n      {(value) => {\n        return !value.user ? (\n          <Redirect to=\"/\" />\n        ) : (\n          <React.Fragment>\n            <div className=\"block md:flex mt-8\">\n              <div className=\"w-full md:w-1/4 px-8\">\n                <div className=\"flex items-center\">\n                  <div className=\"mr-4\">\n                    <UserProfilePicture profile={value.user} size={10} />\n                  </div>\n                  <h1 className=\"font-bold text-xl leading-tight text-center sm:text-left\">\n                    {value.user.username}\n                  </h1>\n                </div>\n                <ul className=\"mt-6\">\n                  <li\n                    className={`block py-3 flex items-center ${\n                      !showNotifications\n                        ? `text-blue-500 font-bold`\n                        : `text-gray-900 hover:text-blue-500 hover:font-bold`\n                    }`}\n                    onClick={() => setShowNotifications(false)}\n                  >\n                    <FaHome className=\"mr-2\" />\n                    <span>Dashboard</span>\n                  </li>\n                  <li>\n                    <Link\n                      className=\"block py-3 text-gray-900 hover:text-blue-500 hover:font-bold flex items-center\"\n                      to={`/fotograaf/${value.user.slug}#fav`}\n                    >\n                      <FaBookmark className=\"mr-2\" />\n                      <span>Opgeslagen locaties</span>\n                    </Link>\n                  </li>\n                  <li>\n                    <Link\n                      className=\"block py-3 text-gray-900 hover:text-blue-500 hover:font-bold flex items-center\"\n                      to=\"/foto/toevoegen\"\n                    >\n                      <FaPlus className=\"mr-2\" />\n                      <span>Foto uploaden</span>\n                    </Link>\n                  </li>\n                  <li>\n                    <span\n                      className={`block py-3 flex items-center ${\n                        showNotifications\n                          ? `text-blue-500 font-bold`\n                          : `text-gray-900 hover:text-blue-500 hover:font-bold`\n                      }`}\n                      onClick={() => setShowNotifications(true)}\n                    >\n                      <IoNotifications className=\"mr-2\" />\n                      <span>Berichten</span>\n                    </span>\n                  </li>\n                  <li>\n                    <Link\n                      className=\"block py-3 text-gray-900 hover:text-blue-500 hover:font-bold border-t border-gray-200 pt-6 mt-6 flex items-center\"\n                      to=\"\"\n                    >\n                      <FiLogOut className=\"mr-2\" />\n                      <span>Uitloggen</span>\n                    </Link>\n                  </li>\n                </ul>\n              </div>\n\n              <div className=\"w-full md:w-1/2\">\n                {showNotifications ? (\n                  <NotificationBoard user={value.user} />\n                ) : (\n                  <>\n                    <Heading redirect={redirect} />\n                    <MostRecent />\n                  </>\n                )}\n              </div>\n\n              <div className=\"w-full md:w-1/4  px-8\">\n                <LocationsNearby />\n                <CategorieList categories={categories} />\n              </div>\n            </div>\n          </React.Fragment>\n        );\n      }}\n    </userContext.Consumer>\n  );\n};\n\nexport default Dashboard;\n\nDashboard.fetchData = async (match, search, showError) => {\n  // build the graphql query\n  const query = `query {\n\t\tlocationCategories{\n\t\t  label\n      value\n      locations {\n        id\n      }\n\t\t}\n\t  }`;\n\n  const vars = {};\n  const { locationCategories: result } = await graphQLFetch(query, vars, true);\n\n  // only return categories with available locations\n  return result.filter((cat) => cat.locations.length > 0);\n};\n"],"sourceRoot":""}