{"version":3,"sources":["webpack:///./src/components/Dashboard/SearchBox.jsx"],"names":["SearchBox","props","showDropdown","setShowDropdown","useState","formValue","setFormValue","history","useHistory","handleDropdown","focussed","handleSubmit","e","preventDefault","console","log","urlValue","trim","replace","url","response","fetch","ok","json","length","sessionStorage","getItem","removeItem","redirect","lat","lon","toast","error","alert","status","handleChange","target","value","searchCurLoc","options","enableHighAccuracy","timeout","maximumAge","success","pos","crd","coords","latitude","longitude","err","then","res","location","navigator","geolocation","getCurrentPosition","setTimeout"],"mappings":"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","file":"server.1bb08c036ac62a5d1892.hot-update.js","sourcesContent":["import React, { useState } from \"react\";\nimport { FaSearch } from \"react-icons/fa\";\nimport { TiLocationArrow } from \"react-icons/ti\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nconst SearchBox = (props) => {\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [formValue, setFormValue] = useState(\"\");\n  let history = useHistory();\n\n  const handleDropdown = (focussed) => {\n    setShowDropdown(focussed);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log(\"submiteed\");\n    console.log(formValue);\n    const urlValue = formValue.trim().replace(/\\s/g, \"%20\");\n\n    const url = `https://nominatim.openstreetmap.org/search/${urlValue}?format=json&addressdetails=1&limit=1`;\n\n    const response = await fetch(url);\n    console.log(response);\n    if (response.ok) {\n      // if HTTP-status is 200-299\n      // get the response body (the method explained below)\n      let json = await response.json();\n      //console.log(json);\n      //\n      if (json.length > 0) {\n        // the entered city can be converted to lat long\n        sessionStorage.getItem(\"prevsettings\") &&\n          sessionStorage.removeItem(\"prevsettings\");\n        props.redirect(\n          `/fotolocaties/resultaten/?lat=${json[0].lat}&lng=${json[0].lon}`\n        );\n      } else {\n        toast.error(\n          \"Het lijkt erop dat je geen geldige locatie hebt ingevuld :-(\"\n        );\n      }\n    } else {\n      alert(\"HTTP-Error: \" + response.status);\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormValue(e.target.value);\n  };\n\n  const searchCurLoc = () => {\n    // get users position\n    var options = {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 0,\n    };\n\n    const success = async (pos) => {\n      var crd = pos.coords;\n\n      sessionStorage.getItem(\"prevsettings\") &&\n        sessionStorage.removeItem(\"prevsettings\");\n\n      props.redirect(\n        `/fotolocaties/resultaten/?lat=${crd.latitude}&lng=${crd.longitude}`\n      );\n    };\n\n    const error = async (err) => {\n      fetch(\"https://ipapi.co/json\")\n        .then((res) => res.json())\n        .then(async (location) => {\n          props.redirect(\n            `/fotolocaties/resultaten/?lat=${location.latitude}&lng=${location.longitude}`\n          );\n        });\n    };\n\n    navigator.geolocation.getCurrentPosition(success, error, options);\n  };\n\n  return (\n    <div className=\"searchBox max-w-md mx-auto\">\n      <form\n        action=\"/fotolocaties/resultaten/\"\n        method=\"get\"\n        id=\"search-locations\"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"relative\">\n          <div className=\"relative\">\n            <input type=\"hidden\" name=\"lat\" id=\"lat\" />\n            <input type=\"hidden\" name=\"lng\" id=\"lng\" />\n\n            <input\n              className=\"rounded border border-gray-300 px-4 py-2 w-full top-0 left-0 focus:rounded-t\"\n              type=\"search\"\n              placeholder=\"Locatie zoeken\"\n              onFocus={() => {\n                handleDropdown(true);\n              }}\n              onBlur={() => {\n                setTimeout(() => {\n                  handleDropdown(false);\n                }, 1000);\n              }}\n              onChange={handleChange}\n            />\n            <FaSearch className=\"absolute top-0 right-0 m-3 fill-current text-gray-500\" />\n          </div>\n          {showDropdown && (\n            <div className=\"dropdown bg-white rounded-b border absolute w-full\">\n              <div className=\"flex justify-center items-center px-4 py-2\">\n                <TiLocationArrow />\n                <span onClick={searchCurLoc}>Gebruik huidige locatie</span>\n              </div>\n            </div>\n          )}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default SearchBox;\n"],"sourceRoot":""}