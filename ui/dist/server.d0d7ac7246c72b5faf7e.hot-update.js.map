{"version":3,"sources":["webpack:///./src/components/Dashboard/NotificationBoard.jsx"],"names":["NotificationBoard","user","notifications","setNotifications","useState","useEffect","receivedNotifications","deleteNotification","id","oldNotifications","_notifications","filter","notification","query","vars","data","graphQLFetch","length","map","Notification","onDeleteNotification","giver","photo","history","useHistory","generateText","action","firstame","username","firstname","title","goToPage","push","slug","e","stopPropagation"],"mappings":"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","file":"server.d0d7ac7246c72b5faf7e.hot-update.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport UserProfilePicture from \"../UserProfilePicture.jsx\";\nimport { IoIosCloseCircle } from \"react-icons/io\";\nimport graphQLFetch from \"../../graphQLFetch.js\";\nimport { useHistory } from \"react-router-dom\";\n\nconst NotificationBoard = ({ user }) => {\n  const [notifications, setNotifications] = useState();\n\n  useEffect(() => {\n    setNotifications(user.receivedNotifications);\n  }, [user.receivedNotifications]);\n\n  const deleteNotification = async (id) => {\n    const oldNotifications = notifications;\n\n    const _notifications = notifications.filter((notification) => {\n      return notification.id != id;\n    });\n\n    setNotifications(_notifications);\n\n    const query = `mutation deleteNotification($id:ID!){\n        deleteNotification(input: { where: { id: $id } }) {\n          notification {\n            id\n          }\n        }\n      }`;\n\n    let vars = {};\n    vars.id = id;\n\n    const data = await graphQLFetch(query, vars, true);\n    if (!data.deleteNotification.notification) {\n      setNotifications(oldNotifications);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"py-6\" id=\"notifications\">\n        <h1 className=\"text-black pl-6\">Meldingen</h1>\n        {notifications && !notifications.length > 0 ? (\n          <div className=\"my-2 px-6 py-4\">\n            Er zijn geen notificaties voor je!\n          </div>\n        ) : (\n          notifications &&\n          notifications.map((notification) => {\n            return (\n              <Notification\n                key={notification.id}\n                notification={notification}\n                onDeleteNotification={deleteNotification}\n              />\n            );\n          })\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default NotificationBoard;\n\nconst Notification = ({ notification, onDeleteNotification }) => {\n  const { giver, photo } = notification;\n  const history = useHistory();\n\n  const generateText = () => {\n    if (notification.action === \"like\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } vind je foto ${photo.title} leuk`;\n    }\n    if (notification.action === \"comment\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } heeft gereageerd op je foto ${photo.title}`;\n    }\n    if (notification.action === \"follow\") {\n      return `${\n        !giver.firstame ? giver.username : giver.firstname\n      } volgt je nu!`;\n    }\n  };\n\n  const goToPage = () => {\n    if (notification.action === \"like\" || notification.action === \"comment\") {\n      history.push(`/foto/${photo.slug}`);\n    }\n    if (notification.action === \"follow\") {\n      history.push(`/fotograaf/${giver.slug}`);\n    }\n  };\n\n  const deleteNotification = (e) => {\n    e.stopPropagation();\n    onDeleteNotification(notification.id);\n  };\n\n  return (\n    <>\n      <div\n        onClick={goToPage}\n        className=\"flex items-center relative my-2 px-6 py-4 hover:bg-gray-100 cursor-pointer z-10\"\n      >\n        <div className=\"mr-4\">\n          <UserProfilePicture profile={notification.giver} size={8} />\n        </div>\n        <div>{generateText()}</div>\n        <div className=\"ml-auto\" onClick={deleteNotification}>\n          <IoIosCloseCircle className=\"text-gray-500 hover:text-gray-600 text-2xl\" />{\" \"}\n        </div>\n      </div>\n    </>\n  );\n};\n"],"sourceRoot":""}